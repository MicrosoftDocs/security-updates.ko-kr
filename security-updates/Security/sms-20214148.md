---
TOCTitle: SMS를 사용하여 패치 관리를 수행하는 방법
Title: SMS를 사용하여 패치 관리를 수행하는 방법
ms:assetid: '22720b19-7ef2-4491-bf31-9499cb7123fe'
ms:contentKeyID: 20214148
ms:mtpsurl: 'https://technet.microsoft.com/ko-kr/library/Dd547993(v=TechNet.10)'
---

SMS를 사용하여 패치 관리를 수행하는 방법
========================================

##### 이 페이지에서

[](#egaa)[목적](#egaa)  
[](#efaa)[적용 대상](#efaa)  
[](#eeaa)[모듈 사용법](#eeaa)  
[](#edaa)[요약](#edaa)  
[](#ecaa)[시작하기 전에](#ecaa)  
[](#ebaa)[알아 둘 사항](#ebaa)  
[](#eaaa)[평가 단계 - 업데이트 검색](#eaaa)  
[](#sder)[평가 단계 - SMS 인프라 디자인](#sder)  
[](#lcda)[확인 단계 - 알림 받기](#lcda)  
[](#csma)[확인 단계 - 알림 처리](#csma)  
[](#masc)[확인 단계 - 보안 문제 검색 도구](#masc)  
[](#samc)[확인 단계 - 소프트웨어 업데이트의 관련 여부 확인](#samc)  
[](#zocr)[평가 및 계획 단계 - 패치를 적용할 항목 결정](#zocr)  
[](#ruca)[평가 및 계획 단계 - 응급 변경 요청 배포](#ruca)  
[](#cwop)[평가 및 계획 단계 - 릴리스 빌드](#cwop)  
[](#cwer)[배포 단계 - 배포 준비](#cwer)  
[](#csdc)[배포 단계 - 클라이언트 컴퓨터에 소프트웨어 업데이트 보급 알림](#csdc)  
[](#zwcr)[배포 단계 - 배포 진행률 모니터링 및 보고](#zwcr)  
[](#rtca)[배포 단계 - 실패한 배포 처리](#rtca)

### 목적

이 모듈을 사용하여 다음을 수행할 수 있습니다.

-   Microsoft Systems Management Server(SMS) 2003을 사용하여 패치 관리 프로세스의 네 단계를 모두 구현합니다.

[](#mainsection)[페이지 위쪽](#mainsection)

### 적용 대상

이 모듈은 다음과 같은 제품 및 기술에 적용됩니다.

-   SMS 2003

[](#mainsection)[페이지 위쪽](#mainsection)

### 모듈 사용법

이 모듈에서는 SMS를 사용하여 4단계 패치 관리 프로세스을 구현하는 방법을 자세히 설명합니다.

이 모듈을 최대한 활용하려면 다음을 수행합니다.

<ul>
<li>
"패치 관리 프로세스" 모듈을 읽어 보십시오. 이 모듈에서는 패치 관리 프로세스의 네 단계 각각에 대한 개요와 Windows 운영 체제 환경에서 패치 관리를 지원할 수 있는 도구에 대한 소개를 볼 수 있습니다.
</li>
<li>
4단계 패치 관리 프로세스에 대한 자세한 설명이 나오는 다음 네 개의 모듈을 읽어 보십시오.
</li>
-   "패치 관리 1단계 - 평가” 모듈을 읽어 보십시오.
-   "패치 관리 2단계 - 확인" 모듈을 읽어 보십시오.
-   "패치 관리 3단계 - 평가 및 계획" 모듈을 읽어 보십시오.
-   "패치 관리 4단계 - 배포" 모듈을 읽어 보십시오.

<li>
<http://www.microsoft.com/smserver/techinfo/productdoc/default.asp> 의 "SMS 2003 Concepts, Planning and Deployment Guide"를 읽어 보십시오.
</li>
</ul>
[](#mainsection)[페이지 위쪽](#mainsection)

### 요약

이 모듈에서는 엔터프라이즈 패치 관리를 위해 SMS 2003을 사용하는 것에 대해 설명합니다. 이 모듈에 나오는 설명과 정보는 SMS 2003을 사용하여 Microsoft에서 권장하는 4단계 패치 관리 프로세스을 구현하는 방법을 보여 줍니다.

[](#mainsection)[페이지 위쪽](#mainsection)

### 시작하기 전에

이 모듈을 사용하기 전에 다음을 수행하십시오.

-   <http://www.microsoft.com/smserver/downloads/2003/default.asp> 에서 **SMS 2003 Software Update Scanning Tools를 다운로드합니다**.

[](#mainsection)[페이지 위쪽](#mainsection)

### 알아 둘 사항

이 모듈을 사용하는 경우에는 다음 사항에 유의해야 합니다.

-   보안 업데이트 인벤토리 도구와 Microsoft Office Inventory Tool for Updates는 다운로드 가능한 SMS 2003 Software Update Scanning Tools의 일부이지만 기본적으로 설치되지는 않습니다.
-   SMS 2003 Software Update Scanning Tools를 설치하려면 다음과 같은 최신 파일을 다운로드하기 위해 인터넷에 액세스할 수 있어야 합니다.
    -   Invcm.exe(실행 파일이 포함되어 있음)
    -   Invcif.exe(XML 파일과 모든 Office 업데이트 파일 이름에 대한 정보가 포함되어 있음)
-   SMS 2003 서버에서 인터넷에 액세스할 수 없을 때는 <http://www.microsoft.com/office/ork/2003/journ/offutoolv2.htm> 에서 Invcm.exe와 Invcif.exe를 다운로드하거나 Office 2003 Editions Resource Kit Toolbox에서 이 파일을 받은 다음 사용 중인 서버에 복사합니다.

[](#mainsection)[페이지 위쪽](#mainsection)

### 평가 단계 - 업데이트 검색

SMS 2003의 업데이트 서비스를 사용하여 소프트웨어 업데이트를 프로덕션 환경에 배포하려면 먼저 감사를 수행해야 합니다. 배경 정보를 보려면 "패치 관리 1단계 - 평가" 모듈의 “기존 컴퓨터 자산 검색/인벤토리” 섹션을 참조하십시오.

#### 하드웨어 종류 및 버전 확인

특정 소프트웨어 업데이트가 설치되는 방법을 결정하려면 작업 환경에 있는 컴퓨터의 종류를 알아야 합니다. 예를 들어 서버에 패치를 적용할 경우 비활성 창을 주시해야 할 수도 있습니다. SMS에서는 특정 비활성 창 안에서 패치를 적용해야 하는 서버들이 포함된 컬렉션을 만들 수 있으므로 일반 업무 운영 중에는 소프트웨어 업데이트가 설치되지 않도록 할 수 있습니다. 서버와 그 서버에 적용되는 비활성 창을 나열하는 데이터베이스를 만들 경우 필요한 컬렉션을 자동으로 만드는 프로그램을 만들 수 있습니다. 이 방법에 대한 자세한 내용은 [http://www.microsoft.com/downloads/details.aspx?FamilyId=6150FB42-03D7-400C-92FD-A2FE3BE997D1&displaylang;=en](http://www.microsoft.com/downloads/details.aspx?familyid=6150fb42-03d7-400c-92fd-a2fe3be997d1&displaylang=en) 의 SMS 2003 SDK를 참조하십시오.

기본적으로 SMS 2003 하드웨어 인벤토리 클라이언트 에이전트에서 수집하는 정보를 통해 휴대용 컴퓨터를 다른 종류의 컴퓨터와 구분할 수 있습니다. 그러나 컴퓨터의 종류나 모델을 확실히 확인할 수 있는 단 하나의 특성 또는 특성 컬렉션은 없습니다.

#### 운영 체제, 응용 프로그램 및 미들웨어 확인

프로덕션 환경에 배포되는 모든 운영 체제, SP(서비스 팩) 버전, 소프트웨어 응용 프로그램 및 버전을 알아야 합니다. SMS 2003 하드웨어 인벤토리 클라이언트 에이전트를 사용하여 설치된 모든 응용 프로그램, 서비스 팩 및 Windows 프로그램 추가/제거 프로그램에 등록된 소프트웨어 업데이트에 대한 정보를 수집할 수 있습니다.

프로그램 추가/제거에 등록되지 않은 응용 프로그램의 경우 SMS 2003 소프트웨어 인벤토리 클라이언트 에이전트를 사용하여 클라이언트 컴퓨터에 설치된 모든 실행(.exe) 파일에 대한 세부 정보를 얻어야 합니다. 실제로 설치되어 있는 제품을 확인하기 위해 이 인벤토리를 분석하는 데는 추가 작업이 필요합니다. 사용자의 개별 요구 사항이 다를 수 있더라도 일반적으로 프로덕션 환경의 모든 컴퓨터에 대해 소프트웨어 인벤토리가 매주 실행되도록 구성되어야 합니다.

일부 응용 프로그램의 경우 가장 적합한 소프트웨어 업데이트를 선택하기 위해 SMS 2003 소프트웨어 인벤토리 클라이언트 에이전트에 의해 수집된 정보를 확장하여 설치된 소프트웨어 응용 프로그램의 버전에 대해 더욱 자세한 사항을 알 수 있습니다. 예를 들면 표준 인벤토리 과정을 통해 Iexplore.exe 파일에 대해 SMS에서 수집한 정보를 단순히 검토하는 작업보다 Internet Explorer의 인벤토리를 실행하는 작업을 더 많이 수행합니다. Internet Explorer 버전 정보를 정확하게 검색하는 유일한 방법은 SMS에서 Internet Explorer 데이터가 있는 컴퓨터의 레지스트리 키 인벤토리를 실행하도록 만드는 것입니다. 레지스트리 키에는 SMS에서 설치된 소프트웨어 업데이트와 서비스 팩의 인벤토리를 실행할 때 사용할 수 있는 정보가 있습니다. SMS에서 레지스트리 키의 인벤토리를 실행할 수 있도록 하려면 레지스트리 액세스 권한을 SMS에 부여하는 약간의 코드인 레지스트리 공급자를 포함하도록 SMS\_def.mof 파일을 수정해야 합니다.

다음은 인벤토리 레지스트리에 대한 수정 내용을 보여 주는 예제 SMS_def.mof 파일입니다. 

```
                //------------------------------------------------------
                  // 응용 프로그램 모드로 TS를 실행하는 서버 확인
                  // 터미널 서비스 레지스트리에서 TSEnabled 가져옴
                  // 터미널 서비스 레지스트리에서 TSAppCompat 가져옴
                  //------------------------------------------------------

                  #pragma namespace (“\\\\.\\root\\cimv2”)
                  // TS 사용 및 TS 응용 프로그램 모드 설정
                  [DYNPROPS]
                  class TSAPPMode
                  {
                  [key]
                  string keyname=””;
                  string TSEnabled;
                  string TSAppCompat;
                  };
                  [DYNPROPS]
                  instance of TSAPPMode
                  {
                  keyname=”TSAPPMode”;
                  [PropertyContext(“local|HKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\Control\\
                  Terminal Server|TSEnabled”),Dynamic, Provider(“RegPropProv”)]
                  TSEnabled;
                  [PropertyContext(“local|HKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\Control\\
                  Terminal Server|TSAppCompat”),Dynamic, Provider(“RegPropProv”)]
                  TSAppCompat;

                  };
                  #pragma namespace (“\\\\.\\root\\cimv2\\sms”)
                  [
                  SMS_Report(TRUE),
                  SMS_Group_Name(“TS Application Mode”),
                  SMS_Class_ID(“MICROSOFT|TSAPPMode|1.0”)
                  ]
                  class TSAPPMode : SMS_Class_Template
                  {
                  [SMS_Report(TRUE),key]
                  string keyname;
                  [SMS_Report(TRUE)]
                  string TSEnabled;
                  [SMS_Report(TRUE)]
                  string TSAppCompat;
                  };
```

#### 역할 확인

컴퓨터의 역할을 알면 소프트웨어 업데이트가 배포된 후 컴퓨터를 다시 시작해야만 적용되는 사항들을 보다 잘 파악할 수 있습니다. SMS 2003 하드웨어 인벤토리 클라이언트 에이전트에서 수집한 정보를 통해 기본적으로 컴퓨터에서 실행되는 서비스를 확인할 수 있습니다. 그러나 위에 나오는 것처럼 레지스트리에서 추가 정보를 수집하려면 SMS\_def.mof 파일을 수정해야 할 수도 있습니다.

#### 연결 이해

소프트웨어 업데이트는 크기가 여러 가지일 수 있으므로 사용 중인 네트워크 인프라의 제약 조건을 알면 그러한 업데이트를 배포할 때 이루어지는 모든 지연을 줄일 수 있습니다. Microsoft SMS Network Discovery를 사용하여 네트워크 토폴로지 및 네트워크에 연결된 장치에 대한 정보를 제공할 수 있습니다. 자세한 내용은 <http://www.microsoft.com/smserver/techinfo/productdoc/default.asp> 에서 다운로드할 수 있는 제품 설명서를 참조하십시오.

#### 필요한 소프트웨어 업데이트 확인

관리자는 SMS 2003의 소프트웨어 업데이트 관리 기능에 제공된 보안 업데이트 인벤토리 도구를 사용하여 SMS 하드웨어 인벤토리를 그림 1에 나오는 것처럼 클라이언트 집합에 설치해야

![](images/Dd547993.SGFG19901(ko-kr,TechNet.10).jpg)

설치해야 하는 소프트웨어 업데이트 보고서로 확장할 수 있습니다
그림 1
SMS 데이터베이스에 보안 업데이트 정보 추가

SMS 2003 클라이언트는 Microsoft Update 웹 사이트에서 다운로드한 XML 파일에 포함된 사용 가능한 소프트웨어 업데이트 목록과 설치되어 있는 항목을 비교합니다.

보안 업데이트 인벤토리 도구의 설치 과정에서도 Microsoft 업데이트 웹 사이트에서 최신 소프트웨어 업데이트 카탈로그 파일(Mssecure.cab)을 다운로드하는 되풀이 보급 알림(7일마다 실행)이 만들어집니다. 다운로드가 완료되면 사이트 서버는 모든 클라이언트 시스템 컬렉션을 대상으로 하는 새 보급 알림을 자동으로 만듭니다. 이 보급 알림은 최신 소프트웨어 업데이트 카탈로그 파일을 사용하여 보안 업데이트 인벤토리 도구를 실행합니다.

**참고:** SMS 2003 보안 업데이트 인벤토리 도구는 누락된 서비스 팩에 대해 보고하지 않습니다. 현재 설치되어 있는 서비스 팩을 검색하려면 SMS 하드웨어 및 소프트웨어 인벤토리 클라이언트 에이전트를 사용해야 합니다. 이 시점부터는 조직의 기준선을 최신 서비스 팩과 패치로 설정하는 것이 항상 좋습니다. 또한 보안 패치 보고서는 현재 서비스 팩 수정 버전만을 기준으로 합니다. 예를 들어 현재 서비스 팩이 SP2일 경우 SP1에 관련된 소프트웨어 업데이트는 보고서에 표시되지 않습니다.

#### 필요한 Office 소프트웨어 업데이트 확인

SMS 2003의 소프트웨어 업데이트 관리 기능에는 관리자가 SMS 하드웨어 인벤토리를 Office를 최신 상태로 유지하는 데 필요한 소프트웨어 업데이트 보고서로 확장할 때 사용할 수 있는 Microsoft Office Inventory Tool for Updates가 들어 있습니다. 그림 2에 나오는 것처럼 클라이언트 컴퓨터는 앞에서 설명한 보안 업데이트 인벤토리 도구의 경우와 비슷한 과정으로 최신 Office 업데이트 데이터베이스 파일(invcif.exe) 내용과 설치되어 있는 항목을 비교합니다

![](images/Dd547993.SGFG19902(ko-kr,TechNet.10).jpg)

그림 2
SMS 데이터베이스에 Office 업데이트 정보 추가

**참고:** Office 업데이트 인벤토리 도구는 Office 업데이트 데이터베이스(invcif.exe)와 함께 Office 업데이트 도구를 통해 클라이언트 컴퓨터를 분석하여 적합한 Office 업데이트를 조사합니다. Office 업데이트 도구에 의해 수집된 데이터는 SMS 사이트 데이터베이스와 호환되는 형식으로 변환됩니다. Office 업데이트 동기화 도구는 이 도구의 최신 버전을 정기적으로 자동 다운로드하여 SMS 배포 지점을 통해 엔터프라이즈의 컴퓨터에 배포합니다.
Microsoft Office Update Tool에 대한 자세한 내용은 <http://support.microsoft.com/?kbid=312982> 를 참조하십시오.

#### 인벤토리 확인/감사

패치 관리를 위해서는 작업 환경에 있는 항목에 대한 정확한 최신 정보가 필수적입니다. 관리자가 SMS 데이터베이스에 저장된 정보를 사용하여 패치 관리 작업을 지원하려면 감사가 수행되었는지를 먼저 확인해야 합니다.

감사가 제대로 수행되었는지 확인하기 위한 첫 번째 단계는 Microsoft Office Inventory Tool for Updates와 SMS 2003의 보안 업데이트 인벤토리 도구가 모두 성공적으로 실행되었는지를 확인하는 것입니다. 그러기 위해서는 SMS 관리자가 보급 알림 상태 메시지를 검사하여 오류가 있었는지 여부를 확인해야 합니다. 업데이트 인벤토리 도구를 실행하지 않은 SMS 클라이언트 컴퓨터는 문제 해결 부서에 보고되어야 합니다.

검색 도구가 실행된 것을 확인했으면 관리자는 각 SMS 클라이언트에서 하드웨어 및 소프트웨어 인벤토리 상태를 확인해야 합니다. 그러므로 하드웨어 및 소프트웨어 인벤토리 클라이언트 에이전트가 설치하지 못했거나 지정한 시간(데이터 센터 부류의 컴퓨터는 매일, 그 밖의 모든 경우는 매주) 내에 실행하지 못한 SMS 클라이언트 컴퓨터를 나열하는 웹 보고서를 만들어야 합니다. 예를 들어 SMS 2003의 소프트웨어 업데이트-인프라 상태 범주에서 지정한 보급 알림 보고서에 대해 소프트웨어 업데이트 오류 메시지를 반환한 컴퓨터를 사용할 수 있습니다. 이 보고서에 나타나는 모든 컴퓨터는 문제 해결 부서에 보고되어야 합니다.

누락된 업데이트에 대한 검색이 완료된 경우 "긴급" 버전의 검색 도구에 대한 보급 알림을 만들면 하드웨어 인벤토리가 강제로 실행되도록 할 수 있습니다. 기본적으로 이러한 도구를 통해 얻은 정보는 예약된 다음 하드웨어 인벤토리 주기에 SMS 사이트 서버로 보고됩니다.

[](#mainsection)[페이지 위쪽](#mainsection)

### 평가 단계 - SMS 인프라 디자인

효과적인 패치 관리 프로세스에서 중요한 부분은 효과적인 소프트웨어 배포 인프라입니다. 배경 정보를 보려면 "패치 관리 1단계 - 평가” 모듈의 “기존 소프트웨어 배포 인프라 평가”를 참조하십시오. SMS 인프라가 제대로 유지 관리되는지 여부를 평가하려면 [http://www.microsoft.com/downloads/details.aspx?FamilyId=BD2B3619?4704?4C19?A00B?628E65F6F826&displaylang;=en](http://www.microsoft.com/downloads/details.aspx?familyid=bd2b3619-4704-4c19-a00b-628e65f6f826&displaylang=en) 에서 다운로드할 수 있는 Systems Management Server 2003 Operations Guide를 참조하십시오.

SMS 2003 디자인 고려 사항에 대한 자세한 내용은 <http://www.microsoft.com/korea/business/reducecosts/efficiency/manageability/default.mspx>에서 Microsoft Solutions for Management(MSM) Management Architecture Guide를 참조하십시오.

SMS 사이트 서버는 많은 클라이언트 집단이 있는 위치 또는 네트워크 대역폭을 관리하거나 제어해야 하는 위치에 배치되어야 합니다. 기본이 되는 네트워크 아키텍처를 반영하거나 위임된 관리를 허용할 수 있도록 계층 구조의 수준이 깊어야(많은 계층으로 구성됨) 할 수도 있습니다.

업무용 서버의 경우 소프트웨어 업데이트를 배포하는 데 필요한 시간을 줄이는 것이 중요합니다. 이 목표를 이루기 위해서는 그림 3에 나오는 것처럼 flatter와 응답성이 더 좋은 SMS 구조가
![](images/Dd547993.SGFG19903(ko-kr,TechNet.10).jpg)

구조가 필요합니다.
그림 3
패치 관리를 지원하도록 SMS 계층 구조 디자인

이 구조를 만들려면 관리자가 업무용 서버가 있는 위치에 새로운 SMS 사이트 서버를 도입해야 하며 이러한 컴퓨터가 새 SMS 사이트 서버의 클라이언트가 되도록 해야 합니다.

-   위치에 따라 워크스테이션 클라이언트를 지원하는 경우와 업무용 컴퓨터를 지원하는 경우 등 두 가지의 SMS 사이트 서버가 있을 수 있습니다. 컴퓨터의 IP(인터넷 프로토콜) 서브넷이 특정 사이트에 의해 관리되는 IP 서브넷과 일치하는 경우에만 해당 컴퓨터가 SMS 사이트의 클라이언트가 됩니다.
-   업무용 서버를 지원하는 SMS 사이트 서버에 대해 신속한 응답 시간을 보장하기 위해서는 관리자가 사이트 간 보낸 사람에게 어떠한 대역폭 제한도 두어서는 안 되며 사이트 간 통신이 하루 중 언제든 이루어질 수 있도록 허용해야 합니다.

일상적인 업무 과정에서는 관리 기능이 계층 구조의 최상위 서버에서 계속해서 수행되어야 합니다. 조직에서 데이터 센터 서버의 중요한 보안 문제를 해결하는 소프트웨어 업데이트를 배포해야 할 경우 관리자는 업무용 컴퓨터를 담당하는 SMS 사이트 서버에서 SMS 패키지와 보급 알림을 만들어야 합니다. 보급 알림은 이러한 컴퓨터에 도달하기 위해 여러 수준의 SMS 계층 구조를 통과하지 않아도 되고 또한 SMS 사이트 간에 대역폭 제한도 없으므로 소프트웨어 업데이트를 설치하는 데 필요한 시간은 상당히 줄어듭니다.

[](#mainsection)[페이지 위쪽](#mainsection)

### 확인 단계 - 알림 받기

작업 환경을 평가한 후 그 다음 단계에는 문제 확인과 사용할 수 있는 업데이트에 대한 정보 얻기가 포함됩니다. 배경 정보를 보려면 "패치 관리 2단계 - 확인" 모듈의 “새 소프트웨어 업데이트 검색” 섹션을 참조하십시오.

#### Microsoft Security Notification Service

가장 일반적인 패치 알림의 형태는 전자 메일을 통한 알림입니다. 전자 메일 알림을 위해서는 <http://www.microsoft.com/technet/security/bulletin/notify.asp> 의 Microsoft Security Notification Service에 가입할 수 있습니다.

[](#mainsection)[페이지 위쪽](#mainsection)

### 확인 단계 - 알림 처리

알림을 받았으면 사용할 수 있게 된 소프트웨어 업데이트와 SMS 소프트웨어 업데이트 서비스에서 알림을 처리하는 데 필요한 항목을 확인해야 합니다. 배경 정보를 보려면 "패치 관리 2단계 - 확인" 모듈의 “새 소프트웨어 업데이트 검색” 섹션을 참조하십시오.

#### SMS 소프트웨어 업데이트 관리

새 전자 메일 알림을 받으면 먼저 SMS 2003 내의 소프트웨어 업데이트 관리 도구에서 해당 소프트웨어 업데이트가 프로덕션 환경 내의 시스템에 적용되는지 여부를 검색할 수 있는지 확인해야 합니다.

-   **소프트웨어 업데이트의 적용 가능 여부 확인**
    1.  이 확인을 할 때 수행할 첫 번째 단계는 <http://support.microsoft.com/default.aspx?scid=kb;ko-kr;306460>의 기술 자료 문서 306460 "Microsoft Baseline Security Analyzer returns note messages for some updates"를 읽어 보고 소프트웨어 업데이트가 MBSA에 의해 설치 중 또는 누락됨으로 검색될 수 있는지 여부를 확인하는 것입니다. 여기에 대해서는 기술 자료 문서에서 설명합니다.
    2.  제품이 지원되는 목록에 포함되어 있으면 MBSA에 의해 소프트웨어 업데이트 자체가 검색될 수 있는지 확인해야 합니다. 여기에 대해서는 기술 자료 문서 306460에서도 설명합니다.
    3.  소프트웨어 업데이트가 MBSA에 의해 지원되지 않는 제품에 적용되는 경우 또는 MBSA에 의해 검색될 수 없는 경우에는 SMS 2003 하드웨어 인벤토리 클라이언트 에이전트와 SMS 2003 소프트웨어 인벤토리 클라이언트 에이전트에서 수집된 정보를 사용하여 소프트웨어 업데이트를 적용할 컴퓨터를 결정해야 합니다.
    4.  소프트웨어 업데이트가 MBSA에 의해 검색될 수 있으면 SMS 2003의 소프트웨어 업데이트 관리 도구를 사용하여 소프트웨어 업데이트가 적용될 컴퓨터를 확인할 수 있습니다.
    5.  소프트웨어 업데이트가 Microsoft Office 응용 프로그램용이면 해당 소프트웨어 업데이트가 Microsoft Office Inventory Tool for Updates에서 제공한 업데이트 목록에 있는지 확인해야 합니다. 소프트웨어 업데이트가 이 목록에 포함되어 있으면 소프트웨어 업데이트 관리 도구를 사용하여 해당 소프트웨어 업데이트가 적용될 컴퓨터를 확인할 수 있습니다. 그렇지 않은 경우 SMS 2003 소프트웨어 및 하드웨어 인벤토리 클라이언트 에이전트를 사용하여 검색된 정보를 기준으로 보고서를 만들어야 합니다.

그림 4는 바로 앞에서 설명한 과정에 대한 결정 트리 순서도를 보여 줍니다

![](images/Dd547993.SGFG19904(ko-kr,TechNet.10).jpg)

MBSA 1.1을 사용하여 새 소프트웨어 업데이트를 확인하기 위한 결정 트리 순서도

[](#mainsection)[페이지 위쪽](#mainsection)

### 확인 단계 - 보안 문제 검색 도구

작업 환경에서 누락되거나 적용된 소프트웨어 업데이트를 검색하고 보고하는 데 SMS 2003에 있는 소프트웨어 업데이트 관리 기능의 구성 요소를 사용할 수 있습니다. 배경 정보를 보려면 "패치 관리 2단계 - 확인" 모듈의 “원본과 알림의 신뢰 가능 여부를 아는 방법” 섹션을 참조하십시오.

소프트웨어 업데이트 관리 기능은 다음 구성 요소로 이루어집니다.

-   소프트웨어 업데이트 인벤토리 도구
-   Distribute Software Updates Wizard
-   소프트웨어 업데이트 설치 에이전트
-   보고서

위에 나온 네 가지 구성 요소 중에서 소프트웨어 업데이트 인벤토리 도구와 SMS 2003 보고서를 사용하면 설치된 소프트웨어 업데이트와 누락된 소프트웨어 업데이트를 검색하고 보고할 수 있습니다.

소프트웨어 업데이트 인벤토리 도구는 다음과 같습니다.

-   보안 업데이트 인벤토리 도구(Microsoft 운영 체제, Internet Explorer, SQL Server, Exchange 등의 보안 업데이트를 처리함)
-   Microsoft Office Inventory Tool for Updates(Microsoft Office의 소프트웨어 업데이트를 처리함)

이 두 도구는 서로 종속되지 않습니다. 둘 중 하나 또는 모두를 사용할 수 있습니다.

**참고:** 소프트웨어 업데이트 인벤토리 도구는 SMS 사이트에 기본적으로 설치되지 않습니다. 그러므로 <http://www.microsoft.com/smserver/downloads> 에서 다운로드해야 합니다.

보안 업데이트 인벤토리 도구와 Microsoft Office Inventory Tool for Updates에 의해 제공되는 인벤토리 데이터는 SMS 클라이언트의 호환 수준에 대해 중앙의 위치에 있는 자세한 정보를 제공합니다. 이 정보에는 다음과 같은 내용이 포함됩니다.

-   현재 설치되어 있는 업데이트와 서비스 팩 목록
-   사용 및 적용 가능한 소프트웨어 업데이트
-   업데이트를 게시한 날짜와 시간
-   업데이트가 설치된 날짜와 시간(해당되는 경우)

뿐만 아니라 소프트웨어 업데이트 인벤토리 데이터에는 해당 업데이트 관련 Microsoft 기술 자료 문서에 대한 링크도 들어 있습니다. 따라서 조직의 이러한 업데이트에 대한 필요성을 평가하는 데 도움이 되는 관련 정보에 액세스할 수 있습니다.

각 소프트웨어 업데이트 인벤토리 도구에는 해당 도구를 설치하는 설치 관리자가 있습니다.

**참고:** SMS 2003을 사용하여 다양한 소프트웨어 업데이트 작업을 수행하는 방법에 대한 단계별 설명과 함께 SMS 2003 소프트웨어 업데이트 관리 기능에 대한 자세한 기술 정보를 보려면 <http://www.microsoft.com/korea/smserver/default.asp>에서 다운로드할 수 있는 SMS 2003 Operations Guide의 Chapter 6 "Managing Software Updates"와 SMS 2003 Concepts and Planning Guide의 Chapter 3 "Understanding SMS Features"를 참조하십시오.

소프트웨어 업데이트 인벤토리 도구를 실행하면 SMS 관리자 콘솔과 많은 웹 보고서에 정보가 생성됩니다. 콘솔 기반 검색 결과에 대한 예는 그림 5에 나와 있습니다
![](images/Dd547993.SGFG19905(ko-kr,TechNet.10).jpg)

다
그림 5
SMS 관리자 콘솔을 사용하여 누락된 소프트웨어 업데이트 및 관련 게시판 ID 번호 확인

Microsoft는 소프트웨어 업데이트에 대한 정보를 카탈로그(Mssecure.xml)와 웹 다운로드 형태로 릴리스합니다. 새 보안 업데이트가 릴리스됨에 따라 Security Patch Bulletin Catalog와 Microsoft Office Update Catalog가 정기적으로 업데이트됩니다.

SMS 2003의 소프트웨어 업데이트 관리 기능의 경우 클라이언트를 평가하는 데 이러한 카탈로그를 참조로 사용합니다. 소프트웨어 업데이트 관리 도구는 엔터프라이즈의 모든 SMS 클라이언트 컴퓨터에 설치된 업데이트 및 적용될 수 있는 업데이트에 대한 세부 인벤토리를 수행합니다. 소프트웨어 업데이트 인벤토리 도구는 클라이언트를 검색하여 클라이언트를 최신 상태로 만드는 데 필요한 업데이트를 확인한 다음 관리자가 **Distribute Software Updates Wizard를** 사용하여 필요한 업데이트를 배포합니다.

SMS 2003에는 조직 전체에서 누락된 소프트웨어 업데이트에 대해 미리 정의된 몇 개의 업데이트 관련 보고서가 들어 있습니다. 보고서에는 그러한 정보가 적용 가능한 소프트웨어 업데이트 및 설치 상태로 표시됩니다.

예를 들어 SMS 2003의 Software updates with count of applicable and installed computers 보고서를 사용하여 설치되었거나 적용 가능한 모든 소프트웨어 업데이트 목록을 그에 대한 정보와 함께 표시할 수 있습니다. 이 보고서에는 그림 6에 나오는 것처럼 각 소프트웨어 업데이트가 누락된 컴퓨터 수와 소프트웨어 업데이트가 이미 설치되어 있는 대상 컴
![](images/Dd547993.SGFG19906(ko-kr,TechNet.10).jpg)

컴퓨터 수도 나열됩니다.  
그림 6  
적용 가능한 컴퓨터 및 설치된 컴퓨터 수와 함께 소프트웨어 업데이트를 표시하는 SMS 2003의 웹 보고서

다음 예제 SQL 쿼리를 사용하여 지난 7일 동안 해당 환경에서 보고된 새 소프트웨어 업데이트를 확인할 수도 있습니다.

```
                  select  QNumbers0 as Knowledgebase,
                  ID0 as Bulletin,
                  Product0 as ‘Affected Product’,
                  Title0 as ‘Vulnerability’,
                  MAX(DatePosted0) as ‘Release Date’,
                  MAX(DateRevised0) as Revised,
                  MIN(TimeDetected0) as ‘First Detected on Clients’
                  from v_gs_patchstate
                  where (TimeDetected0 >= DATEADD(day,-7,getdate())
                  or DatePosted0 >= DATEADD(day,-7,getdate())
                  or DateRevised0 >= DATEADD(day,-7,getdate()))
                  and Status0 != ‘Installed’
                  group by QNumbers0, ID0, Product0, Title0
```

[](#mainsection)[페이지 위쪽](#mainsection)

### 확인 단계 - 소프트웨어 업데이트의 관련 여부 확인

수신된 모든 소프트웨어 업데이트에 대해 작업 환경과의 연관성을 확인해야 합니다. 배경 정보를 보려면 "패치 관리 2단계 - 확인" 모듈의 “소프트웨어 업데이트의 관련 여부 확인” 섹션을 참조하십시오.

소프트웨어 업데이트가 IT 인프라에 적용될 수 있는지 여부를 확인할 때 사용할 수 있는 주요 선별 방법은 다음과 같습니다.

-   **보안 게시판 및 기술 자료 문서 읽기**
-   **개별 소프트웨어 업데이트 검토**
-   **SMS 관리자 콘솔 사용**
-   **SMS 기본 제공 보고서 사용**

**보안 게시판 및 기술 자료 문서 읽기**

보안 문제의 영향을 받기가 쉬운 컴퓨터를 작업 환경에서 격리하려면 관련 보안 게시판에 나열된 영향 받는 제품을 검토하고 SMS에서 사용할 수 있는 인벤토리 데이터에 액세스합니다.

예를 들어 SMS 2003에는 다음 제품에 대한 기본 컬렉션이 제공됩니다.

-   Microsoft Windows 2000 Professional
-   Windows 2000 Server
-   Windows XP
-   Windows 98
-   Windows NT 4.0
-   Windows Server™ 2003

#### 개별 소프트웨어 업데이트 검토

알림의 각 소프트웨어 업데이트는 아주 자세히 검토해야 합니다. 예를 들어 업데이트가 특정 시나리오나 구성에만 해당되는 것일 수 있습니다. 프로덕션 환경의 시나리오나 구성이 기술 자료 문서의 해당 내용과 일치하는지 확인해야 합니다. 이 정보를 받기 위해서는 SMS 쿼리와 웹 보고서를 작성해야 할 수도 있습니다.

예를 들어 메모리가 3GB를 넘고 SQL Server를 실행하는 컴퓨터에만 소프트웨어 업데이트가 필요하다고 기술 자료 문서에 설명되어 있으면 SQL Server를 실행하는 작업 환경의 모든 컴퓨터가 이 구성을 갖는지 확인하는 쿼리나 웹 보고서를 만들어야 합니다. 그러나 어떤 증상이라도 나타나기 전에 예방 차원에서 보안 업데이트를 적용해야 할 수도 있습니다.

#### SMS 소프트웨어 업데이트 관리 기능 사용

SMS 2003 소프트웨어 업데이트 관리 기능을 통해 생성된 보고서와 검색 결과를 사용하여 소프트웨어 업데이트에 관한 해당 정보를 볼 수 있습니다. 그림 7은 Exchange Server 2000과 관련하여 중요한 보안 패치를 보여 줍니다. Requested 열 아래의 값은 이 업데이트를 요청한 컴퓨터 수를 나타내고 Compliant 열 아래의 값은 업데이트를 이미 설치하여 호환되는 컴퓨터 수를 나타냅니다. 그림 7에서는 오직 한 컴퓨터만 Exchange Server 2000 업데이트를 요청했습니다

![](images/Dd547993.SGFG19907(ko-kr,TechNet.10).jpg)

그림 7
SMS 관리자 콘솔을 사용하여 작업 환경에 대한 소프트웨어 업데이트의 관련 여부 확인

#### SMS 보고서 사용

SMS 2003의 Compliance by Software ID 보고서는 보안 패치가 설치된 컴퓨터(및 보안 패치가 설치되지 않은 컴퓨터)의 전체 개수에 대한 요약을 보안 패치 배포에 관한 상태와 함께 보여 줍니다. 이 보고서는 그림 8에 나오는 것처럼 특정 보안 업데이트(여기서는 311967)의 현재 호환 수준을 확인하는 데 도움이 되며 특정 보안 업데이트를 작업 환경에 적용할 수

![](images/Dd547993.SGFG19908(ko-kr,TechNet.10).jpg)

있는지 여부를 확인하는 데도 유용한 도구가 됩니다.
그림 8
SMS 2003의 Compliance by Software ID 보고서

**참고:** SMS 2003에 있는 보고서는 이러한 각 보고서에 포함된 SQL 쿼리를 보기만 할 뿐 아니라 쿼리를 수정하여 보고서를 사용자 지정할 수도 있다는 점에서 유용한 기능입니다. 또한 이 기능을 통해 보고서를 1?60분마다 자동으로 새로 고칠 수 있는데 이것은 계속적으로 주시하며 상태를 업데이트하고 소프트웨어 업데이트 배포와 특정 소프트웨어 업데이트의 호환 수준을 보고하는 응급 상황에서 특히 유용합니다. 이 기능을 사용하려면 특정 보고서를 강조 표시하고 그 속성을 보기만 하면 됩니다.

[](#mainsection)[페이지 위쪽](#mainsection)

### 평가 및 계획 단계 - 패치를 적용할 항목 결정

패치를 적용해야 할 항목을 결정하려면 작업 환경에 있는 항목들을 정확하게 알아야 합니다. 배경 정보를 보려면 "패치 관리 3단계 - 평가 및 계획" 모듈의 “릴리스 계획” 섹션을 참조하십시오.

보안 업데이트 인벤토리 도구와 Microsoft Office Inventory Tool for Updates에 의해 검색된 정보를 SMS 하드웨어 및 소프트웨어 인벤토리 클라이언트 에이전트에 의해 검색된 정보와 함께 사용하여 특정 소프트웨어 업데이트를 설치해야 하는 컴퓨터를 결정할 수 있습니다. 패치를 적용할 컴퓨터의 종류와 역할 및 네트워크 연결을 확인하는 것도 중요합니다.

[](#mainsection)[페이지 위쪽](#mainsection)

### 평가 및 계획 단계 - 응급 변경 요청 배포

중요한 업데이트의 경우 위험에 처한 시스템의 수와 유형을 되도록 정확하게 확인해야 합니다. 배경 정보를 보려면 "패치 관리 3단계 - 평가 및 계획" 모듈의 “릴리스 계획” 섹션을 참조하십시오.

정기적으로 예약된 인벤토리 주기 이전에 인벤토리 데이터를 얻으려면 SMS 관리자가 필수 보급 알림을 만들어 보안 문제에 노출되는 것으로 파악된 각 클라이언트 컴퓨터에서 하드웨어 및 소프트웨어 인벤토리를 실행시키는 보안 업데이트 인벤토리 도구 또는 Microsoft Office Inventory Tool for Updates를 실행해야 합니다.

-   SMS 2003 사이트 서버에 패치를 적용해야 할 경우에는 프로덕션 환경 내의 다른 컴퓨터로 소프트웨어 업데이트가 롤아웃되는 동안 이 서버가 다시 시작되지 않도록 이 컴퓨터에 수동으로 패치를 적용하는 것을 고려해야 합니다.
-   네트워크 연결이 좋지 않은 사이트의 경우 소프트웨어 업데이트 파일을 이동식 미디어에 배치하기 위한 SMS Courier Sender 사용과 이 미디어를 해당 사이트로 최대한 신속하게 전송하기 위한 계획을 세워야 할 수 있습니다.

다음 과정은 **Distribute Software Updates Wizard를** 사용하여 소프트웨어 업데이트를 배포하고 업무용 서버에서 업데이트가 자동으로 설치되도록 하기 위해 수행할 단계를 보여 줍니다. 워크스테이션에 적용되는 소프트웨어 업데이트에도 비슷한 과정을 수행할 수 있습니다.

**참고:** 이 과정은 소프트웨어 업데이트 파일과 업데이트된 소프트웨어 배포 정책을 클라이언트 서버가 사용할 수 있도록 하는 데 충분한 네트워크 대역폭을 사용할 수 있는 업무 위치에서만 가능합니다.

-   **Distribute Software Updates Wizard를** 사용하여 소프트웨어 업데이트를 배포하고 업무용 서버에서 설치되도록 하려면 다음을 수행합니다.
    1.  제어판에 있는 보급 알림 프로그램 관리자 도구 또는 Run Available Programs에서 SyncXML.exe 프로그램을 실행합니다. 이 작업은 동기화 작업을 호스팅하는 컴퓨터에서 수행되어야 합니다(처음에는 검색 도구 설치로 만들어져 SMS 사이트 서버 컴퓨터가 됨). 이렇게 하면 새로 릴리스된 카탈로그를 로컬로 사용할 수 있습니다.
    2.  이 패키지의 배포 지점을 수동으로 새로 고쳐 새 카탈로그를 작업 환경의 다른 배포 지점과 다른 사이트에 맞도록 유지합니다. 모든 배포 지점의 업데이트가 완료되었는지 확인합니다.

        새로 고칠 배포 지점은 모든 레거시 또는 SMS 2.0 클라이언트에 필요합니다. 새 프로그램 항목은 필요한 새 패키지 버전이 반영되는 정책을 갖게 되므로 필요할 경우 고급 클라이언트는 자동으로 콘텐트 대기 중 상태가 됩니다.

    3.  기존 검색 도구 패키지 안에 프로그램의 "긴급" 형식(명령줄에 "/s /cache /kick"이 포함됨)에 맞는 새 프로그램 항목을 만듭니다.
        이 프로그램은 프로덕션 전 컬렉션 구성원이 다음 검색 주기에 최신 버전의 카탈로그를 준수하는지 확인하는 데 사용됩니다.

    4.  사용하기 쉽도록 새 소프트웨어 업데이트와 관련된 특정 게시판 ID나 기술 자료 문서 번호를 따서 이 새 프로그램 이름을 지정합니다(예: "긴급 MS03-039").
    5.  새 "긴급" 검색 도구 프로그램을 참조 컴퓨터 컬렉션에 보급합니다.
        새 프로그램이므로 프로덕션 전 컴퓨터는 새 카탈로그가 포함된 관련 패키지 버전을 다운로드하게 됩니다.

    6.  기존 검색 도구 패키지 안에 프로그램의 일반 형식(명령줄에 "/s /cache"이 포함됨)에 맞는 두 번째 새 프로그램 항목을 만듭니다.
    7.  사용하기 쉽도록 새 소프트웨어 업데이트와 관련된 특정 게시판 ID나 기술 자료 문서 번호를 따서 이 새 프로그램 이름을 지정합니다(예: "일반 MS03039").
    8.  **Distribute Software Updates Wizard를** 사용하여 특별히 해당 소프트웨어 업데이트를 위한 새 패키지를 만듭니다. 클라이언트 인벤토리가 처리되는 동안 필요에 따라 새로 고침 단추를 사용하여 사용 가능한 모든 프로덕션 전 컴퓨터 인벤토리가 사용되는지 확인합니다. 프로덕션 전 컬렉션을 기준으로 소프트웨어 업데이트를 인증합니다. 프로덕션 시스템을 검색하는 동안에는 패키지를 준비할 시간이 있습니다.
        -   예약된 하드웨어 인벤토리 클라이언트 에이전트 일정보다 먼저 사이트 서버에 인벤토리 데이터를 보내려면 **Distribute Software Updates Wizard의** 첫 번째 클라이언트 에이전트 설정 페이지에서 Collect client inventory immediately (may increase system activity) 확인란을 선택합니다.
        -   소프트웨어 업데이트를 표준 시간대별로가 아닌 전세계적으로 일제히 적용하려면 협정 세계 표준시(UTC)를 사용하는지 확인합니다. 이 설정은 소프트웨어별 업데이트 설정입니다.
        -   마법사의 해당 페이지에서 새 프로그램이 아닌 기존 검색 도구 패키지와 프로그램을 지정해야 합니다.
        -   **Distribute Software Updates Wizard의** 이 시점에서는 보급을 하지 않습니다.
        -   새 패키지를 사용하면 관리 중인 다른 소프트웨어 업데이트가 현재 작업보다 덜 중요한 것으로 정의되기 때문에 다운로드 및 실행 단계가 최대한 빨리 수행됩니다.
    9.  **Distribute Software Updates Wizard가** 종료되면 새 Distribute Software Updates Wizard 프로그램의 속성 페이지를 열고 새로 빌드된 일반 프로그램에 대한 프로그램 종속성을 포함합니다.

        프로그램 종속성으로 인해 클라이언트는 해당 소프트웨어 업데이트의 설치를 시도하기 전에 새 카탈로그가 있는 검색 도구 패키지 버전을 실행하게 됩니다. 따라서 에이전트에서 인벤토리를 로컬로 처음 새로 고치려고 하면 프로그램 종속성이 강제로 실행되기 때문에 그로 인해 최신 카탈로그가 클라이언트에 캐시됩니다. 종속 프로그램에는 자체 보급 알림이 없으므로 **Distribute Software Updates Wizard** 프로그램 보급 알림의 다운로드 및 실행 구성이 종속 프로그램에 자동으로 유지됩니다.

    10. **Distribute Software Updates Wizard** 프로그램에 대한 새 보급 알림을 만들고 다운로드 및 실행용으로 설정합니다.
        -   모든 작업이 표준 시간대에 따라서가 아니라 동시에 일어나도록 하려는 경우 협정 세계 표준시(UTC)의 사용을 확인합니다. 일반적으로 협정 세계 표준시(UTC) 옵션을 소프트웨어 업데이트 "Authorized on" 설정에 사용하는 경우에는 보급 알림이 이 옵션을 포함합니다.
        -   보급 알림 시작 시간은 첫 번째 필수 지정 시간보다 이전이어야 합니다. 이 경우 고급 클라이언트가 먼저 다운로드할 수 있으며 서비스 창에 도달하면 시작할 준비가 될 수 있습니다. 서비스 창을 사용할 경우 이 사항이 더욱 중요합니다.
        -   변경 창마다 필요한 대로 이 작업을 반복합니다(제한된 설치 시간).
    11. "소프트웨어 업데이트 - 배포 상태”에서 사용할 수 있는 보고서를 통해 새로 만든 패키지 배포를 모니터링하여 상태와 호환을 검사합니다.
        일반적으로 조사에는 두 가지 단계가 포함됩니다. 1단계는 소프트웨어 배포 성공(보급 알림 성공)에 초점을 맞추고 2단계는 배포 상태에 초점을 맞춥니다.

        -   **소프트웨어 업데이트 ID별 소프트웨어 업데이트 배포 상태**
            이 보고서는 "Install Verified", "No Status" 또는 "Failed" 개수를 보여 주며 각 범주에 대한 자세한 정보를 제공합니다. "Install Verified" 외 다른 범주의 수가 아주 높으면 각각에 대해 이 보고서를 실행해야 합니다.

        -   **지정한 날 수 이내의 특정 컴퓨터에 대한 소프트웨어 업데이트 상태 메시지**
            이 보고서는 읽는 사람에게 실제 설치 상태를 보여 줍니다. 소프트웨어 업데이트가 설치되지 않은 이유에 대한 설명이 이 보고서에 없으면 실제 컴퓨터 세부 정보에서 보급 알림 상태를 확인해야 합니다.

    12. 응급 상황에 이어 적합한 호환 수준에 도달했으면 주요 패키지를 진행 중인 작업에 대한 최신 소프트웨어 업데이트로 수정하고 초기 패키지를 회수합니다. 이렇게 하려면 파일을 다른 패키지 원본 폴더로 복사한 다음 **Distribute Software Updates Wizard**의 **Advanced** 단추와 **Import** 단추를 사용합니다. 이 보급 알림은 크기 때문에 일반적으로 네트워크에서 실행되도록 설정됩니다.
    13. 프로덕션 전 컬렉션 구성원에 대해 만든 긴급 프로그램과 프로덕션 컬렉션 구성원에 대해 만든 일반 프로그램을 삭제합니다.
        이러한 항목들이 더 이상 필요하지 않게 되면 시스템에서 해당 보급 알림이 자동으로 제거됩니다.

[](#mainsection)[페이지 위쪽](#mainsection)

### 평가 및 계획 단계 - 릴리스 빌드

릴리스 계획의 다음 단계는 관리자가 소프트웨어 업데이트를 프로덕션 환경에 배포할 때 사용할 스크립트, 도구 및 프로시저를 개발하는 것입니다. 배경 정보를 보려면 "패치 관리 3단계 - 평가 및 계획" 모듈의 “릴리스 빌드” 섹션을 참조하십시오.

여기서 수행해야 할 작업은 기본적으로 SMS 2003 **Distribute Software Updates Wizard를** 사용하여 소프트웨어 업데이트를 배포할 수 있는지 여부에 따라 달라집니다.

**Distribute Software Updates Wizard**는 배포에 필요한 SMS 패키지와 프로그램을 자동으로 만들고 소프트웨어 업데이트를 설치할 수 있으므로 SMS 2003을 사용하여 소프트웨어 업데이트를 배포하는 데 필요한 작업들 중 많은 부분을 없애 줍니다. 응급 변경 요청의 일부가 아닌 보안 업데이트를 보안 롤업 패키지에 추가할 수 있습니다. 이 패키지에는 특정 제품 및 서비스 팩 조합에 적용되는 모든 보안 업데이트가 포함됩니다. 예를 들어 Windows 2000 SP3에 적용되는 모든 보안 업데이트는 해당 보안 업데이트를 컴퓨터에 한꺼번에 적용하는 보안 롤업 패키지에 포함될 수 있으므로 한 대의 컴퓨터만 필요합니다. 보안 롤업 패키지를 사용하면 컴퓨터를 호환 상태로 만들기 위해 컴퓨터를 다시 시작해야 하는 횟수가 상당히 줄어들 뿐 아니라 관리 작업도 엄청나게 간단해질 수 있습니다.

이 기능을 사용하여 배포할 수 없는 소프트웨어 업데이트의 경우 관리자가 SMS의 표준 소프트웨어 배포 절차를 통해 패키지와 보급 알림을 만들어 소프트웨어 패키지를 배포해야 합니다. 클라이언트 컴퓨터에서 실행할 배치 파일, MSI 파일 또는 실행 파일도 지정해야 합니다. 소프트웨어 업데이트가 설치 실행 파일과 함께 제공되지 않은 경우에는 관리자가 MSI 제작 도구를 사용하여 설치 실행 파일을 작성해야 합니다.

다음은 릴리스 빌드를 위해 고려해야 할 추가 사항입니다.

-   소프트웨어 업데이트를 설치하기 위해 개발된 프로그램은 SMS 상태 시스템을 통해 정확한 상태가 반환될 수 있도록 올바른 종료 코드를 반환해야 합니다. 설치가 제대로 되었을 때는 0이 반환되어야 하고 설치 오류의 경우에는 0이 아닌 다른 수가 반환되어야 합니다. 반환 코드는 SMS 상태 시스템에서 보급 알림의 성공 또는 실패를 나타내는 데 사용됩니다.
-   관리자가 특정 컴퓨터에 소프트웨어 업데이트가 있는지 여부를 확인할 수 있도록 프로그램에서 시스템 레지스트리에 사용자 지정 키를 삽입하도록 해야 할 수도 있습니다. SMS 하드웨어 인벤토리 클라이언트 에이전트는 SMS 클라이언트에서 이 정보를 수집하도록 구성되어야 SMS 데이터베이스에 표시되어 웹 보고서와 쿼리에서 사용할 수 있게 됩니다.
-   설치가 완료될 때까지는 프로그램이나 배치 파일이 종료되어서는 안 됩니다. SMS 2003에서는 보급 알림에 연결된 프로그램이 종료되면 해당 보급 알림이 실행되어 완료된 것으로 간주됩니다. 프로그램에서 다른 프로세스를 생성한 다음 새 프로세스가 소프트웨어 업데이트의 설치를 완료하기 전에 프로그램이 종료되면 이 프로그램은 설치 완료에 해당하는 종료 코드를 반환할 수 없습니다.
-   배치 파일이나 프로그램은 설치가 제대로 완료되지 않을 경우 이벤트 로그에 이벤트를 기록하도록 구성되어야 합니다. 관리자에게 오류에 대한 경고를 보내려면 Microsoft Operations Manager-Server(MOM)에서 해당 이벤트에 대한 경고를 생성하는 규칙을 만들어야 합니다.

패치 적용이 진행되고 있음을 나타내는 이벤트를 작성하도록 스크립트를 더 개발하여 서버가 다시 시작되는 경우 MOM 콘솔에서 가상의 경고가 발생하는 것을 방지하려고 할 수도 있습니다.

**Distribute Software Updates Wizard에** 의해 지원되는 소프트웨어 업데이트의 경우는 관리자가 이 도구를 사용하여 새 SMS 패키지 및 보급 알림을 만들어 소프트웨어 업데이트를 배포해야 합니다. 또한 앞에서 설명한 보안 롤업 패키지에도 소프트웨어 업데이트를 추가해야 합니다. 소프트웨어 업데이트가 프로덕션 환경 내의 모든 클라이언트에 배포되었으면 보안 롤업 패키지는 프로덕션 환경에 도입된 새 컴퓨터에 소프트웨어 업데이트가 적용되도록 하므로 소프트웨어 업데이트에 대한 개별 패키지 및 보급 알림을 회수할 수 있습니다.

**Distribute Software Updates Wizard를** 사용하여 배포할 수 없는 소프트웨어 업데이트의 경우 SMS 패키지와 보급 알림을 만들어 소프트웨어 업데이트를 배포해야 합니다. 소프트웨어 업데이트가 설치 실행 파일과 함께 제공되지 않은 경우에는 관리자가 위에 설명한 대로 설치 실행 파일을 작성해야 합니다.

[](#mainsection)[페이지 위쪽](#mainsection)

### 배포 단계 - 배포 준비

프로덕션 환경을 각 새 릴리스에 대해 준비해야 합니다. 소프트웨어의 배포 준비에 필요한 단계는 다음과 같습니다.

-   **롤아웃 일정 전송**
-   **테스트 환경에서 프로그램 및 보급 알림 가져오기**
-   **배포 지점 할당**
-   **배포 지점의 업데이트 준비**
-   **배포 그룹 선택**

배경 정보를 보려면 "패치 관리 4단계 - 배포" 모듈의 “배포 준비” 섹션을 참조하십시오.

#### 롤아웃 일정 전송

업데이트를 안전하고 성공적으로 배포하려면 업데이트 설치 과정을 돕기 위해 사용자가 수행해야 할 특정 작업이 있을 수도 있기 때문에 사용자에게 업데이트 배포를 알려야 합니다.

-   **롤아웃 일정을 확실하게 전송하려면 다음을 수행합니다.**
    1.  업데이트를 경고하고 설치 방법에 대한 정보를 제공하는 쉽고도 확실한 내용의 전자 메일 메시지를 사용자와 관리자에게 보냅니다. 중요 업무 시간 이외의 시간에 데스크톱을 업데이트하는 경우에는 전자 메일 메시지를 통해 최종 사용자에게 지정한 날짜의 밤 시간에 컴퓨터를 사용하지 말도록 지시해야 합니다.
    2.  소프트웨어 업데이트 설치를 위해 취해야 할 작업을 사용자와 관리자에게 미리 알려 주기 위해 이 메일에는 추후 확인 플래그를 지정해야 합니다.

**테스트 환경에서 프로그램 및 보급 알림 가져오기**

최대의 안정성과 보안을 유지하려면 항상 테스트 환경에서 개발한 SMS 2003 패키지를 가져옵니다. 테스트 환경은 프로덕션 환경을 잘 나타낸 것이라야 합니다. SMS 2003 표준 소프트웨어 배포 절차를 사용하여 배포되는 소프트웨어 업데이트의 경우 테스트 환경에서 패키지 정의(패키지에 연결된 프로그램 포함)를 작성하고 테스트해야 합니다. 이 패키지를 SMS 2003 프로덕션 환경으로 가져와야 합니다.

테스트 환경에서 기존 패키지를 가져오려면 그림 9와 10에 나오는 것처럼 **Distribute Software Updates Wizard**의 **Identify the SMS Package** 페이지에서 **Advanced**와 **Import** 옵션을 차례로 사용합니다. **Advanced** 단추를 사용하면 이전에 처리된 소프트웨어 업데이트를 다른 인증 목록에서(예: 테스트 환경에서 프로덕션 환경으로) 가져올 수 있습니다.
![](images/Dd547993.SGFG19909(ko-kr,TechNet.10).jpg)

그림 9
![](images/Dd547993.SGFG19910(ko-kr,TechNet.10).jpg)
Distribute Software Updates Wizard - 고급 단추
그림 10
Distribute Software Updates Wizard - **Import** 단추

그림 11에 나오는 것처럼 Distribute Software Updates Wizard에서 Import 단추를 사용하여 바이러스 검색이 완료된 소프트웨어 업데이트 파일을 가져옵니다 ![](images/Dd547993.SGFG19911(ko-kr,TechNet.10).jpg)

그림 11
이 스크린 샷은 바이러스 검색이 완료된 파일을 가져오는 방법을 보여 줍니다.

#### 배포 지점 할당

패키지를 SMS 2003으로 가져왔으면 클라이언트 컴퓨터에서 소프트웨어 업데이트를 사용할 수 있도록 하는 데 사용할 배포 지점을 결정해야 합니다. 대상 클라이언트가 위치한 모든 사이트의 배포 지점에 소프트웨어 업데이트 바이너리를 배치합니다. 보안 업데이트 인벤토리 도구나 Microsoft Office Inventory Tool for Updates를 통해 확인된 소프트웨어 업데이트의 경우 패키지를 만들었으면 이러한 배포 지점을 나중에 수동으로 수정할 수 있더라도 배포 지점은 **Distribute Software Updates Wizard**의 한 단계로 할당됩니다.

일반적으로 소프트웨어 업데이트는 동일한 클라이언트 그룹에 배포되므로 각 소프트웨어 업데이트에는 동일한 배포 지점이 사용됩니다. 예를 들어 서버와 서버 응용 프로그램에 대한 소프트웨어 업데이트는 데이터 센터 사이트의 모든 배포 지점으로 전송되어야 합니다. 회계 프로그램에 대한 소프트웨어 업데이트는 회계 부서 사이트의 배포 지점으로만 전송됩니다.

이렇게 하여 SMS 2003에서 특정 범위의 클라이언트에 대한 배포 지점만 포함되는 배포 지점 그룹을 설정할 수 있습니다. 배포 지점 그룹을 사용하면 배포되는 소프트웨어 업데이트에 배포 지점을 할당하는 과정이 빨라집니다. 새 배포 지점을 배치해야 하는 경우를 확인하는 데 SMS 데이터베이스 내의 인벤토리 정보를 사용할 수 있습니다.

**참고:** 배포 지점 그룹에 배포 지점을 추가하기만 해서는 **Update Distribution Points** 옵션을 사용하더라도 패키지가 새 배포 지점으로 전송되지 않습니다. 그룹이 패키지에 할당되는 경우에만 배포 지점이 해당 그룹에서 평가됩니다. 새 배포 지점을 패키지에 하나씩 추가한 다음 배포 지점을 업데이트해야 합니다.

#### 배포 지점의 업데이트 준비

적절한 배포 지점을 할당했으면 모든 개별 파일의 복사본이 이 서버로 배포되는지 확인해야 합니다. SMS 상태 시스템을 사용하여 소프트웨어 업데이트 파일의 배포를 모니터링합니다. 배포 지점에 파일이 있을 때까지 해당 사이트의 클라이언트는 소프트웨어 업데이트를 설치할 수 없습니다.

소프트웨어 업데이트 바이너리를 배포 지점으로 보내는 과정에는 SMS 사이트 간에 그리고 SMS 사이트에서 로컬 배포 지점으로 파일을 보내는 작업이 포함됩니다.

#### SMS 사이트 간에 업데이트 보내기

대부분의 조직에서 사이트 간에 설명, 소프트웨어 패키지 및 보급 알림을 보내는 일을 담당하는 사이트 간 전송자는 사용하는 네트워크 대역폭의 양이나 전송이 이루어질 수 있는 날 수를 제한하도록 구성되는 경우가 많습니다. 이러한 제한은 기본적으로 소프트웨어 배포가 일반 업무 시간 외에 이루어지도록 하기 위해 사용되지만 중요한 업데이트를 신속하게 사용할 수 있도록 해야 할 경우에는 문제가 될 수도 있습니다.

표 1은 사이트 간 복제 모니터링을 돕는 데 사용할 수 있는 SMS 메시지를 보여 줍니다.

표 1: SMS Sender 메시지

<p> </p>
<table style="border:1px solid black;">
<tr>
<th style="border:1px solid black;" colspan="2">
메시지 ID 세부 정보
</th>
</tr>
<tr>
<td style="border:1px solid black;">
3531
</td>
<td style="border:1px solid black;">
SMS Sender에서 현재 소프트웨어 배포 패키지를 대상 사이트로 보내고 있습니다.
</td>
</tr>
<tr>
<td style="border:1px solid black;">
3532
</td>
<td style="border:1px solid black;">
소프트웨어 배포 패키지를 대상 사이트로 보내는 동안 SMS Sender에서 오류가 발생했습니다.
</td>
</tr>
<tr>
<td style="border:1px solid black;">
3533
</td>
<td style="border:1px solid black;">
SMS Sender에서 소프트웨어 배포 패키지를 대상 사이트로 보냈습니다.
</td>
</tr>
</table>
 
SMS에서는 패키지 우선 순위를 High, Medium, Low 등으로 정의할 수 있습니다. 업무용으로 분류되지 않는 소프트웨어 업데이트에는 Medium이나 Low 우선 순위만 사용해야 합니다. High 우선 순위는 중요한 소프트웨어 업데이트에만 사용됩니다. 다음은 패키지 우선 순위가 소프트웨어 업데이트의 배포에 영향을 주는 방식을 요약한 것입니다

-   배포 관리자는 패키지를 압축하고 처리하는 구성 요소입니다. 이 경우 패키지는 우선 순위에 따라 처리됩니다. 패키지 우선 순위는 보낸 사람/스케줄러/복제 관리자의 복제 우선 순위에 매핑됩니다.
-   배포 관리자가 Medium 우선 순위의 패키지 압축을 이미 시작했으면 새로 만들어진 High 우선 순위의 패키지를 압축하기 위해 현재 처리를 중지하지 않습니다.
-   패키지의 우선 순위 평가는 보낸 사람이 현재 패키지 전송을 완료한 후에 이루어집니다. 따라서 Medium 우선 순위의 패키지가 전송되고 있는 중에 High 우선 순위의 패키지가 정의되면 Medium 우선 순위의 패키지 전송을 완료한 후에 우선 순위를 다시 평가합니다.
-   보급 알림 우선 순위는 사이트 간 복제 우선 순위에만 영향을 미칩니다. 그러나 보급 알림 개체는 아주 작으므로 사이트 간에 보류 중인 트래픽이 많지 않다면 거의 차이가 없습니다.
-   패키지/보급 알림에 관련된 그 밖의 구성 요소는 배포 관리자, 제공 관리자, 복제 관리자, 스케줄러, 디스플러, 보낸 사람 등이 있습니다. 이러한 구성 요소는 모두 우선 순위를 준수합니다.

다음 SQL 쿼리를 사용하면 모든 사이트로 배포하기 위해 전송이 완료된 콘텐트의 비율에 대한 보고서를 생성할 수 있습니다. 이 쿼리를 사용하기 전에 먼저 PackageID "BAR0001"을 모두 찾아 작업 환경의 실제 PackageID로 바꿔야 합니다.

```
                  declare @ver int
                  select @ver=MAX(SourceVersion) from v_PackageStatusRootSummarizer where PackageID
                  = ‘BAR00001’ create table #PkgProgress (RecordID int not null, Time datetime not
                  null, SiteCode char(3) not null, PctComplete int not null, MessageID int not null,
                  PRIMARY KEY(SiteCode,Time,RecordID)) insert into
                  #PkgProgress(RecordID,Time,SiteCode,PctComplete,MessageID) select msg.RecordID,
                  msg.Time, insSC.InsStrValue as SiteCode, IsNULL(insPC.InsStrValue,100) as
                  PctComplete, msg.MessageID from v_StatusMessage msg join v_StatMsgAttributes att
                  on msg.RecordID=att.RecordID and msg.Time=att.AttributeTime join
                  v_StatMsgInsStrings insVER on msg.RecordID=insVER.RecordID and
                  insVER.InsStrIndex=1 join v_StatMsgInsStrings insSC on msg.RecordID=insSC.RecordID
                  and insSC.InsStrIndex=2 left join v_StatMsgInsStrings insPC on
                  msg.RecordID=insPC.RecordID and insPC.InsStrIndex=3 where MessageID in
                  (3531,3532,3533) and Component in
                  (‘SMS_ASYNC_RAS_SENDER’,’SMS_ISDN_RAS_SENDER’,’SMS_LAN_SENDER’,’SMS_SNA_RAS_SENDER
                  ’,’SMS_X25_RAS_SENDER’,’SMS_WINSOCK_SENDER’) and att.AttributeID=400 and
                  att.AttributeValue= ‘BAR00001’ and insVER.InsStrValue=CONVERT(varchar(10),@ver)
                  select Sites.SiteCode, prog.Time, prog.MessageID, prog.PctComplete as ‘Sending %
                  Complete’, Sites.Targeted as ‘DPs Targeted’, 100*Sites.Installed/Sites.Targeted as
                  ‘% DPs Complete’ from v_PackageStatusDetailSumm Sites left join (#PkgProgress prog
                  join (select SiteCode, MAX(Time) as MaxTime from #PkgProgress group by SiteCode)
                  as LastProg on prog.Time=LastProg.MaxTime and prog.SiteCode=LastProg.SiteCode) on
                  Sites.SiteCode=prog.SiteCode where Sites.PackageID = ‘BAR00001’ and
                  Sites.Targeted>0 order by prog.SiteCode drop table #PkgProgress
```

#### 응급 변경 요청

응급 변경 요청의 경우 모든 사이트 간 제한을 높이고 소프트웨어 업데이트를 다른 사이트로 최대한 빨리 보낼 수 있도록 허용해야 합니다. 사이트 간 네트워크 연결 속도가 느리거나 이미 정체되어 있으면 사이트 간 보낸 사람에 대한 제한을 높이더라도 아무런 효과가 없습니다. 그런 경우에는 SMS Courier Sender를 사용하여 업데이트를 각 사이트에 보내는 것을 고려할 수 있습니다.

#### 배포 지점에 업데이트 보내기

업데이트가 SMS 사이트 서버에 도달했으면 해당 사이트 내의 모든 배포 지점에 자동으로 배포됩니다. 표 2에 나오는 SMS 이벤트를 모니터링하여 각 배포 지점을 확인해야 합니다.

표 2: SMS 배포 이벤트

<p> </p>
<table style="border:1px solid black;">
<tr>
<th style="border:1px solid black;" colspan="2">
메시지 ID 세부 정보
</th>
</tr>
<tr>
<td style="border:1px solid black;">
2342
</td>
<td style="border:1px solid black;">
SMS 배포 관리자가 패키지를 배포 지점에 배포하기 시작하는 것을 나타냅니다.
</td>
</tr>
<tr>
<td style="border:1px solid black;">
2330
</td>
<td style="border:1px solid black;">
SMS 배포 관리자가 패키지를 배포 지점에 배포한 것을 나타냅니다.
</td>
</tr>
</table>
 
참고: 클라이언트가 소프트웨어 업데이트를 설치하기 위해서는 로컬 관리 지점에서 정책 또한 사용할 수 있어야 합니다.

#### 배포 그룹 선택

**Distribute Software Updates Wizard**를 사용하여 새 소프트웨어 업데이트를 배포하는 경우 대상 컴퓨터를 정확하게 지정하지 않아도 됩니다. 이 마법사에서는 새 소프트웨어 업데이트를 설치하려고 할 때 호출되는 스마트 에이전트를 클라이언트에 배포하기 때문입니다. 이 에이전트는 마법사를 통해 보급된 소프트웨어 업데이트가 해당 컴퓨터에 적용되는지 그리고 이미 설치되어 있는지 여부를 자동으로 확인합니다. 여러 소프트웨어 업데이트의 체인 작업과 그러한 작업을 적용하기 위한 다시 부팅을 처리하기도 합니다.

이런 방식으로 설치된 소프트웨어 대상 지정을 위한 그룹을 다음 요소를 기준으로 만들어야 합니다.

-   컴퓨터에서 새 소프트웨어 업데이트를 확인하고 설치해야 하는 빈도 (지정한 간격으로 새 소프트웨어 업데이트를 확인하는 SMS 보급 알림이 만들어집니다.)
-   서버, 워크스테이션 및 휴대용 컴퓨터는 각각 다른 일정을 가지고 있으며 소프트웨어 업데이트를 설치하기 위해 다른 프로그램을 실행할 수 있으므로 각각 별개의 쿼리가 필요합니다.
-   각기 다른 부서나 지리적 위치에 있는 컴퓨터는 표준 시간대가 서로 다르므로 별개의 쿼리가 필요합니다. 업데이트가 모든 표준 시간대에 동시에 적용되게 하려면 Distributed Software Update wizard에 **Coordinated Universal Time** 확인란을 포함합니다.

Distribute Software Updates Wizard를 사용하지 않지만 소프트웨어 업데이트가 사용자 지정 패키지 및 컬렉션을 통해 배포되는 경우에는 SMS 쿼리를 하나 이상 만들어야 할 가능성이 많습니다. 예를 들어 다음과 같이 지정합니다.

-   단일 쿼리와 그 쿼리를 기반으로 하는 단일 컬렉션을 사용하여 롤아웃의 각 단계에 대한 쿼리를 수정합니다. 처음에는 롤아웃의 첫 번째 단계에서 대상으로 지정된 클라이언트의 범위(예: 단일 사이트 또는 워크그룹)를 줄이도록 쿼리가 수정됩니다. 롤아웃이 더 많은 클라이언트로 확장되면 해당 범위에 롤아웃의 다음 단계에 있는 클라이언트가 포함되도록 쿼리가 확장됩니다.
-   관리자는 제어된 방식으로 소프트웨어 업데이트를 롤백할 수 있게 되므로 쿼리에 대한 변경을 추적하고 이전 버전을 유지해야 합니다.

[](#mainsection)[페이지 위쪽](#mainsection)

### 배포 단계 - 클라이언트 컴퓨터에 소프트웨어 업데이트 보급 알림

소프트웨어 업데이트를 프로덕션 환경에 배포하는 데 필요한 첫 단계는 소프트웨어 업데이트를 클라이언트 컴퓨터에 보급하는 것입니다. 롤아웃을 단계적으로 수행할 수도 있고 모든 클라이언트가 같은 배포 기간 내에 업데이트를 받을 수도 있습니다. 배경 정보를 보려면 "패치 관리 4단계 - 배포" 모듈의 “대상 컴퓨터에 소프트웨어 업데이트 배포” 섹션을 참조하십시오.

Distribute Software Updates Wizard를 실행하는 경우 대상 컬렉션의 컴퓨터에서 소프트웨어 업데이트 설치 에이전트를 실행하는 반복 보급 알림이 자동으로 만들어집니다. 반복 간격의 기본값(7일)을 컬렉션에 맞도록 변경할 수 있습니다. 예를 들어 서버가 포함된 컬렉션은 에이전트를 매일 한 번 또는 그보다 훨씬 많이 실행할 수 있습니다.

그 밖의 고려해야 할 사항은 다음과 같습니다.

-   컨트롤 그룹이 있으면 해당 컴퓨터에 먼저 배포합니다.
-   각기 다른 종류의 컴퓨터에 대해 서로 다른 일정이 필요한 경우 동일한 패키지와 프로그램을 사용하여 여러 컬렉션에 대해 여러 보급 알림을 만들 수 있습니다.
-   소프트웨어 업데이트 설치 에이전트 실행을 위한 반복 간격이 매일로 설정되어 있을 때 중요한 소프트웨어 업데이트의 롤아웃을 설정된 간격보다 먼저 실행해야 할 경우 일회용 필수 할당을 새로 만들어서 보급 알림을 최대한 빨리 실행해야 합니다.
-   롤아웃이 스태거되는 경우 첫 번째 단계의 롤아웃이 완료되었으면 다음 단계(예: 배포할 다음 사이트)의 클라이언트가 포함되도록 쿼리를 수정해야 합니다. 컬렉션은 직접 또는 정해진 일정에 따라 업데이트됩니다. 그 후에는 소프트웨어 업데이트 설치 프로그램이 새 클라이언트 집합에 자동으로 보급됩니다.
-   대상 컬렉션에 사용한 SMS 쿼리는 설치되는 소프트웨어 업데이트가 없는 컴퓨터를 나타내는 인벤토리 정보를 기반으로 합니다. 컴퓨터가 소프트웨어 업데이트를 설치하고 계속해서 인벤토리를 다시 실행하면 이러한 컴퓨터는 쿼리 정의와 더 이상 일치하지 않으므로 컬렉션이 업데이트됨에 따라 컬렉션에서 빠지게 됩니다. 소프트웨어 업데이트가 없는 새 컴퓨터가 SMS에 의해 네트워크에 추가되고 인벤토리가 실행되었으면 다음 컬렉션 업데이트 시 소프트웨어 업데이트 설치 프로그램이 자동으로 보급됩니다.

소프트웨어 업데이트를 배포하는 데 **Distribute Software Updates Wizard**를 사용하지 않는 경우 다음 사항을 고려해야 합니다.

-   소프트웨어 업데이트를 설치하도록 보급 알림이 설정되면 해당 일정이 가끔씩 반복되도록 구성되어야 합니다. 이것은 실패한 설치를 자동으로 회수하기 위한 것입니다. 보급 알림이 반복되지 않으면 수동으로 다시 시도해야 합니다. 이 경우 실패한 클라이언트에 대한 컬렉션과 해당 컬렉션에 대한 새 보급 알림을 만들어야 합니다. 모든 클라이언트에 패치가 적용될 때까지 이러한 단계를 반복해야 합니다.
-   해당 릴리스 설치를 완료한 클라이언트는 새 인벤토리가 수집될 때까지(설치 프로그램 자체에 의해 트리거될 수 있음) 또는 SMS 데이터베이스에서 인벤토리가 업데이트되고 컬렉션이 다시 평가될 때까지 대상 컬렉션에 유지되므로 그러한 보급 알림을 반복하는 간격은 신중하게 선택해야 합니다. 그러므로 프로그램을 이미 성공적으로 한 번 실행한 클라이언트에서 해당 프로그램을 다시 실행할 수 있습니다. 따라서 실행할 프로그램이 소프트웨어 업데이트가 이미 설치되었는지, 설치되어 있다면 지연 없이 프로그램이 종료되는지를 먼저 확인하는 것이 중요합니다.

중요하지 않은 소프트웨어 업데이트의 경우 SMS 2003에서 업데이트를 설치할 시점을 결정할 수 있는 옵션을 관리자가 사용자에게 제공할 수 있습니다. 이 경우 특정 기한이 지나면 업데이트가 자동으로 설치되도록 합니다. 이 작업은 그림 12에 나오는 것처럼 Allow users to postpone for 확인란을 선택하여 Distribute Software Updates Wizard에서 수행할 수 있습니다.
![](images/Dd547993.SGFG19912(ko-kr,TechNet.10).jpg)

그림 12
이 스크린 샷은 Allow users to postpone for 확인란을 선택하는 방법을 보여 줍니다.

사용자와 서비스 소유자는 소프트웨어 업데이트를 설치할 수 있으며 특정 시간이 지나면 해당 설치가 필수 사항이 된다는 알림을 받아야 합니다. 이런 방식으로 원격 휴대용 컴퓨터 사용자나 저속 링크로 연결된 컴퓨터 사용자는 소프트웨어 업데이트를 설치할 편리한 시간을 선택할 수 있습니다. 그러나 할당 날짜가 되면 소프트웨어 업데이트가 자동으로 설치됩니다.

**Distribute Software Updates Wizard**를 통해 사용할 수 있게 된 소프트웨어 업데이트의 경우 사용자는 그림 13에 나오는 것처럼 풍선 도움말 텍스트 방식으로 사용할 수 있는 업데이트에 대한 알림을 받습니다.
![](images/Dd547993.SGFG19913(ko-kr,TechNet.10).jpg)

그림 13
사용 가능한 업데이트에 대한 사용자 알림

최근에 서버에 로그온한 사용자 이름과 대상 서버에서 누락된 인증된 업데이트 목록을 반환하는 쿼리를 작성하여 컴퓨터 소유자에게 호환 수준과 다음 기한을 쉽게 알려 줄 수 있습니다.

#### 응급 변경 요청

변경 요청이 소프트웨어 업데이트가 응급 사항임을 나타내는 경우 다음 사항을 고려해야 합니다.

-   참조 컴퓨터 컬렉션에 대한 보급 알림으로 배포가 시작되어야 합니다. 참조 컴퓨터 컬렉션은 프로덕션 환경에서 대표가 되는 모든 컴퓨터를 가지고 있으므로 단계별 또는 구조적 배포에서 중요한 단계가 됩니다. 이 방법을 통해 나머지 프로덕션 환경에서 배포를 시작하는 데 필요한 자신감을 갖게 됩니다.
-   SMS 사이트나 배포 지점에 대한 연결 및 링크 속도에 관계없이 소프트웨어 업데이트를 클라이언트에 최대한 빨리 설치해야 합니다. 고급 클라이언트를 실행하는 컴퓨터의 사용자는 세 시간마다 기한에 대한 미리 알림을 받습니다.
-   보급 알림을 만들 때는 그림 14에 나오는 것처럼 Assignments are not mandatory over slow links 확인란 선택을 취소했는지 확인해야 합니다
    ![](images/Dd547993.SGFG19914(ko-kr,TechNet.10).jpg)
    그림 14
    "Assignments are not mandatory over slow links" 확인란

-   휴대용 컴퓨터 사용자에게 사무실에 들어와서 중요한 소프트웨어 업데이트를 설치하도록 요청하는 것이 더 나을 수도 있습니다. 특히 소프트웨어 업데이트가 클 경우 또는 사용자가 표준 전화 연결이나 저속 링크를 통해 연결하는 경우 그렇습니다. 사무실에 들어올 수 없는 사용자는 그림 15에 나오는 것처럼 소프트웨어 업데이트를 로컬 하드 디스크로 다운로드하여 거기서 실행하도록 구성한 보급 알림을 만들어야 할 수 있습니다.
    ![](images/Dd547993.SGFG19915(ko-kr,TechNet.10).jpg)
    그림 15
    소프트웨어 업데이트를 로컬 하드 디스크로 다운로드하여 거기서 실행하도록 구성한 보급 알림을 만드는 방법

-   위 사항 외에도 보호된 배포 지점을 사용하여 원격 또는 휴대용 컴퓨터를 배포 지점에 바인딩하는 것을 고려하십시오. 이론적으로 말하자면 보호된 배포 지점이 원격 또는 휴대용 컴퓨터 사용자에게 가장 가까운 배포 지점이어야 합니다. 보호된 배포 지점을 사용하면 원격 사용자가 항상 소프트웨어 업데이트에 대해 해당 배포 지점을 사용하게 됩니다. 그러나 보호된 배포 지점을 사용할 수 없을 때는 원격 사용자가 보호되지 않은 가장 가까운 배포 지점으로 자동으로 장애 복구(failback)됩니다.

[](#mainsection)[페이지 위쪽](#mainsection)

### 배포 단계 - 배포 진행률 모니터링 및 보고

여러 가지 이유로 인해 컴퓨터에서 업데이트를 설치하지 못할 수도 있으므로 배포 진행 상태를 모니터링할 수 있어야 합니다. 배경 정보를 보려면 "패치 관리 4단계 - 배포" 모듈의 “대상 컴퓨터에 소프트웨어 업데이트 배포” 섹션을 참조하십시오.

클라이언트 컬렉션에 보급하는 방식으로 패키지를 배포했으면 클라이언트가 보급 알림을 성공적으로 실행했는지 여부를 확인해야 합니다. SMS 클라이언트로부터 반환된 상태 메시지를 확인하는 데 사용할 수 있는 도구가 많이 있습니다.

SMS 지원 도구에는 보급 알림의 배포 상태 보기를 해당 상태 메시지를 기준으로 제공하는 Advertisement Status Viewer라는 도구가 있습니다. 그러나 보급 알림의 배포 상태를 확인할 때는 다음 사항을 알아야 유용한 경우가 많습니다.

-   컬렉션에는 포함되어 있지만 보급 알림을 받지 않은 클라이언트
-   보급 알림을 받았지만 실행하지 않은 클라이언트
-   프로그램을 제대로 실행하지 못한 클라이언트

상태 메시지는 반복되는 보급 알림이 실행되었는지 여부만 알려 줍니다. 실제로 승인된 새 소프트웨어 업데이트를 설치하는 것은 Patch Install 프로그램입니다. 이 프로그램이 클라이언트에서 잘 실행되는지 확인하기 위해서는 상태 메시지를 분석하여 이 프로그램이 각 클라이언트에서 마지막으로 실행된 시간을 확인할 수 있습니다. 마지막으로 실행된 이후로 경과된 시간이 클라이언트의 반복 기간보다 길면 조사가 필요합니다.

상태 메시지에는 최종 사용자의 자발적 패치 적용과 강요된 패치 적용의 정도와 다시 부팅 및 예약된 설치를 관리하는 방법도 기록됩니다. 이 데이터를 기반으로 강제 설정 및 기본 설정을 조정하면 컴퓨터를 더욱 효율적인 방법으로 호환 상태로 만들 수 있습니다. 표 3에 나오는 메시지를 사용하여 그러한 정보를 검토할 수 있습니다.

표 3: 보급 알림 상태 메시지

<p> </p>
<table style="border:1px solid black;">
<tr>
<th style="border:1px solid black;" colspan="2">
메시지 ID 설명
</th>
</tr>
<tr>
<td style="border:1px solid black;">
11250
</td>
<td style="border:1px solid black;">
예약된 설치 창이 없습니다(빠른 시작). 다시 시도를 위해 대기 중입니다.
</td>
</tr>
<tr>
<td style="border:1px solid black;">
11251
</td>
<td style="border:1px solid black;">
예약된 설치 창이 없습니다(늦은 시작). 다시 시도를 위해 대기 중입니다.
</td>
</tr>
<tr>
<td style="border:1px solid black;">
11256
</td>
<td style="border:1px solid black;">
예약된 설치 창이 없습니다(만료 제한). 다시 시도를 위해 대기 중입니다.
</td>
</tr>
<tr>
<td style="border:1px solid black;">
11257
</td>
<td style="border:1px solid black;">
업데이트를 설치하는 데 필요한 시스템 다시 시작 일정을 사용자가 변경했습니다.
</td>
</tr>
<tr>
<td style="border:1px solid black;">
11258
</td>
<td style="border:1px solid black;">
업데이트를 설치하는 데 필요한 시스템 다시 시작 일정을 사용자가 연기했습니다.
</td>
</tr>
<tr>
<td style="border:1px solid black;">
11259
</td>
<td style="border:1px solid black;">
업데이트를 설치하는 데 필요한 시스템 다시 시작 일정이 자동으로 연기되었습니다.
</td>
</tr>
<tr>
<td style="border:1px solid black;">
11252
</td>
<td style="border:1px solid black;">
설치 일정을 사용자가 변경했습니다.
</td>
</tr>
<tr>
<td style="border:1px solid black;">
11253
</td>
<td style="border:1px solid black;">
사용자가 설치를 연기했습니다.
</td>
</tr>
<tr>
<td style="border:1px solid black;">
11254
</td>
<td style="border:1px solid black;">
설치가 자동으로 연기되었습니다.
</td>
</tr>
<tr>
<td style="border:1px solid black;">
11270
</td>
<td style="border:1px solid black;">
컴퓨터를 다시 시작해야 합니다.
</td>
</tr>
<tr>
<td style="border:1px solid black;">
11266
</td>
<td style="border:1px solid black;">
설치가 완료되었으며 워크스테이션 역할로 인해 다시 시작이 생략되었습니다.
</td>
</tr>
<tr>
<td style="border:1px solid black;">
11267
</td>
<td style="border:1px solid black;">
설치가 완료되었으며 서버 역할로 인해 다시 시작이 생략되었습니다.
</td>
</tr>
<tr>
<td style="border:1px solid black;">
11268
</td>
<td style="border:1px solid black;">
설치가 완료되었으며 다시 시작할 필요가 없습니다.
</td>
</tr>
<tr>
<td style="border:1px solid black;">
11261
</td>
<td style="border:1px solid black;">
설치가 완료되었으며 다시 시작 일정을 사용자가 변경했습니다.
</td>
</tr>
<tr>
<td style="border:1px solid black;">
11262
</td>
<td style="border:1px solid black;">
설치가 완료되었으며 사용자가 다시 시작을 연기했습니다.
</td>
</tr>
<tr>
<td style="border:1px solid black;">
11263
</td>
<td style="border:1px solid black;">
설치가 완료되었으며 다시 시작이 자동으로 연기되었습니다.
</td>
</tr>
<tr>
<td style="border:1px solid black;">
11264
</td>
<td style="border:1px solid black;">
필수 사항인 다시 시작을 시작했습니다.
</td>
</tr>
<tr>
<td style="border:1px solid black;">
11265
</td>
<td style="border:1px solid black;">
강제 필수 사항인 다시 시작을 시작했습니다.
</td>
</tr>
</table>
 
보안 업데이트 인벤토리 도구 또는 Microsoft Office Inventory Tool for Updates를 통해 확인된 소프트웨어 업데이트의 경우 기본 제공 보고서를 사용하여 소프트웨어 업데이트의 배포 성공을 확인할 수 있습니다. Compliance by Software ID 보고서를 사용하여 업데이트가 설치되었거나 누락된 시스템의 전체 개수에 대한 요약과 소프트웨어 업데이트 배포에 관련된 상태를 제공할 수 있습니다. 이 보고서는 특정 소프트웨어 업데이트에 대한 현재 호환 수준을 확인하는 데 도움이 됩니다. 그러나 업데이트된 인벤토리 정보를 사용하므로 상태 메시지를 보는 것만큼 최신 정보는 아닙니다.

#### 분석 결과

배포가 진행됨에 따라 컴퓨터에서 소프트웨어를 설치하지 못하는 이유는 다음을 비롯하여 여러 가지가 있을 수 있습니다.

-   여러 이유로 인해 컴퓨터가 오프라인 상태입니다. 예를 들어 사용자가 작업 중이 아니거나, 통화 중이거나, 외출 중이거나, 컴퓨터가 유지 보수 상태입니다.
-   컴퓨터를 다시 구축하는 중이거나 이미지를 다시 작성하는 중입니다.
-   SMS 클라이언트가 있는 컴퓨터가 마지막 기준선/검색 이후 SMS 사이트 서버와 통신하지 않고 있습니다.
-   사용자에 의해 또는 유지 관리 작업의 한 과정으로 컴퓨터의 에이전트 서비스가 중지되었습니다.
-   여러 가지 이유로 인해 컴퓨터가 액세스를 거부했습니다.
-   컴퓨터의 MSXML 3이 SP1까지만 있습니다(SMS 2003에는 MSXML 3.0 SP4가 필요함).
-   컴퓨터 디스크 공간이 부족합니다.

그러한 이유들 중 하나로 인해 클라이언트 컴퓨터 중 일부가 주어진 SLA 내에서 패치 적용이 되는 경우 이들 컴퓨터의 호환을 유지하기 위해 수행할 단계를 결정해야 합니다. 모든 컴퓨터에 패치를 적용하지는 못할 수도 있지만 컴퓨터에 패치를 적용할 수 없거나 적용해서는 안 되는 이유를 충분히 이해해야 합니다.

다음 설명은 설치할 소프트웨어 업데이트의 오류 해결을 도와 주며 더 많은 컴퓨터를 호환 상태로 유지할 수 있도록 도와 줍니다.

-   배포의 첫 단계가 끝난 후에는 항상 작업 환경을 다시 검색하여 첫 단계 중 누락된 컴퓨터를 확인합니다.
-   배포 진행 상태를 계속해서 모니터링하고 보고합니다.
-   다시 검색하고 모니터링을 수행하면 예외로 보고된 대상 컴퓨터에 대한 후속 재배포 단계가 발생합니다.
-   항상 배포 실패의 근본 원인을 찾아봅니다.
-   오프라인 상태이거나 다시 빌드 중인 컴퓨터는 SMS 에이전트 서비스가 정상 상태인 이상 보급 알림을 받아야 합니다.
-   배포의 성공 비율을 높이려면 이 섹션의 설명을 참조하십시오.

[](#mainsection)[페이지 위쪽](#mainsection)

### 배포 단계 - 실패한 배포 처리

배포가 제대로 완료되지 않아서 중지 및 롤백해야 할 경우에는 롤아웃을 중지하고 실패한 업데이트를 제거한 다음 다시 배포해야 합니다. 배경 정보를 보려면 "패치 관리 4단계 - 배포" 모듈의 “대상 컴퓨터에 소프트웨어 업데이트 배포” 섹션을 참조하십시오.

-   **예외를 처리하려면 다음을 수행합니다.**
    1.  활성 패키지의 배포를 중지합니다.
    2.  문제를 확인하고 해결합니다.
    3.  패키지를 다시 보급합니다.
    4.  소프트웨어 업데이트를 제거합니다.

**활성 패키지의 배포 중지**

-   **활성 패키지의 배포를 중지하려면 다음을 수행합니다.**
    1.  SMS 관리자 콘솔의 패키지 노드에서 일시적으로 중지시킬 프로그램을 선택합니다.
    2.  **Program Properties Advanced** 탭에서 **Disable this program on computers where it is advertised** 확인란을 선택합니다. 그렇게 하면 프로그램을 기반으로 하는 보급 알림이 필수 항목으로 할당되어 특정 시간이나 일정대로 시작하도록 설정되어 있더라도 중지되거나 일시 중지됩니다.
    3.  **Distribute Software Updates Wizard**를 열고 사용을 중지하려는 소프트웨어 업데이트의 확인 표시를 제거한 다음 변경 내용을 저장합니다. 이 경우 다른 소프트웨어 업데이트가 이 패키지 안에서 제대로 실행 중이라면 보급 알림을 사용할 수 있는 상태로 유지할 수 있습니다.

#### 문제 확인 및 해결

표 4는 보고서 뷰어의 소프트웨어 업데이트 인프라 상태 범주에 표준 보고서를 나열합니다. 이 보고서를 사용하면 소프트웨어 업데이트를 설치하려고 하는 클라이언트에서 발생하는 모든 문제와 인터넷에서 소프트웨어 업데이트 카탈로그를 다운로드하는 중에 발생하는 모든 문제를 신속하게 확인할 수 있습니다. 문제를 초기에 확인하여 해결하는 것과 일반적인 소프트웨어 업데이트 반환 코드 및 상태 메시지를 잘 아는 것이 중요합니다.

일반적인 문제로는 다음 사항들이 있습니다.

-   디스크 공간 부족: 클라이언트 컴퓨터의 사용 가능한 디스크 공간은 10MB 이상이어야 합니다.
-   만료된 XML 파서 버전: SFP(시스템 파일 보호) 구성에서 검색된 경우 최소 필요 버전은 MSXML 3.0 SP2입니다. SFP가 XML 파서 파일용으로 적합하지 않으면 XML 3.0 SP4가 필수 버전이 되며 자동으로 업그레이드됩니다. SFP 구성은 업데이트되지 않습니다.
-   설치 보급 알림이 필요한 검색 도구 보급 알림보다 먼저 실행되었습니다. 따라서 소프트웨어 업데이트 카탈로그를 사용할 수 없으므로 설치 에이전트가 실패합니다.

표 4: 소프트웨어 업데이트 보고서

| 보고서 이름                                                             | 보고서 범주                       |
|-------------------------------------------------------------------------|-----------------------------------|
| 제품별 호환                                                             | 소프트웨어 업데이트 - 호환        |
| 소프트웨어 ID별 호환                                                    | 소프트웨어 업데이트 - 호환        |
| 특정 소프트웨어 업데이트를 적용할 수 있는 컴퓨터                        | 소프트웨어 업데이트 - 호환        |
| 특정 컴퓨터의 소프트웨어 업데이트                                       | 소프트웨어 업데이트 - 호환        |
| 아직 인증되지 않은 소프트웨어 업데이트                                  | 소프트웨어 업데이트 - 호환        |
| 소프트웨어 업데이트 및 적용할 수 있는 컴퓨터와 설치된 컴퓨터 수         | 소프트웨어 업데이트 - 호환        |
| 특정 소프트웨어 업데이트 배포 상태의 모든 컴퓨터                        | 소프트웨어 업데이트 - 배포 상태   |
| 소프트웨어 업데이트의 배포 상태 요약                                    | 소프트웨어 업데이트 - 배포 상태   |
| 소프트웨어 업데이트 ID별 소프트웨어 업데이트 배포 상태                  | 소프트웨어 업데이트 - 배포 상태   |
| 배포하지 못한 소프트웨어 업데이트에 대한 요약                           | 소프트웨어 업데이트 - 배포 상태   |
| 지정한 보급 알림에 대한 소프트웨어 업데이트 오류 메시지가 반환된 컴퓨터 | 소프트웨어 업데이트 - 인프라 상태 |
| 소프트웨어 업데이트 상태                                                | 소프트웨어 업데이트 - 인프라 상태 |
| 지정한 날 수 이내의 특정 컴퓨터에 대한 소프트웨어 업데이트 상태 메시지  | 소프트웨어 업데이트 - 인프라 상태 |

#### 패키지 다시 보급 알림

다음 설명에 따라 패키지를 쉽게 다시 보급할 수 있습니다.

-   기존 보급 알림에 추가 일정을 추가하여 같은 패키지를 다시 보낼 수 있습니다. 이 절차에서는 클라이언트가 이전에 패키지를 받아서 실행했더라도 다시 설치하게 됩니다.
-   보급 알림에 다른 일정을 추가하여 동일한 보급 알림이 다시 실행되도록 유지할 수 있습니다. 이 방법은 실습용 컴퓨터에서 테스트 작업을 수행할 때 패키지를 빨리 다시 보내야 할 경우 효과적입니다. 이 절차는 소프트웨어 업데이트를 프로덕션 환경에 배포하기 전에 적절히 테스트하는 데 도움이 될 수 있습니다. 작업 환경으로 보내진 새 컴퓨터에 패치가 적용되도록 하는 데도 좋은 방법이 됩니다.
-   보급 알림을 마우스 오른쪽 단추로 클릭하고 **All Tasks-rerun advertisement**를 선택하여 보급 알림을 쉽게 다시 보낼 수 있습니다.

#### 소프트웨어 업데이트 제거

Microsoft에서 릴리스한 소프트웨어 업데이트 중 일부는 제거 경로를 제공하지만 그렇지 않은 경우도 있습니다. 보안 게시판의 기술적인 세부 사항을 검토하여 제거할 수 있는 항목을 확인해야 합니다. 이 작업은 패치 관리 프로세스의 확인 단계 중 수행되었어야 하는 작업입니다.

SMS를 사용하여 소프트웨어 업데이트를 제거하려면 제거 명령을 알아야 합니다. Microsoft 업데이트는 제거가 가능한 경우 제거 명령을 포함하여 일반적으로 레지스트리를 참조합니다.

-   **소프트웨어 업데이트를 제거하려면 다음을 수행합니다.**
    1.  새 보급 알림을 사용하여 레지스트리에서 관련 정보를 검색하는 SMS 패키지와 스크립트를 만듭니다.
    2.  위 레지스트리에서 검색한 정보를 기반으로 관련 컬렉션 규칙을 만듭니다. 소프트웨어 업데이트에서 검색 도구를 통한 검색을 제공하지 않으면 일반적으로 소프트웨어 업데이트 인벤토리 데이터를 컬렉션 규칙으로 사용할 수 있습니다. 이 데이터가 없으면 사용자 지정 스크립트 또는 SMS\_def.mof에 대한 변경이 있어야 필요한 대상 세부 사항을 얻을 수 있습니다.
    3.  제거 명령을 실행하는 스크립트가 포함된 SMS 패키지를 만듭니다. 무인 제거를 수행하는 데 필요한 명령줄 옵션을 알아 두십시오.
    4.  SMS 보급 알림 절차를 사용하여 릴리스를 배포하는 방법과 동일한 방법으로 이 패키지를 배포합니다.

**참고:** 최종 사용자에게 영향을 주지 않고(다시 부팅 없음) IT 담당자가 배포를 연습하고 결과를 평가할 수 있는 종합적인 소프트웨어 업데이트를 사용할 것을 고려하십시오.

[](#mainsection)[페이지 위쪽](#mainsection)
