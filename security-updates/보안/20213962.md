---
TOCTitle: 관리되지 않는 클라이언트로부터 네트워크 보호
Title: 관리되지 않는 클라이언트로부터 네트워크 보호
ms:assetid: '9a90dd07-0efb-4151-bf99-629448130645'
ms:contentKeyID: 20213962
ms:mtpsurl: 'https://technet.microsoft.com/ko-kr/library/Cc875843(v=TechNet.10)'
---

관리되지 않는 클라이언트로부터 네트워크 보호
============================================

게시 날짜: 2006년 8월 29일

##### 이 페이지에서

[](#efaa)[소개](#efaa)
[](#eeaa)[정의](#eeaa)
[](#edaa)[문제점](#edaa)
[](#ecaa)[솔루션](#ecaa)
[](#ebaa)[요약](#ebaa)
[](#eaaa)[부록 A: 네트워크 액세스 보호](#eaaa)

### 소개

이 문서에서는 중소 기업을 위한 보안 지침을 다룹니다. 다음 정보는 보다 안전하고 생산적인 컴퓨팅 환경을 구축할 수 있도록 도움을 줍니다.

#### 요약

오늘날과 같이 보안이 중요시되는 환경에서 중소 기업의 네트워크와 해당 데이터를 보호하기 위한 심층적인 접근 방법을 모색하는 것은 매우 복잡한 문제입니다. 경계 방어나 바이러스 백신 제품에 의존하는 것만으로는 이제 네트워크 자산 및 기밀 정보를 완전하게 보호할 수 없습니다. 오늘날의 보안 회사나 전문가들은 그것이 고의적이든 실수이든 내부 네트워크 위험이 외부 위협보다 훨씬 더 위험할 수 있다는 사실에 주목합니다.

중소 기업에 위험을 초래하는 수많은 취약점을 해결하기 위해 패치 관리, 악성 프로그램 방지 솔루션 및 관리 방안 수립과 같은 형태로 엄청난 시간 및 자원의 투자가 이 부분에 집중되고 있습니다. 이러한 투자가 기업 내에서 전반적으로 사용되고 투자의 효율을 극대화할 수 있으려면 기업이 보안 정책을 효율적으로 적용할 수 있는 방법을 찾아야 합니다.

무허가 컴퓨터는 수립된 보안 정책에 대한 준수 여부를 확인할 수 없기 때문에 실제적인 위협으로 간주되지 않는 시스템입니다. 따라서 무허가 컴퓨터는 시스템 관리자나 보안 전문가들에게 골칫거리가 될 수 있습니다. 규정을 준수하지 않는 시스템은 악성 프로그램 감염에 취약할 뿐만 아니라 공격을 받을 수 있는 잠재적인 기반이 되는 등 수많은 위험을 초래합니다. 일반적으로 규정을 준수하지 않는 시스템을 관리하거나 이에 적법한 규정을 적용하기란 쉽지 않습니다.

이 문서에서는 보안 정책을 준수하도록 하는 데 도움이 될 수 있는 몇 가지의 효율적인 방법을 설명합니다. 이 접근 방법은 위험 관리 노력의 이점을 최대화하고 중소 기업 네트워크에 추가적인 보안 계층을 제공하여 신뢰할 수 없거나 관리되지 않는 컴퓨터와 연관된 위험을 줄일 수 있도록 도와줍니다.

#### 개요

이 문서는 네 개의 주요 섹션으로 구성되어 있으며, 각각 관리되지 않는 컴퓨터로부터 중소 기업 네트워크를 보호하는 것과 관련된 개념 및 원칙을 보다 자세히 설명하고 있습니다. 이 네 개의 주요 섹션은 다음과 같이 요약할 수 있습니다.

##### 소개

이 섹션에서는 문서의 프레임워크에 대한 개요 및 문서 대상에 대한 몇 가지 정보를 비롯한 문서의 개요를 제공합니다.

##### 정의

이 섹션에서는 문서에서 논의되는 솔루션을 이해하는 데 유용한 일부 세부 정보 및 정의를 설명합니다.

##### 문제점

이 섹션에서는 관리되지 않고 신뢰할 수 없는 컴퓨터로부터 시스템을 보호하는 방법을 결정할 때 중소 기업에서 해결해야 하는 몇 가지 일반적인 문제에 대해 설명합니다. 이 섹션은 이 문서에서 논의하는 문제점에 대한 배경 정보를 제공합니다.

##### 솔루션

이 섹션에서는 가능한 접근 방법을 진단하고 문제점 해결을 위한 계획 수립 시 발생할 수 있는 문제점을 논의함으로써 관리되지 않는 컴퓨터로 인한 문제점을 해결하는 데 도움이 되는 솔루션에 대해 다룹니다. 또한 배포 및 관리 방법에 대한 일부 정보도 제공합니다.

#### 이 가이드를 읽어야 할 사람

이 기술 문서는 기술 전문가와 기술 관리자가 관리되지 않는 장치로 인해 발생하는 위협을 사전에 인식함으로써 중소 기업 네트워크를 보호하기 위한 의사 결정을 내리는 데 도움을 주기 위해 작성되었습니다. 기술 관련 지식이 없는 독자인 경우에는 이 문서를 참조하여 특정 보안 문제에 대한 이해도를 높일 수는 있지만, 다음과 같은 기본 지식이 있으면 이 문서에서 논의되는 주제를 완벽하게 이해하고 적용할 수 있습니다.

이 문서에서 논의되는 기술은 다음과 같습니다.

-   IEEE 802.1X 인증

-   IPsec 정책

-   네트워크 보안

-   Microsoft® Systems Management Server 2003

-   Microsoft Windows Server™ 2003

-   Active Directory® 디렉터리 서비스

-   Microsoft Operations Management Server

-   Microsoft IAS(Internet Authentication Service)

-   RADIUS 인증

[](#mainsection)[페이지 위쪽](#mainsection)

### 정의

이 가이드에서는 MOF(Microsoft Operations Framework) 프로세스 모델과 함께 MOF 보안 관리 SMF(Service Management Function)를 사용합니다.

특히 이 문서의 솔루션에서는 관리되지 않는 컴퓨터가 초래하는 위협으로부터 네트워크 보안을 강화하는 데 선형 배포 접근 방법이 아닌 지속적인 프로세스 접근 방법을 사용할 것을 권장합니다.

다시 말해서 이러한 솔루션을 적용하려면 아래 그림에 표시된 단계를 수행해야 합니다.

![](images/Cc875843.PNFUC01(ko-kr,TechNet.10).gif)

**그림 1. MOF 적용**

그림에서와 같이, 관리되지 않는 시스템으로 인한 보안 문제에 대한 모든 응답은 단지 계획하고 배포하는 것이 아니라 지속적으로 테스트하고 조정하는 프로세스여야 합니다. 중소 기업 네트워크에 영향을 줄 수 있는 위협은 항상 변하기 때문에 기업 네트워크를 보호하는 시스템 또한 그러한 위협에 맞게 지속적으로 변모해야 합니다.

이 문서에서 논의되는 솔루션의 적용은 보안 관리 SMF에 일치합니다. 보안 관리 SMF는 다음과 같이 요약할 수 있습니다.

-   기업 노출 진단 및 보호할 자산 확인

-   안전하지 않은 장치가 유발하는 위험을 허용 가능한 수준까지 줄일 수 있는 방법 확인

-   보안 위험 완화 계획 수립

-   보안 메커니즘의 효율성 모니터링

-   효율성 및 보안 요구 사항을 정기적으로 재평가

MOF에 대한 자세한 내용을 보려면 Microsoft TechNet의 [MOF(Microsoft Operations Framework)](http://www.microsoft.com/korea/technet/itsolutions/cits/mo/mof/default.mspx) 웹 사이트(http://www.microsoft.com/korea/technet/itsolutions/cits/mo/mof/default.mspx)를 참조하십시오.

보안 관리 SMF에 대한 자세한 내용은 [Security Management Functions (영문)](http://go.microsoft.com/fwlink/?linkid=37696) 페이지(http://go.Microsoft.com/fwlink/?LinkId=37696)를 참조하십시오.

위험 관리란 기업 내에서 허용 가능한 위험 수준을 결정하고, 현재의 위험을 진단하고, 허용 가능한 위험 수준에 도달하기 위한 방법을 찾고, 위험을 관리하는 프로세스를 말합니다. 이 문서에서도 일부 위험 관리 개념에 대해 설명하기는 하지만 위험 관리는 별도로 심층적인 연구가 필요한 주제입니다. 위험 분석 및 진단에 대한 자세한 내용은 [보안 위험 관리 가이드](http://www.microsoft.com/korea/technet/security/guidance/secrisk/srsgch01.asp) (http://www.microsoft.com/korea/technet/security/guidance/secrisk/srsgch01.asp)를 참조하십시오.

[](#mainsection)[페이지 위쪽](#mainsection)

### 문제점

관리되지 않는 컴퓨터로부터의 보호와 관련된 문제점은 다음과 같습니다.

-   관리되지 않는 컴퓨터가 네트워크 리소스에 액세스하지 못하도록 막는 방법

-   로밍 컴퓨터를 최신으로 유지하고 정책을 준수하도록 하는 방법

-   네트워크에 원격으로 연결된 컴퓨터에 대해 기존의 보안 정책을 적용하는 방법

-   네트워크를 악의적인 무선 장치로부터 보호하는 방법

-   협력업체 랩톱이나 개인 장치와 같은 관리되지 않는 시스템이 네트워크에 연결되었을 때 이를 탐지하는 방법

-   팜톱이나 핸드헬드와 같은 모바일 장치로부터 보호를 제공하는 방법

[](#mainsection)[페이지 위쪽](#mainsection)

### 솔루션

"문제점" 섹션에는 관리되지 않는 무허가 컴퓨터가 네트워크에 초래하는 위협으로부터의 보호 방법을 고려할 때 설명되어야 하는 여러 요인들이 나열되어 있습니다. 일반적인 내부 유선 네트워크 보호뿐만 아니라 무선 네트워크 및 모든 원격 액세스 경로를 보호할 수 있는 단계가 수행되어야 합니다. 악의적인 장치가 네트워크에 연결될 수 있는 모든 가능성을 다룰 수 있도록 솔루션의 범위는 포괄적이어야 합니다.

다음 섹션의 설명에서는 다음과 같은 접근 방법을 통해 나열된 문제점을 처리합니다.

-   IPsec 도메인 및 서버 격리를 사용하여 관리되지 않는 컴퓨터가 네트워크 리소스에 액세스하지 못하도록 방지

-   VPN 격리를 사용하여 네트워크에 원격으로 연결된 컴퓨터에 대해 보안 정책 적용

-   802.1X 인증을 사용하여 신뢰할 수 없는 무선 장치로부터 보호

-   SMS를 사용하여 관리되지 않는 컴퓨터가 네트워크에 연결되었을 때 이를 탐지

**참고** 이 문서에서는 독자가 중소 기업 도메인 구조 내에 있는 구성원 컴퓨터를 기존의 보안 및 패치 요건에 맞도록 설정하고 비규격 장치가 규정을 준수하도록 관리하며 이에 대한 보호를 제공할 수 있는 프로세스를 구현했다고 가정합니다. 컴퓨터가 규정을 준수하도록 유도하는 방법이나 WSUS 또는 SMS의 패치 관리 기능과 같은 자동 보안 업데이트 메커니즘을 사용하는 방법에 대한 논의는 이 문서에서 다루지 않습니다.

#### 평가

이 섹션에서는 관리되지 않는 컴퓨터가 중소 기업에 유발할 수 있는 문제점을 해결하는 데 도움이 되는 일부 가능한 응답을 소개합니다. 또한 이러한 응답을 취하기 전에 내려져야 할 일부 의사 결정에 대해서도 논의합니다. 논의되는 각각의 응답은 중소 기업 네트워크의 네트워크 보안 수준을 향상시키는 데 도움이 됩니다. 그러나 포괄적인 심층 방어 접근 방법의 일부로서 응답을 결합하여 구현하면 "문제점" 섹션에서 설명하는 문제점에 대해 보다 강력한 응답을 작성할 수 있습니다.

##### IPsec을 사용하여 도메인과 서버 격리

컴퓨터와 네트워크의 물리적 격리는 새로운 개념이 아닙니다. 이 방법은 오랫동안 다양한 형태로 시도되어 왔으며 개발 및 테스트 네트워크에서는 가장 일반적으로 사용됩니다. 그러나 예전과 같은 물리적 격리 방법으로는 관리되는 시스템을 잠재적으로 손상된 관리되지 않는 장치로부터 보호하는 데 한계가 있습니다. 이것은 모바일 컴퓨팅이 보편화되고 있고 유연성을 갖춘 자동화된 솔루션에 대한 요구가 높아지는 현대 기업 네트워크 환경에서는 더욱 그러합니다. 다음 표에서는 과거에 사용되었던 일반적인 물리적 격리 방법에 대한 개요와 시스템 보호 측면에서 이 방법을 사용할 때의 문제점을 설명합니다.

**표 1. 네트워크 격리 접근 방법**

 
<table style="border:1px solid black;">
<colgroup>
<col width="33%" />
<col width="33%" />
<col width="33%" />
</colgroup>
<thead>
<tr class="header">
<th>OSI 계층</th>
<th>접근 방법</th>
<th>문제점</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="border:1px solid black;">계층 1</td>
<td style="border:1px solid black;">신뢰할 수 있는 네트워크로부터 격리할 필요가 있는 세그먼트에 대해 별도의 케이블 연결을 사용합니다.</td>
<td style="border:1px solid black;"><ul>
<li>새로운 각각의 연결에 대해 새 케이블을 사용해야 하는 것과 관련된 비용 발생</li>
<li>사용자 이동에 따라 새 케이블을 관리해야 하는 관리 오버헤드 증가</li>
<li>비즈니스 규모 확대 시 유연성이 떨어지며 관리가 쉽지 않음</li>
<li>높은 관리 요구 사항으로 인한 부주의 및 오류 가능성 증가</li>
</ul></td>
</tr>
<tr class="even">
<td style="border:1px solid black;">계층 2</td>
<td style="border:1px solid black;">VLAN을 사용하여 신뢰할 수 있는 네트워크로부터 격리된 논리적인 서브넷을 만듭니다.</td>
<td style="border:1px solid black;"><ul>
<li>VLAN 지원을 위한 스위치 패브릭 업데이트 비용 증가</li>
<li>네트워크 변경 내용 및 사용자 이동 추적, 게스트 연결 요청에 대한 응답에 따른 관리 오버헤드 증가</li>
<li>여러 명의 사용자가 이동하거나 모바일 장치가 사용되는 경우 부주의 및 오류 가능성 증가</li>
</ul></td>
</tr>
</tbody>
</table>
 

이 표에서 설명하는 바와 같이, 현대 기업 네트워크에서 관리되지 않는 시스템으로부터 보호 받을 수 있는 보안 표준을 적용하려면 보다 유연한 솔루션이 필요합니다. 이러한 문제점을 해결하기 위한 일부 타사 솔루션이 나와 있기는 하지만 이러한 솔루션을 적용하려면 관리되는 모든 워크스테이션에서 클라이언트측 설치가 필요하며 네트워크에 복잡한 계층을 추가해야 합니다. 다행히 Microsoft Windows의 현재 버전에는 소프트웨어를 추가로 설치하거나 관리를 위한 교육을 별도로 받지 않아도 이러한 문제점을 해결하는 데 도움을 주는 기본 제공 기능이 포함되어 있습니다.

Microsoft 서버 및 도메인 격리를 사용하면 IT 관리자가 기본적으로 제공되는 Active Directory 그룹 정책 및 IPsec을 활용하여 TCP/IP 통신을 제한할 수 있습니다. 이 방법을 사용하면 다음과 같은 이점이 있습니다.

-   OSI 모델의 네트워크 계층을 사용하기 때문에 스위치 및 라우터 경계를 확장할 수 있습니다.

-   스위치 패브릭 및 물리적 네트워크 제한에 영향을 받지 않습니다.

-   Windows 기반 컴퓨터에서 기본적으로 제공되는 인증 기능을 활용하여 비용을 절감할 수 있습니다.

-   자동화 프로세스이므로 네트워크 변경이나 사용자 이동에 따른 지속적인 유지 관리가 필요하지 않습니다.

-   신뢰할 수 있는 컴퓨터를 인증하고 신뢰할 수 있는 시스템 간 통신을 암호화할 수 있습니다.

-   관리되지 않는 장치로부터의 연결을 거부하여 보안 정책을 적용합니다.

-   감사 및 리소스 관리를 향상시킬 수 있습니다.

-   공격이 발생하는 경우 특정 리소스를 신속하게 격리합니다.

안전한 통신을 위한 IPsec의 사용에 대한 일반적인 우려는 최근 개발자들의 노력에 의해 해소되었습니다. 특히 NAT(네트워크 주소 변환)는 Windows Server 2003 및 서비스 팩 2(SP2)가 설치된 Microsoft Windows XP와 같이 현재 버전의 Microsoft Windows에서 사용할 수 있는 NAT Traversal 기능으로 인해 더 이상 문제가 되지 않습니다. 또한 IPsec이 불가능한 플랫폼도 구성 가능한 예외 목록 및/또는 폴백(fall back) 예외를 통해 지원이 가능하므로 그러한 시스템과 일반 텍스트 통신을 할 수 있습니다.

이 문서에서 설명한 것과 같이 도메인 및 서버 격리 솔루션은 Microsoft의 자체 내부 네트워크에서도 사용됩니다. Microsoft에서는 이러한 솔루션을 고객에게 추천하는 동시에 이 솔루션이 제공하는 추가적인 보안 수준에 주력하고 신뢰할 수 있는 컴퓨팅을 위해 네트워크 보안과 관리 효율성을 높일 수 있도록 이 방법에 대한 장기화된 지원을 약속합니다.

###### 도메인 및 서버 격리 이해

간단히 말해서, 격리된 네트워크를 만든다는 것은 비즈니스 네트워크에서 다양한 유형의 컴퓨터를 해당하는 액세스 유형에 따라 구분하는 것을 말합니다. 이 경우 모든 유형은 관리되는 유형과 관리되지 않는 유형의 두 가지로 나눌 수 있습니다. 네트워크 격리의 기능적 수준에 도달하려면 두 가지 기본 조건이 충족되어야 합니다. 이 조건은 다음과 같습니다.

-   격리된 네트워크에 있는 컴퓨터는 신뢰할 수 있는 네트워크 외부에 있는 컴퓨터를 포함한 전체 네트워크의 모든 컴퓨터와 통신할 수 있습니다.

-   격리된 네트워크 외부에 있는 컴퓨터는 신뢰할 수 있는 네트워크 외부의 다른 컴퓨터와만 통신할 수 있으며 신뢰할 수 있는 네트워크 내부의 컴퓨터와는 통신할 수 없습니다.

IPsec 도메인 및 서버 격리는 그룹 정책 설정을 사용하여 기존 도메인 구조를 활용합니다. 격리된 네트워크를 만드는 데 필요한 모든 요소는 Windows XP, Windows 2000 Server 및 Windows Server 2003을 사용하는 컴퓨터에 이미 있습니다. 필요한 그룹 정책 설정이 구성된 경우 새 컴퓨터를 도메인에 추가하기만 하면 격리된 네트워크에 새 컴퓨터를 삽입할 수 있습니다.

![](images/Cc875843.PNFUC02(ko-kr,TechNet.10).gif)

**그림 2. Active Directory 도메인을 사용하여 네트워크 격리**

앞의 그림에서처럼 도메인의 구성원이 아닌 컴퓨터는 신뢰할 수 없는 컴퓨터로 간주되어 격리된 네트워크 외부에 있게 됩니다. 격리된 네트워크 외부에 있는 모든 시스템은 IPsec 통신을 시작할 수 없으며 따라서 격리된 도메인 내부의 모든 시스템과 연결할 수 없습니다. 그러나 격리된 도메인의 구성원은 격리된 네트워크 외부의 장치와 일반 텍스트 통신을 수행할 수 있습니다.

물론 많은 기업 내에는 Active Directory 도메인 내에 없거나 특정 이유로 IPsec을 사용할 수 없지만 격리된 네트워크 내의 시스템과 통신해야 하는 비즈니스 요구를 가진 관리되고 신뢰할 수 있는 컴퓨터와 서버가 있습니다. 이러한 문제를 해결하기 위해 다음 그림에서와 같이 예외 목록을 사용하여 격리된 다른 그룹(또는 경계 그룹)을 만들 수 있습니다.

[![](images/Cc875843.PNFUC03(ko-kr,TechNet.10).gif)](https://technet.microsoft.com/ko-kr/cc875843.pnfuc03_big(ko-kr,technet.10).gif)

**그림 3. 네트워크 격리 및 경계 그룹**

이와 같은 네트워크 격리 모델을 사용하면 비즈니스 네트워크의 보안 관련 부담을 줄일 수 있습니다. 그러나 이 솔루션 자체로는 신뢰할 수 있는 시스템이 지속적으로 표준을 준수할 수 있다고 보장할 수 없습니다. 즉, 이 솔루션 하나만으로는 종합적인 네트워크 보안 솔루션이 될 수 없습니다. 이 솔루션은 다른 솔루션과 결합하여 보다 큰 종합적인 보안 프로세스의 일부가 될 때 유용하며 이 경우 오늘날의 중소 기업 네트워크가 해결해야 할 위험을 줄이는 데 도움이 될 수 있습니다. 특히 WSUS, SMS, MOM과 같은 기타 보안 솔루션과 함께 이 격리 방법을 사용하면 격리된 네트워크 내에서 보안 정책을 적용할 수 있습니다.

기타 Active Directory 기반 보안 솔루션은 작업을 자동화하여 신뢰할 수 있는 격리 네트워크 내에서 보안 정책을 지속적으로 준수하도록 할 수 있습니다. 그러나 경계 그룹 내의 컴퓨터가 격리된 네트워크 솔루션에서 취약 지점이 되지 않도록 하려면 경계 그룹에 대해 다른 방법을 적용해야 합니다. 경계 그룹 내의 컴퓨터는 경계 그룹에 추가하기 전에 규정을 준수하는지 확인해야 하며 신뢰할 수 있는 시스템 보안 정책 요건에 지속적으로 부합하도록 특정 정책 및 방법을 연관시켜야 합니다.

###### IPsec 이해

IPsec은 일반적인 정책 기반 IP 계층 보안 메커니즘을 제공하는 인터넷 프로토콜 보안 표준으로서 호스트 간 인증을 제공하는 데 이상적입니다. IPsec 정책은 호스트 시스템에서 인바운드 및 아웃바운드 트래픽의 흐름을 제어하는 보안 규칙 및 설정을 가진 것으로 정의됩니다. 이러한 정책은 도메인 구성원에게 정책을 할당하기 위해 그룹 정책 개체(GPO)를 사용하여 Active Directory의 중앙에서 관리됩니다. IPsec 정책은 도메인 구성원 간의 보안 통신을 설정하는 데 도움을 주는데, 바로 이점이 이 솔루션의 기초가 됩니다.

IPsec은 IKE(인터넷 키 교환) 협상 프로토콜을 사용하여 두 호스트 간의 옵션을 협상하고 IPsec과 안전하게 통신하는 방법을 결정합니다. 두 호스트 간에 작성된 협의 및 이 협상 방법을 정의하는 여러 매개 변수를 보안 연계(SA)라고 합니다. Microsoft Windows에서는 다음 세 가지 IKE 방법 중 하나를 사용할 수 있습니다.

-   Kerberos 버전 5 인증 프로토콜

-   해당하는 RSA 키 쌍이 있는 X.509 디지털 인증서

-   암호 문구를 사용하여 미리 공유한 키

**참고** 인증 방법으로 PKI를 사용할 수 있지만 IKE 협상 프로토콜의 Windows 2000 도메인 인증(Kerberos) 통합으로 인해 PKI 접근 방법은 권장되지 않습니다.

IKE 협상 요청에 응답하지 않는 컴퓨터와 통신할 수 있도록 Windows IKE 협상을 구성할 수 있습니다. 이 기능을 폴백이라고 하는데, 이는 롤아웃 시 필수적일 뿐만 아니라 경계 그룹에 있는 시스템이 격리된 네트워크 구성원과 통신하도록 허용하기 때문에 이러한 상황에서도 유용합니다. IPsec에서 보호할 수 없는 통신을 보안되지 않은 보안 연계(soft security association)라고 하며 보안 로그 성공 감사 이벤트로서 기록됩니다.

IPsec은 인증 외에도 해당 AH(인증 헤더) 및 ESP(캡슐화 보안 페이로드) 옵션을 사용하여 무결성 및 네트워크 트래픽의 암호화 문제를 해결하는 기능이 있습니다. AH를 사용하면 패킷이 전송 중에 수정되지 않도록 할 수 있지만 이 작업에 헤더를 사용하면 NAT(네트워크 주소 변환)와 호환되지 않습니다. 일반적으로 트래픽을 암호화하는 데 사용되는 ESP는 널 암호화 모드(ESP/null)에서 사용될 수 있는데, 이는 NAT와 호환되는 데이터 무결성 확인을 고려합니다.

또한 IPsec은 전송 또는 터널의 두 가지 모드로 작동할 수 있습니다. IPsec 전송 모드는 두 개의 호스트 간 트래픽을 보호하는 데 권장되는 방법입니다. 이 모드에서는 원래 IP 헤더 뒤에 헤더를 삽입한 후 AH 또는 ESP를 사용하여 패킷의 나머지 부분을 암호화하여 작동합니다. 터널 모드는 일반적으로 원래 패킷 및 IP 헤더가 완전히 캡슐화되어 원래 IP 헤더가 새 IPsec 헤더로 대체된 게이트웨이 간 VPN 터널에서 사용됩니다.

자세한 내용은 Microsoft TechNet의 [Server and Domain Isolation (영문)](http://www.microsoft.com/technet/itsolutions/network/sdiso/default.mspx)페이지(www.microsoft.com/technet/itsolutions/network/sdiso/default.mspx)를 참조하십시오.

###### 강력한 방어

![](images/Cc875843.PNFUC04(ko-kr,TechNet.10).gif)

**그림 4. 논리적 격리를 통한 강력한 방어 모델**

앞의 그림은 논리적 격리가 강력한 방어 모델에 부합되는 방식을 설명해 줍니다. 도메인 및 서버 격리가 호스트 기반 방화벽과 같이 호스트 컴퓨터 보안에 초점을 맞추고 있는 것처럼 보이지만 이는 해당 IPsec을 사용하여 네트워크 통신 영역 내에 상주합니다. 이 솔루션은 호스트와 내부 네트워크 간의 간격을 넓히지만 이것은 '논리적 격리' 솔루션이므로 양쪽 어디에도 전적으로 상주하지 않습니다. 따라서 다음과 같은 기능은 해당 범위 밖에 있습니다.

-   논리적 격리는 라우터와 같은 네트워크 장치를 보호할 수 없습니다.

-   논리적 격리는 무선 암호화를 위한 802.11i WPA 및 무선 액세스 제어를 위한 802.1x EAP-TLS에서 수행하는 것과 같은 네트워크 링크를 보호할 수 없습니다.

-   논리적 격리는 신뢰할 수 있는 시스템 자격 증명 및 도메인 기반 IPsec 정책을 사용해서만 시스템을 제어할 수 있기 때문에 네트워크의 모든 호스트에 대한 보안을 제공할 수 없습니다.

-   논리적 격리에는 웹 응용 프로그램에 대해 HTTPS 및 SSL이 수행하는 것과 같이 응용 프로그램 수준 경로를 보호할 수 있는 자동 구성 가능한 방법이 없으며 적합하지도 않습니다.

종합적이고 강력한 방어 솔루션에서 논리적 격리가 어떤 역할을 수행하는지 이해하는 것이 중요합니다. 이 솔루션은 자체적으로 중소 기업 인프라의 모든 측면을 보호할 수 없습니다. 그러나 종합적인 솔루션의 일부로 사용할 때에는 매우 중요한 역할을 수행할 수 있습니다.

##### VPN 격리 서비스를 사용하여 관리되지 않는 원격 컴퓨터로부터 보호

VPN 솔루션을 사용하여 비즈니스 네트워크에 액세스하는 원격 시스템은 보안 정책 관점에서 고유한 문제점을 야기시킵니다. 대부분의 원격 액세스 솔루션은 원격 사용자의 자격 증명만을 검사하고 원격 컴퓨터가 보안 정책을 준수하는지 여부는 확인하지 않습니다. 이러한 유효성 검사 방법은 오래된 악성 프로그램 방지 서명 파일이나 보안 업데이트 수준, 부적합한 라우팅 설정, 방화벽 보호 미흡과 같은 문제점과 관련된 위협으로부터 네트워크를 보호하려는 노력을 무력화시킬 수 있기 때문에 문제가 될 수 있습니다.

Microsoft Windows Server 2003 기반 네트워크 액세스 격리 제어(Network Access Quarantine Control)는 연결된 컴퓨터의 구성 상태가 현재의 보안 정책 표준을 준수하는 것으로 확인될 때까지 VPN에 대한 원격 액세스를 지연시켜 이 문제를 해결합니다.

###### VPN 격리 서비스 이해

네트워크 액세스 격리 제어는 Windows Server 2003 제품군에서 제공되는 기능으로 연결 중인 원격 컴퓨터가 관리자가 구성한 스크립트에 의해 검사 및 검증될 때까지 일반적인 원격 액세스 서비스를 지연합니다. 보통 원격 세션이 시작되면 사용자가 인증되고 원격 컴퓨터에 IP 주소가 제공되지만 이때 연결은 관리자가 제공한 스크립트가 원격 컴퓨터에서 실행될 때까지 네트워크 액세스가 제한되는 격리 모드로 들어 갑니다. 스크립트가 실행되어 원격 컴퓨터가 구성된 네트워크 정책을 준수한다는 알림이 원격 액세스 서버로 전달되면 격리 모드가 제거되고 원격 컴퓨터의 네트워크 액세스가 허용됩니다.

원격 연결이 격리 모드에 있는 동안에는 해당 연결에 다음과 같은 제한 사항이 적용될 수 있습니다.

-   클라이언트가 시작 또는 수신할 수 있는 트래픽 형식을 제한하도록 일련의 격리 패킷 필터를 구성할 수 있습니다.

-   격리 모드에서 클라이언트가 연결된 상태를 유지할 수 있는 시간을 제한하도록 격리 세션 타이머를 구성할 수 있습니다.

네트워크 액세스 격리 제어는 보안 정책 적용을 돕고 신뢰할 수 없는 시스템이 신뢰할 수 있는 네트워크에 연결되지 못하도록 하는 포괄적인 보안 솔루션의 일부로 사용될 수 있습니다. 그러나 그 자체만으로는 보안 솔루션이 될 수 없으며 유효한 자격 증명을 얻은 악의적인 사용자의 연결을 막을 수 없습니다.

**참고** 네트워크 액세스 격리 제어는 Windows Server Longhorn 운영 체제 제품군에 포함될 새로운 정책 적용 플랫폼인 NAP(Network Access Protection)와 다릅니다. NAP에 대한 자세한 내용은 이 문서의 끝 부분에서 "부록 A: NAP(Network Access Protection)"를 참조하십시오.

###### 네트워크 액세스 격리 제어 구성 요소

[![](images/Cc875843.PNFUC05(ko-kr,TechNet.10).gif)](https://technet.microsoft.com/ko-kr/cc875843.pnfuc05_big(ko-kr,technet.10).gif)

**그림 5. Windows 네트워크 액세스 격리 제어 구성 요소**

앞의 그림은 네트워크 액세스 격리 제어를 사용하는 Windows 원격 액세스 솔루션의 일반적인 구성 요소를 보여 줍니다. 이러한 구성 요소는 다음과 같습니다.

-   **격리 호환 원격 액세스 클라이언트** . 이 구성 요소는 Windows Server 2003에서 제공하는 CMAK(연결 관리자 관리 키트)로 작성된 CM 프로필을 지원할 수 있는 Windows 버전 컴퓨터입니다. 이 지원은 Windows 98 Second Edition 이상의 Windows 버전에서 제공합니다. 이 클라이언트 컴퓨터에는 네트워크 정책 요구 사항 스크립트인 알림 구성 요소가 설치되어 있어야 하며 사후 연결 작업으로 이 스크립트를 실행하도록 컴퓨터를 구성해야 합니다.

-   **격리 호환 원격 액세스 서버** . 이 구성 요소는 라우팅 및 원격 액세스를 실행하는 Windows Server 2003 컴퓨터로서, 설치된 수신기 구성 요소와 함께 수신기 구성 요소의 사용, MS-Quarantine-IPFilter 및 MS-Quarantine-Session-Timeout RADIUS 공급업체별 특성(VSA)을 지원합니다.

-   **격리 호환 RADIUS 서버** . 이 구성 요소는 선택적이며 RADIUS 인증이 MS-Quarantine-IPFilter 및 MS-Quarantine-Session-Timeout RADIUS VSA 지원을 위해 Windows Server 2003 및 IAS를 실행하는 원격 액세스 서버에서 구성될 때 사용됩니다.

-   **격리 리소스** . 이 구성 요소는 원격 클라이언트가 격리 모드에 있는 동안 액세스할 수 있는 서버 및 서비스입니다. 일반적으로 이 구성 요소는 클라이언트가 규격을 준수하도록 DNS 서비스, CM 프로필 또는 보안 업데이트 공급자를 제공하는 서버로 구성됩니다.

-   **계정 데이터베이스** . 일반적으로 이 구성 요소는 원격 사용자의 계정이 저장되고 전화 접속 속성이 위치하는 Active Directory 도메인이 됩니다.

-   **격리 원격 액세스 정책** . 원격 액세스 연결 발생과 MS-Quarantine-IPFilter 또는 MS-Quarantine-Session-Timeout 특성을 지정하는 데 필요한 조건을 제공하려면 이 정책이 필요합니다.

###### 강력한 방어

![](images/Cc875843.PNFUC06(ko-kr,TechNet.10).gif)

**그림 6. 강력한 방어 및 네트워크 액세스 격리 제어**

Microsoft의 강력한 방어 모델을 적용하여 볼 때 VPN 격리는 모델의 세 가지 계층인 호스트, 내부 네트워크 및 경계를 확장합니다. 이 솔루션이 직접적으로 클라이언트를 보호하지는 않지만 보안 지침을 따르지 않는 원격 클라이언트로 인해 발생할 수 있는 위협으로부터 서버를 보호하는 데 도움을 줍니다. 또한 원격 클라이언트가 효과적으로 작동할 수 있도록 정책 요구 사항을 충족시키고 업데이트를 최신으로 유지시킴으로써 원격 클라이언트를 간접적으로 보호합니다.

이 외에도 이 솔루션은 네트워크가 올바르게 구성되지 않았을 때 악의적인 원격 컴퓨터가 초래할 수 있는 혼란(예:, 네트워크 성능을 저하시킬 수 있는 악성 프로그램의 전파)으로부터 네트워크 자체를 보호하는 기능을 향상시켜 줍니다. 이 솔루션이 경계에 위치하는 VPN에 대한 공격을 직접적으로 차단하지 못하기 때문에 경계와는 관련이 없어 보이지만 이 솔루션은 침입자가 내부 네트워크의 리소스에 직접 액세스하기 위해 통과해야 하는 또 다른 보안 계층을 제공합니다. 이것은 침입자가 인증 자격 증명을 얻은 경우에도 마찬가지입니다.

##### 802.1X 인증을 사용하여 관리되지 않는 무선 클라이언트로부터 보호

IEEE(Institute of Electrical and Electronic Engineers) 802.1X 표준은 무단 사용으로부터 무선 네트워크를 방어하는 작업에 매우 적합합니다. 간단히 말해서, 컴퓨터가 네트워크에서 통신할 수 있는 권한을 갖도록 구성된 경우가 아니면 통신할 수 없습니다. 이 솔루션이 무선 네트워크에서는 잘 작동하지만 유선 네트워크에서는 이 표준을 그러한 방식으로 사용할 수 있어도 그다지 효율적이지 않습니다. 이러한 제한된 효율성 때문에 이 규범 문서에서는 중소 기업 네트워크 보호에 결합된 접근 방법을 권장합니다. 일반적인 비즈니스 네트워크의 각 측면을 해결하는 데 도움을 주는 가장 효율적인 솔루션들을 결합하여 사용하면 강력한 방어 기능 솔루션을 구현할 수 있습니다.

###### IEEE 802.1X 인증 이해

IEEE 802.1X 인증은 클라이언트와 네트워크 간 상호 인증이 필요하도록 구성할 수 있는 포트 기반 액세스 제어 메커니즘입니다. 구현되었을 때 인증에 실패한 모든 장치는 문제가 되는 네트워크의 통신에 참여할 수 없습니다.

802.1X는 현재 버전의 Microsoft Windows에서 지원하는 다음 세 가지의 변형을 포함하여 여러 변형이 있는 EAP(확장 가능한 인증 프로토콜)를 지원합니다.

-   **EAP-MD5** . 인증 서버에서는 MD5를 사용하여 클라이언트(요청자)에게 문제점을 전송하고 요청자는 이 문제점 요청을 해당하는 ID 및 암호 문구와 결합합니다. 이 응답은 MD5 해시로 변환되어 인증 서버로 다시 전송되고 여기서 응답을 암호화하여 원래 문제점과 일치시킵니다. 이 응답이 일치되면 인증이 발생합니다. 이 방법은 암호 자체가 전송되고 이 암호를 제3자가 가로채서 해독할 수 있기 때문에 대부분의 구현에서 안전하지 않습니다.

-   **PEAP(보호된 EAP)** . PEAP(보호된 EAP)는 서버측 인증서 및 클라이언트의 인증 정보(예: 사용자 이름 및 암호)를 사용하여 상호 인증을 설정합니다. MS-CHAPv2는 이 표준을 Microsoft에서 구현한 것으로, 여기에서는 일반 도메인 계정과 암호 및 RADIUS 서버에 의존하여 이 인증을 설정합니다. 이 방법은 일반적으로 EAP-TLS 방법을 사용하는 데 필요한 추가 인프라 및 관리 요건을 갖추기가 쉽지 않은 소규모 환경에 충분한 보안을 제공합니다.

-   **EAP-TLS** . 이 방법에서는 인증 서버가 요청자에 대해 TLS(Transport Layer Security) 세션을 설정하고 클라이언트에게 디지털 인증서를 보냅니다. 요청자가 이 인증서를 받으면 이에 대한 유효성을 검사하고 응답으로 고유의 인증서를 보냅니다. 그러면 다시 인증 서버에서 이 인증서의 유효성을 검사합니다. 양측이 서로의 인증서를 신뢰하는 경우 인증이 성립됩니다. 이 접근 방법은 PKI 인프라 및 RADIUS 인증 서버를 지원할 수 있는 네트워크에 가장 적합합니다. 또한 이 방법은 특히 802.11i WPA2 표준과 함께 결합하여 사용할 때 무선 네트워크에 사용할 수 있는 가장 안전한 방법입니다.

클라이언트가 인증하기 전에는 인증 서버에 의해 인증될 때까지 인증자(무선 액세스 포인트 또는 네트워크 스위치)에게 의존해야 합니다. 따라서 초기 인증 핸드셰이크 동안 요청자와 인증 서버 간의 모든 통신은 인증자에 의해 전달됩니다. 인증이 완료되면 요청자가 직접 네트워크에 액세스할 수 있습니다.

###### 802.1X가 무선 네트워크에 효율적이지 않은 이유

일반적으로 802.1X가 무선 네트워크의 보안 문제를 해결하기는 하지만 유선 네트워크를 보호하기 위해 이 방법을 구현하는 것과 연관된 몇 가지 문제점이 있습니다. 첫 번째 문제는 802.1X에 무선 네트워크에서의 해당 구현을 지원하는 몇 개의 Active Directory 그룹 정책 개체가 있기는 하지만 유선 네트워크에서의 802.1X 인증을 지원하지 않습니다. 따라서 802.1X에서 이 방법을 구현하려면 엄청난 관리 오버헤드가 필요합니다. 또한 많은 스위치, 네트워크 인쇄 장치 및 기타 유선 네트워크 인프라 장치에서 802.1X를 지원하지 않기 때문에 대부분의 중소 기업 네트워크에서 이 구현을 지원하려면 엄청난 업그레이드 비용을 감당해야 할 수 있습니다.

그러한 구현과 관련된 관리 및 인프라 비용 외에도 무선에 최적화된 이 표준을 유선 네트워크에 사용할 때 발생할 수 있는 일부 보안상의 허점도 존재합니다. 예를 들어, 802.1X 인증은 연결이 설정되고 허브가 802.1X에 숨겨진 경우에만 발생하기 때문에 공격자가 허브를 인증된 컴퓨터 및 "섀도" 컴퓨터와 함께 내부 네트워크에 첨부하고 이를 통해 공격을 수행할 수 있습니다.

**참고** 이러한 특정 단점 및 취약점은 무선 네트워크에 영향을 미치지 않습니다. 802.1X 보안에 관련한 이러한 문제는 유선 네트워크에 사용할 경우에만 발생합니다.

이러한 문제 때문에 도메인 및 서버 격리에는 802.1X가 아닌 IPsec이 권장됩니다. 하지만 그렇다고 해서 중소 기업 네트워크에서 802.1X를 사용할 수 없는 것은 아닙니다. 앞에서 설명한 것과 같이 802.1X는 무선 보안 문제를 해결할 수 있는 중요한 도구이며 IPsec 기반 네트워크 격리 솔루션과 함께 사용하면 보다 높은 수준의 보안을 제공할 수 있습니다.

###### 강력한 방어

![](images/Cc875843.PNFUC07(ko-kr,TechNet.10).gif)

**그림 7. 802.1X 무선 보안을 통한 강력한 방어**

앞의 그림에서 볼 수 있듯이 802.1X 인증을 사용한 무선 보안은 강력한 방어 모델의 네트워크 계층을 차지합니다. 무선 보안이 경계의 범위를 확장하는 것처럼 보이지만 무선 네트워크는 실제로 로컬 네트워크의 일부이며 경계는 인터넷과 같은 외부 네트워크를 보다 중점적으로 처리합니다. 무선 보안 방법의 일부에는 호스트 구성 요소가 있지만 무선 보안은 호스트를 직접 보호하도록 설계되지 않았습니다.

##### SMS를 사용하여 관리되지 않는 시스템 탐지 및 수정

Microsoft SMS(Systems Management Server) 2003은 주로 네트워크의 컴퓨터를 관리하고 자산 인벤토리 정보를 유지 관리하며 보안 정책을 지속적으로 준수할 수 있도록 소프트웨어 및 업데이트를 전달하고 플랫폼과 소프트웨어 설치의 공유성을 관리하는 데 사용됩니다. SMS 2003의 네트워크 검색 및 인벤토리 기능은 신뢰할 수 없는 시스템이 네트워크에 연결되었을 때 이를 탐지할 수 있는 방법을 제공하므로 이 문서에서 설명합니다. 또한 이 기능은 관리되지 않는 컴퓨터 사용에 대한 응답으로 어떤 정책이 구현되었는지에 따라 수정할 수 있는 방법을 제공하기도 합니다.

이 문서에서는 독자가 SMS 및 기타 방법을 사용하여 도메인 구성원 컴퓨터에 모든 보안 업데이트를 최신으로 유지하는 것을 포함한 보안 정책을 적용하도록 기대합니다. 따라서 SMS 2003 및 다른 도구를 사용한 패치 관리에 관련한 내용은 이 문서에서 다루지 않습니다. 이러한 주제 및 기타 SMS 관련 정보에 대한 자세한 내용은 [Patch Management Using Systems Management Server 2003 (영문)](http://www.microsoft.com/technet/itsolutions/cits/mo/swdist/pmsms/2003/pmsms031.mspx) Solution Accelerator(www.microsoft.com/technet/itsolutions/cits/mo/swdist/pmsms/2003/pmsms031.mspx) 또는 [Microsoft Systems Management Server](http://www.microsoft.com/korea/smserver/) 홈 페이지(www.microsoft.com/korea/smserver)를 참조하십시오.

###### 기존 자산 검색 및 문서화

SMS를 이미 구현한 기업의 경우에는 기존 자산에 대한 문서화를 이미 완료했을 수 있고 관리되거나 관리되지 않는 시스템의 인벤토리도 갖추고 있을 수 있습니다. 그러한 인벤토리에는 설계에 의해 또는 해당 클라이언트 유형에 대해 작동하는 에이전트가 없음으로 인해 SMS에서 관리하지 않는 컴퓨터에 대한 보안 업데이트 요구 사항 및 절차 정보가 포함되어 있습니다. 관리되지 않는 이러한 컴퓨터에는 보안 경계(DMZ(완충 영역) 및 차단된 서브넷이라고도 함)에 있는 장치, 테스트 컴퓨터 또는 독립 실행형 장치가 포함될 수 있습니다.

SMS에서 관리하지 않는 장치 목록에 대한 문서화는 보안 요구 사항일 뿐만 아니라 해당 목록을 새로운 인벤토리 정보와 비교하여 새로 검색된 시스템이 허가된 시스템인지 아니면 알 수 없는 시스템인지를 판별하는 정보로 사용할 수 있기 때문에 매우 중요합니다. 그러한 목록을 최신으로 유지하려면 관리되지 않는 새 시스템을 확인 정보, 시스템 보안 유지 및 소유권 할당에 관련된 프로세스를 포함하는 기업 네트워크에 추가하기 위한 적절한 프로세스를 수행해야 합니다.

SMS가 IP 주소와 이름을 제외하고 관리되지 않는 시스템에 대해 많은 정보를 수집하지 못할 수 있지만 이 정보만으로도 새 네트워크 장치가 허가된 것인지 여부를 판별하기에 충분한 경우가 많습니다.

#### 개발

"평가" 섹션에서는 중소 기업 네트워크의 특정 기능을 해결하는 서로 다른 솔루션을 혼합할 때 네트워크를 가장 포괄적으로 보호할 수 있음을 보여 주었습니다. 도메인 및 서버 격리는 유선 네트워크에서 알려지거나 관리되는 컴퓨터만 신뢰할 수 있는 리소스에 액세스할 수 있도록 합니다. VPN 격리는 종종 로컬 네트워크에 연결하는 원격 시스템이 보안 정책을 지속적으로 준수하도록 합니다. 802.1X 인증은 권한이 있는 시스템만 연결을 설정할 수 있도록 무선 네트워크를 보호합니다. 마지막으로 SMS는 신뢰할 수 있는 컴퓨터가 지속적으로 규정을 준수하도록 하며 네트워크에 연결하는 신뢰할 수 없는 유해 컴퓨터를 검색합니다. 이러한 모든 솔루션을 결합하여 권한 없는 연결 및 악의적인 컴퓨터로부터 네트워크를 보호할 수 있습니다.

이러한 솔루션을 구현하기 위한 요건에 대한 설명과 더불어, 이 섹션에서는 각 솔루션이 중소 기업의 각 환경에 가장 알맞은 접근 방법이 될 수 있도록 선결되어야 할 몇 가지 잠재적 문제점을 해결합니다.

##### IPsec을 사용하여 도메인과 서버 격리

IPsec 기반 도메인 및 서버 격리를 구현하기 위한 계획을 전개하려면 이 솔루션이 주어진 네트워크 환경에 적합한지 그리고 계획을 전개하는 데 필요한 정보를 사전에 수집할 수 있는지 여부를 판별해야 합니다. IPsec 네트워크 격리의 개념은 이 문서의 "평가" 섹션에서 소개했습니다. 이 접근 방법의 이점을 알았으므로 그러한 구현과 연관될 수 있는 가능한 문제점과 이러한 이점들을 비교해야 합니다. 이 섹션에서는 IPsec 기반 네트워크 격리의 구현에 관련된 문제와 해당 의사 결정 프로세스를 보조하는 그러한 구현의 요건에 대해 설명합니다.

###### 네트워크 아키텍처 확인

IPsec은 인터넷 프로토콜 자체에 계층화되어 있기 때문에 이 솔루션을 성공적으로 배포하려면 현재 네트워크 인프라 및 트래픽 흐름을 자세하게 이해해야 합니다. IP 주소 지정 계획, 서브넷 레이아웃 및 네트워크 트래픽 패턴에 대한 정보도 확인해야 하지만 효율적인 네트워크 격리 계획을 전개하고 배포하려면 네트워크 세분화 및 현재의 네트워크 트래픽 흐름 모델을 세부적으로 문서화하는 것이 무엇보다 중요합니다.

**참고** 네트워크 환경의 문서화에 대한 세부 정보는 이 문서에서 다루지 않습니다. 그러한 문서의 작성은 종합적인 네트워크 보안에 대한 모든 발의를 성공적으로 이끄는 데 필수적인 요소입니다. 따라서 아직 그러한 문서가 작성되지 않았다면 문서가 완성되기 전까지 이와 같은 프로젝트가 효율적으로 구현되기는 힘듭니다.

네트워크 아키텍처 문서에는 다음과 같은 정보에 대한 현재의 세부 현황이 정확하게 반영되어야 합니다.

-   방화벽 및 부하 분산 기능 세부 정보 및 위치

-   RAM 크기, 제조사/모델 및 MTU 설정을 포함한 네트워크 장치 정보

-   네트워크 트래픽 및 사용률 보고서

-   NAT 사용 방법

-   VLAN 세분화

-   장치 네트워크 연결

-   침입 차단 시스템(IDS) 정보

###### 네트워크 트래픽 흐름 확인

IPsec 기반 네트워크 격리에 영향을 줄 수 있는 장치 및 구성에 관한 정보를 비롯해 네트워크 내부의 네트워크 트래픽 패턴을 검사하는 것이 중요합니다. 이러한 유형의 정보를 수집할 때에는 Windows 이외의 장치(예: Linux 컴퓨터) 또는 Windows 2000 SP4 이전의 Windows 버전을 사용하는 장치가 다른 Windows 기반 시스템과 통신하는 방법과 같은 요인들을 고려해야 합니다. 추가 고려 사항에는 다음 내용이 포함됩니다.

-   메인프레임 통신과 같은 특정 트래픽 유형에 전용되는 서브넷이 있는지 여부

-   위치 간 트래픽이 분리되어야 하는지 여부

-   HR 데이터베이스와의 통신과 같이 암호화가 제공하는 높은 수준의 보안이 필요한 트래픽 유형이 있는지 여부

-   UDP 포트 500 차단과 같이 구현에 영향을 줄 수 있는 보안 장치 또는 방화벽 규칙이 있는지 여부

-   응용 프로그램의 통신 방법 예를 들어, 추가 고려 사항이 필요한 RPC(원격 프로시저 호출)를 사용하는지 여부

-   호스트와 서버 간의 통신 방법 포트/프로토콜 수준 연결을 사용하는지 아니면 광범위한 프로토콜을 통해 여러 세션을 설정하는지 여부

###### Active Directory 구조 확인

IPsec 구현이 Active Directory 구조에 미칠 수 있는 영향을 이해하려면 앞에서 확인된 네트워크 정보 이외에도 Active Directory 포리스트 구조, 도메인 레이아웃, 조직 구성 단위(OU) 설계 및 사이트 토폴로지에 관한 정보를 수집해야 합니다. 이 정보에는 다음 내용이 포함됩니다.

-   포리스트 수

-   도메인 수와 이름

-   신뢰 관계의 수와 유형

-   사이트 수와 이름

-   OU 및 그룹 정책 구조

-   기존의 모든 IPsec 정책 정보(현재 IPsec이 사용 중인 경우)

###### 호스트 확인

수집해야 할 관련 호스트 정보에는 다음 내용이 포함됩니다.

-   컴퓨터 이름

-   IP 주소(특히 정적 주소)

-   MAC 주소

-   서비스 팩 및 핫픽스 수정 수준을 포함한 운영 체제 버전

-   도메인 구성원 자격

-   실제 위치

-   하드웨어 종류 및 역할

###### IPsec 성능 고려 사항 확인

IPsec 구현 계획을 전개할 때에는 몇 가지 성능 계획 고려 사항을 작성해야 합니다. 특히 IPsec 암호화를 사용하려는 경우에는 일정한 호스트 사용량 및 네트워크 오버헤드가 필요하기 때문에 더욱 그러합니다. 고려 사항에는 다음 내용이 포함됩니다.

-   **서버 메모리 사용량** . 각 세션에 5KB의 RAM을 사용할 수 있습니다.

-   **서버,워크스테이션,및 인프라 장치 CPU 사용률** . 이 정보는 특히 서버에 중요합니다. 장치가 이미 과도하게 사용되고 있지는 않은지 확인하십시오.

-   **네트워크 대기 시간 및 이용률** . IPsec을 사용할 때에는 대기 시간이 증가합니다. Microsoft에서 IPsec을 배포했을 때 네트워크 이용률이 1%에서 3%까지 증가했습니다.

-   **NAT의 사용 및 암호화 종류** . AH 통신은 NAT를 통과할 수 없습니다. 따라서 통신을 암호화할 때에는 ESP를 대신 사용해야 합니다. ESP는 ESP 널 암호화가 사용되는 경우가 아니면 AH 암호화보다 높은 사용 오버헤드를 가집니다.

-   **그룹 정책의 영향** . IPsec GPO는 컴퓨터 시작 및 로그온 시간에 영향을 줍니다. 해당 시간에 대한 실제적 영향을 판별하기 위해 테스트 구현 전/후에 기본값을 적용해야 합니다.

###### 신뢰 수준 확인

이 솔루션에 참여하는 호스트 및 해당 성능을 판별하기 위해서 고려해야 할 다른 중요한 내용이 있습니다. 이를 판별하려면, 신뢰 관계가 되기 위해 충족되어야 할 조건 및 어느 정도의 신뢰 관계가 존재할 수 있는지를 명확하게 정의해야 합니다. 다음 정보는 신뢰에 대한 명확한 정의, 주어진 신뢰 수준을 충족하는 데 필요한 기준 및 이러한 내용이 프로세스 계획에 영향을 미치는 방법을 제공하여 이 프로세스에 도움을 줄 수 있습니다.

신뢰 수준과 관련하여 호스트에 적용될 수 있는 기본 상태로는 네 가지가 있습니다. 그 네 가지의 상태를 신뢰 수준이 높은 것부터 낮은 것 순으로 나열하면 다음과 같습니다.

-   **신뢰할 수 있음** . 신뢰할 수 있는 상태란 호스트의 보안 위험이 관리되고 신뢰할 수 있는 다른 호스트측에서 해당 호스트로부터 악의적인 작업이 실행되지 않은 것이라는 상당한 확신을 가질 수 있는 상태를 말합니다. 이 상태가 반드시 호스트가 전적으로 안전하다는 것을 의미하지는 않지만 IT 부서에서 이 호스트의 상태에 대해 책임을 지며 자동 프로세스 또는 문서화된 프로세스와 같은 특정 메커니즘을 통해 관리하고 있음을 의미합니다.

    이 호스트는 신뢰할 수 있기 때문에 이 호스트와 신뢰할 수 있는 다른 호스트 사이의 통신이 네트워크 인프라에 의해 방해를 받아서는 안 됩니다. 또한 이 호스트는 어떤 악의적인 작업도 수행하지 않을 것이라고 가정할 수 있기 때문에 방화벽이나 기타 유사한 방법을 사용하여 해당 호스트의 트래픽을 차단하거나 필터링하지 않아도 됩니다.

-   **신뢰할 만함** . 신뢰할 만한 상태란 신뢰할 수 있는 장치가 될 수 있지만 신뢰할 수 있는 상태로 공인되기 위해서 컴퓨터에 일부 추가적인 구성 변경 또는 업그레이드가 필요한 상태를 말합니다. 이러한 컴퓨터는 격리된 네트워크를 설정하기 위해 필요한 노력의 정도 및 비용에 대한 예측을 제공하기 때문에 설치 단계에서 해당 컴퓨터를 확인하는 것이 특히 중요합니다.

-   **알려짐,신뢰할 수 없음** . 알려진 컴퓨터가 신뢰할 수 있는 자산이 될 수 없는 이유로는 재정적 제약에서 비즈니스 요건 또는 기능적 요건에 이르기까지 여러 가지가 있습니다. 예를 들어, 모든 컴퓨터를 업그레이드하기에 프로젝트 자금이 불충분하거나 일부 사업부에서 자신들의 고유 도메인에 대한 소유권을 가져야 하거나 이전 응용 프로그램이 현재 지원되는 운영 체제와 호환되지 않아 일부 응용 프로그램을 보안된 컴퓨터에서 실행할 수 없는 경우가 있을 수 있습니다.

    어떤 이유이든, 알려진 그러나 신뢰할 수 없는 컴퓨터의 기업 소유자는 컴퓨터를 규정에 부합시키려면 어떻게 해야 하는지 그리고 허용 가능한 위험 프로필을 유지하면서 이 상황을 어떻게 해결할 수 있는지에 대해 자문을 의뢰해야 합니다.

-   **알 수 없음,신뢰할 수 없음** . 알 수 없고 신뢰할 수 없는 상태는 모든 호스트의 기본 상태입니다. 이 상태의 호스트는 관리되고 있지 않으며 해당 구성을 알 수 없기 때문에 다른 신뢰 상태가 할당될 수 없습니다. 이러한 호스트는 손상의 가능성이 있고 유해한 활동의 기반으로 사용될 수 있기 때문에 회사에 허용할 수 없는 수준의 위험을 초래합니다. 이 솔루션은 이러한 시스템으로 인해 발생할 수 있는 영향을 줄이기 위해 설계되었습니다.

###### 수집된 정보 사용

모든 관련 정보가 수집되면 구현 계획을 전개할 수 있고 IPsec 기반 네트워크 격리 솔루션이 현재의 네트워크 환경에 적합한지를 판별할 수 있습니다. 이 솔루션의 구현에 영향을 줄 수 있는 고려 사항은 다음과 같습니다.

-   호스트를 신뢰할 수 있는 상태에 부합하도록 만들고 IPsec 요건에 호환되도록 하는 데 필요한 업그레이드 비용

-   현재의 네트워크 장치가 IPsec을 지원하지 않는 경우의 인프라 업그레이드 또는 대체 비용

-   IPsec 구현 시 포트 기반 우선 순위는 작동하지 않지만 IP 주소 기반 QOS는 계속 작동함으로 인한 라우터 기반 QOS의 손실 가능성 및 네트워크 격리의 보안 이점 사이의 균형 조정

-   IPsec 구현 시(특히, ESP 암호화가 사용되는 경우) 네트워크 모니터 및 IDS 장치가 실패할 수 있음. 장치에서 IPsec 파서를 사용할 수 있는 경우에는 파서를 사용하여 이 문제를 해결할 수 있습니다.

-   IPsec 구현 시의 오버헤드 증가와 서버 및 네트워크 장치에 대한 CPU/메모리 요구로 인해 하드웨어를 업그레이드해야 할 수 있음

-   네트워크 대기 시간 증가로 인해 예측 관리가 문제가 될 수 있음

-   공급업체 및 게스트 사용자 관리 오버헤드. 이들은 신뢰할 수 없는 장치를 가지고 있으며 비즈니스 이유로 격리된 네트워크의 네트워크 리소스에 액세스해야 할 수 있기 때문에 이들에 대한 관리가 과도한 오버헤드를 발생시킬 수 있습니다. 이러한 예외 관리는 해당 사용자의 수와 액세스 빈도가 높아질수록 보다 더 어려울 수 있지만 신뢰할 수 있는 네트워크와 신뢰할 수 없는 네트워크 간에 경계 영역을 두면 이를 완화시킬 수 있습니다.

이러한 문제는 IPsec 및 네트워크 격리 구현과 같이 전체 네트워크에 영향을 줄 수 있는 변화를 구현하기 전에 신중한 계획과 테스트가 필요한 이유를 잘 설명해 줍니다. 네트워크의 현재 상태 및 네트워크를 규정에 부합시키는 데 필요한 경제적, 행정상의 비용이 있기 때문에 솔루션을 구현하는 방법뿐만 아니라 구현이 가능한지 여부에 대해서도 신중하게 고려해야 합니다. 또한 그러한 문제를 해결하기 위한 가능한 완화 전략으로, 특정 대상 리소스만 격리하는 제한된 또는 증분 배포를 논의해야 합니다.

다시 한 번 강조하면, IPsec 기반 네트워크 격리는 포괄적인 솔루션의 한 부분입니다. 이 가이드의 각 솔루션은 네트워크에 연결될 수 있는 신뢰할 수 없는 장치로부터 보호를 제공하지만 이 솔루션의 각 부분은 독립적으로 사용될 수 있으며 네트워크의 보안 수준을 높여 줍니다. 따라서 현재 IPsec 도메인 및 서버 격리가 허용 가능한 솔루션이 아닌 경우라도 여기에 나열된 다른 솔루션을 구현하는 데 여전히 유용할 수 있으며 네트워크가 보다 발달되고 이 문서에서 설명한 요건에 호환될 수 있는 상태가 되면 나중에 다시 네트워크 격리 솔루션을 채택할 수도 있습니다.

##### VPN 격리 서비스를 사용하여 관리되지 않는 원격 컴퓨터로부터 보호

표준 Windows 기반 원격 액세스 서버 세션에서, 원격 액세스 클라이언트가 세션을 시작하면 서버는 다음 작업을 수행합니다.

1.  원격 액세스 서버가 구성된 원격 액세스 정책을 검사하고 연결을 허용합니다.

2.  서버가 사용자의 원격 액세스 권한을 확인합니다.

3.  그런 다음 Active Directory 또는 기타 인증 서비스를 통해 사용자의 자격 증명을 인증합니다.

4.  서버가 원격 클라이언트에 IP 주소를 할당합니다.

이때, 원격 클라이언트는 네트워크에 대한 완전한 액세스 권한을 갖게 되며 업데이트 수준, 바이러스 백신 소프트웨어의 기존 또는 업데이트 상태를 비롯하여 기타 보안 정책 관련 정보를 확인하기 위한 어떤 검사도 실행하지 않습니다. 이 기능은 종종 원격 사용자 또는 로밍 컴퓨터에 대해 업데이트, 구성 변경 또는 패치를 적용하지 않기 때문에 최적이라고 볼 수 없습니다.

아래 그림 및 번호가 지정된 목록에서 볼 수 있듯이 VPN 격리 연결은 서로 다릅니다.

[![](images/Cc875843.PNFUC08(ko-kr,TechNet.10).gif)](https://technet.microsoft.com/ko-kr/cc875843.pnfuc08_big(ko-kr,technet.10).gif)

**그림 8. VPN 격리 프로세스**

1.  원격 클라이언트가 기본적인 연결 전제 조건(예: 보안 업데이트 수준 및 바이러스 서명 파일 날짜)을 검사하는 연결 관리자 사전 연결 스크립트를 실행하고 결과를 저장합니다. 이 스크립트를 실행한 후 클라이언트가 VPN 터널을 통해 원격 액세스 세션을 설정합니다.

2.  원격 액세스 서버에서 RADIUS를 통해 사용자 자격 증명을 인증합니다. RADIUS는 Active Directory를 검사하여 자격 증명을 확인합니다.

3.  Active Directory에서 사용자가 인증되면, 원격 액세스 서버가 원격 액세스 정책을 적용하여 클라이언트를 격리 상태로 설정합니다. 격리 상태에 있는 동안 네트워크 액세스는 격리 정책에서 지정하는 내용으로 제한됩니다. 이 제한된 액세스는 클라이언트가 규격을 준수하도록 하는 데 사용될 수 있는 특정 리소스에 대한 액세스를 제한하는 IP 필터를 사용하거나 특정 시간 후에 클라이언트와의 연결을 끊는 제한 시간을 지정하여 이루어집니다.

4.  사후 연결 스크립트는 클라이언트가 지정된 요건을 준수하는지 여부를 원격 액세스 서버에 알립니다. 제한 시간 동안 연결이 요건을 충족하지 못하면 사용자에게 연결 실패에 대한 세부 정보 및 연결 종료에 대한 알림이 전달됩니다.

5.  사후 연결 스크립트에서 클라이언트가 지정된 요건을 충족함을 표시하면 원격 액세스 서버가 IP 필터 제한을 제거하여 격리 모드에서 클라이언트를 제거하고 이를 통해 원격 액세스 정책에서 지정하는 네트워크 리소스에 액세스할 수 있는 권한을 부여합니다.

원격 액세스 클라이언트는 해당 네트워크가 분리된 서브넷이든 정의된 인터넷 연결 서버 세트든 지정된 격리 네트워크에 위치한 리소스에만 액세스할 수 있습니다. 격리 네트워크는 원격 클라이언트가 원격 컴퓨터에 대해 보안 표준을 준수하도록 유도하는 활동을 수행할 수 있는 리소스를 제공해야 합니다. 일반적으로 이러한 리소스에는 이름 확인을 위한 DNS 서버, 업데이트를 검색하는 파일 서버 그리고 지침 또는 웹 기반 업데이트를 위한 웹 서버에 대한 액세스가 포함될 수 있습니다.

이 프로세스에서 격리 서브넷을 사용할 때에는 원격 클라이언트 컴퓨터가 업데이트 다운로드 및 설치에 충분한 시간을 가질 수 있도록 세션 제한 시간을 보다 길게 설정해야 합니다. 물론 보다 복잡한 스크립트가 필요할 수 있고 다른 보안 문제를 야기할 수 있지만 클라이언트 컴퓨터가 다른 소스를 사용하도록 또는 VPN 세션 외부의 인터넷에 연결된 업데이트 서버를 사용하도록 이동하면 이 문제를 피할 수 있습니다. 어떠한 경우든, 격리 동작은 격리 네트워크 자체가 아닌 스크립트에 의해 결정됩니다.

**참고** 격리 솔루션에서 도메인에 가입되지 않은 시스템을 수용해야 하는 경우에는 IPsec 정책을 스크립트화할 수 있습니다. 이 경우, IPsec 인증을 지원하도록 netsh 또는 lpseccmd.exe를 사용하여 인증서가 있는 간단한 정책을 적용할 수 있습니다. IPsec은 계층화된 솔루션뿐만 아니라 VPN 격리 구성에서 도메인에 가입된 시스템에 대해서도 작동할 수 있습니다.

###### VPN 격리 클라이언트 구성 요소

이전 섹션에서 언급된 바와 같이, VPN 격리 프로세스의 첫 번째 단계의 출발점은 클라이언트(특히 연결 관리자 사전 연결 스크립트가 있는 클라이언트)입니다. 연결 관리자는 네트워크 연결의 설정 및 관리를 중앙화하고 자동화하며 다음을 포함한 VPN 격리 구성의 중요 영역을 지원하는 CMAK(연결 관리자 관리 키트)의 일부입니다.

-   클라이언트 컴퓨터 구성을 자동으로 관리하기 위한 사전 연결 보안 검사

-   사후 연결 보안 검사 및 로그온 유효성 검사

연결 관리자는 관리자가 여러 컴퓨터에 분배될 수 있는 프로필을 통해 사용자 지정 동작을 설정할 수 있도록 합니다. 이러한 기능은 원격 사용자가 변경할 수 있는 많은 설정을 제한하여 원격 사용자의 연결 프로세스를 간소화합니다. 변경할 수 있는 설정은 다음과 같습니다.

-   전화 접속 연결에 사용할 수 있는 전화 번호 목록 설정

-   그래픽, 아이콘, 메시지 및 도움말 텍스트 사용자 지정

-   전화 걸기 프로필 재설정 또는 Windows 방화벽 패킷 필터 규칙 구성과 같은 활동을 포함할 수 있는 사용자 지정된 사전 연결 및 사후 연결 작업 실행

다른 CMAK 구성 요소로 클라이언트 에이전트(RQC.exe)가 있는데, 이 에이전트는 TCP 포트 7250을 사용하여 원격 액세스 서버에서 원격 액세스 격리 서비스(RQS.exe)와 통신합니다. 격리 연결이 설정되면 RQS가 비밀 공유 키를 RQC에 보냅니다. 클라이언트가 필요한 조건을 충족하면 RQC가 공유 키를 전송하여 클라이언트의 격리 상태를 해제합니다.

연결 관리자 프로필은 CMAK로 작성 및 구성할 수 있는 사용자 지정된 자동 압축 해제 연결 관리자 클라이언트 전화 걸기 패키지입니다. CMAK 마법사는 관리자에게 프로필 구성 과정을 안내합니다. 이 프로필은 그룹 정책에서 Microsoft SMS(Systems Management Server) 2003 소프트웨어 배포에 이르는 여러 메커니즘을 통해 분배될 수 있습니다. 만들어진 실행 파일이 클라이언트 컴퓨터에서 실행되면, 프로필이 원격 액세스 서버와 통신을 설정하는 데 필요한 설정과 함께 로컬 컴퓨터에 설치됩니다. 설치가 완료되면 사용자는 Windows XP의 **연결 대상** 메뉴에서 프로필 이름을 시작하여 연결을 설정할 수 있습니다.

CMAK에 대한 자세한 내용은 Microsoft TechNet의 [연결 관리자 관리 키트 (영문)](http://www.microsoft.com/technet/prodtechnol/windowsserver2003/ko/library/serverhelp/be5c1c37-109e-49bc-943e-6595832d5761.mspx?mfr=true) 페이지(http://www.microsoft.com/technet/prodtechnol/windowsserver2003/ko/library/ServerHelp/be5c1c37-109e-49bc-943e-6595832d5761.mspx?mfr=true)를 참조하십시오.

###### VPN 격리 서버 구성 요소

VPN 원격 액세스 서버는 이 솔루션의 중심 부분으로서 다음과 같은 기능을 수행합니다.

-   원격 액세스 격리 서비스(RQS.exe)를 실행합니다.

-   격리 액세스 설정에 대한 원격 액세스 정책을 적용합니다.

-   클라이언트 에이전트와 통신을 협상합니다.

-   클라이언트 에이전트로부터 정책 준수 정보를 받습니다.

-   네트워크 리소스에 대한 액세스 권한을 결정하기 위해 원격 액세스 정책을 적용합니다.

원격 액세스 격리 서비스는 서비스 팩 1이 설치된 Windows Server 2003의 선택적 구성 요소로서, 필요한 API를 지원하여 원격 클라이언트 컴퓨터를 격리하도록 설정하고 나중에 클라이언트 에이전트가 정책 준수에 대한 알림을 보내면 해당 클라이언트를 격리 모드에서 제거합니다. 이 서비스(RQS.exe)는 클라이언트 컴퓨터가 정책 요건을 충족하는 클라이언트측 구성 요소(RQC.exe)로부터 알림을 받기 위해 TCP 포트 7250에서 수신 대기합니다. 따라서 이 솔루션이 작동하려면 호스트 기반 방화벽을 포함한 모든 방화벽이 TCP 포트 7250의 트래픽을 허용해야 합니다.

###### VPN 격리 네트워크 구성 요소

다음 네트워크 구성 요소에는 VPN 격리 네트워크 솔루션의 일부가 될 수 있는 필수 및 선택적인 요소들이 포함됩니다.

-   **인터넷 인증 서비스(IAS) RADIUS 서버(권장)** . RADIUS가 인증 공급자로 사용되면 IAS 서버만 필요하지만 되는 이것은 인증서 및 스마트 카드 기반 이중 인증을 지원하기 위한 확장 가능한 인증 프로토콜(EAP)에 대한 지원을 포함하여 다른 인증 솔루션에 비해 큰 이점을 가지고 있습니다. RADIUS를 사용하는 경우에는 RADIUS 공급자로 Windows Server 2003과 함께 제공되는 IAS를 사용하는 것이 좋습니다. 왜냐하면 ISA는 다른 RADIUS 서버와는 달리 MS-Quarantine Session Timeout 및 MS-Quarantine-IPFilter VSA를 지원하기 때문입니다.

-   **Active Directory(권장)** . Active Directory는 RADIUS의 사용자 계정 인증 데이터베이스로서 작동하며 IAS 및 기타 서비스와 통합됩니다. IAS와 함께 사용되는 경우 인증서 또는 기타 방법을 통한 이중 인증을 지원할 수 있습니다.

-   **DHCP 서버(권장)** . DHCP 서버는 원격 클라이언트에 IP 주소 구축을 제공하는 데 사용됩니다.

-   **DNS 서버(권장)** . DNS 서버는 격리 네트워크에 있는 클라이언트가 다른 서비스(제공되는 경우)에 연결하여 원격 클라이언트 컴퓨터에 대해 규정 준수를 유도하도록 이름 확인 서비스를 제공합니다.

-   **WSUS(Windows Software Update Service) 서버(선택적)** . WSUS 서버는 원격 컴퓨터가 격리 상태에서 해제되기 위한 요건을 충족하는 데 필요할 수 있는 보안 업데이트 및 핫픽스를 제공할 수 있습니다. SMS 2003을 포함한 다른 방법도 사용될 수 있는데 컴퓨터가 업데이트를 위해 외부 소스로 이동해야 할 경우에는 표준 Windows Update 서비스도 사용 가능합니다.

-   **파일 서버(선택적)** . 파일 서버는 격리된 컴퓨터가 정책 요건을 충족하기 위해 소프트웨어 업데이트 및 바이러스 방지 서명 파일에 액세스할 수 있는 공유를 제공하는 데 사용될 수 있습니다.

-   **웹 서버(선택적)** . 웹 서버는 사용자의 컴퓨터를 격리 상태에서 제거하기 위한 사용자 지침을 제공하기 위해 격리 상태에서 사용될 수 있습니다. 일부 업데이트 패키지에서는 특정 바이러스 백신 제품의 전달을 위해 웹 구성 요소도 사용할 수 있습니다.

##### 802.1X 인증을 사용하여 관리되지 않는 무선 클라이언트로부터 보호

이전 섹션에서 신뢰할 수 없는 컴퓨터로부터 무선 네트워크를 보호하는 데 가장 효율적인 선택으로 802.1X 인증을 소개했습니다. 현재 버전의 Microsoft Windows에서 기본적으로 지원되는 여러 802.1X 방법을 설명하였고 무선 네트워크에서는 매우 효율적이지만 유선 네트워크에는 그다지 효율적이지 않은 이유에 대해 설명했습니다. 이러한 내용을 알고 있으므로 이제 지원되는 방법 간의 차이점을 설명하고 어떤 방법이 서로 다른 유형의 중소 기업 네트워크 환경에 보다 적합할 것인지를 결정할 수 있습니다.

###### 802.1X 비교

앞에서 설명한 바와 같이, 현재의 Microsoft Windows 버전에서 지원되는 802.1X 방법에는 세 가지가 있습니다. 그 세 가지 방법은 다음과 같습니다.

-   EAP-MD5

-   PEAP(보호된 EAP)

-   EAP-TLS

이 세 가지 방법 중에서, 첫 번째(EAP-MD5) 방법은 암호 문구를 전송하는 방식을 취하고 있어 가로채기의 위험이 있기 때문에 가장 안전하지 않은 방법입니다. 반면 다른 두 가지 방법(PEAP 및 EAP-TLS)은 중소 기업 네트워크에 배포를 고려하기에 충분합니다.

Microsoft에서는 MS-CHAP v2(Microsoft Challenge Handshake Authentication Protocol version 2)를 사용하여 PEAP를 구현합니다. MS-CHAP v2는 원래 전화 접속 VPN 인증 방법으로 설계되었지만 Active Directory를 통한 강력한 사용자 암호 정책을 지원할 수 있기 때문에 PEAP에도 적합합니다. 이 접근 방법은 EAP-TLS보다 구현이 간단할 뿐만 아니라 리소스 비용이 적게 들고 구현을 위해 여러 서버나 서비스가 추가로 필요하지 않기 때문에 초기 비용도 비교적 저렴합니다. 이 솔루션에는 인증 서버용 인증서가 필요하지만 구현에 많은 인증서가 필요하지 않기 때문에 이 인증서는 타사 인증 공급자를 통해서도 발급받을 수 있습니다.

하지만 802.1X 인증 중에서 가장 높은 보안을 구현하는 방법은 EAP-TLS입니다. EAP-TLS는 상호 인증을 위해 클라이언트와 인증 서버 양쪽의 인증서를 요구합니다. 이 구현을 위해서는 많은 수의 인증서가 필요하기 때문에 이 구현을 지원할 수 있는 공용 키 인프라를 구축하는 것이 좋습니다. 그렇기 때문에 EAP-TLS는 MS-CHAP v2를 사용하는 PEAP와 비교해 볼 때 높은 구현 및 지원 비용이 필요합니다.

###### 802.1X 의사 결정 프로세스

어떤 802.1X 구현이 주어진 네트워크 환경에 최적일 것인지에 관한 의사 결정 프로세스를 용이하게 하기 위해 Microsoft에서는 다음과 같은 802.1X 인증 의사 결정 트리를 고안했습니다.

![](images/Cc875843.PNFUC09(ko-kr,TechNet.10).gif)

**그림 9. 802.1X 의사 결정 트리**

이 순서도에 사용된 "Large business"라는 단어 때문에 혼란스러울 수도 있습니다. 이 단어는 일반적인 의미로 500명 이상의 직원과 최소 5명의 기술 관련 종사자로 구성된 IT 지원 부서를 갖춘 기업체를 설명하기 위한 것입니다. 이 정보에 근거해 볼 때, 중소 기업 환경에는 둘 중 어떤 솔루션을 사용해도 무난하다는 것을 알 수 있습니다. 따라서 의사 결정 프로세스는 위험의 최소성과 비용 효율성을 중심으로 흐릅니다.

PEAP와 EAP-TLS의 주된 차이점은 인증서 인프라를 필요로 하는지 여부에 있습니다. 따라서 보다 엄격한 보안 표준을 요구하는 규제 요건이 없다면 일반적으로 EAP-TLS가 대기업의 요구와 일치하며 PEAP는 중소 규모의 기업에 적합하다고 볼 수 있습니다. 비용에 대한 고려는 별도로, 종종 기업에서는 PKI 투자에 대한 정당성을 제공하는 인증서 인프라의 필요성을 견지합니다. 결국 웹 콘텐츠를 보호하거나 코드 서명 목적을 위해 많은 인증서가 필요한 경우에는 가장 안전한 형태의 802.1X 인증을 구현하기 위해 해당 인프라 투자를 이용하는 것도 좋은 방법입니다.

###### 802.1X PEAP 요건

MS-CHAP v2 구현을 통한 Microsoft 기반 PEAP에는 Active Directory 계정 데이터베이스에 대한 무선 클라이언트를 인증을 위해 인증 서버 역할을 할 최소 두 개의 IAS RADIUS 서버가 필요합니다. RADIUS 서버의 수는 원격 사이트의 수에 따라 또는 많은 수의 사용자 인증 시도를 수용하기 위해 조정이 필요할 수 있습니다.

원격 위치가 있다고 해서 반드시 IAS RADIUS 서버가 추가로 필요하지는 않습니다. 하지만 원격 위치에 충분한 고속 연결이 없거나 이미 고유의 도메인 컨트롤러 및 기타 로컬 리소스가 있는 경우에는 그러한 사이트에 인증 서버를 추가해야 합니다.

###### 802.1X EAP-TLS 요건

앞에서 설명한 것과 같이 EAP-TLS에는 추가적인 인증서 요건으로 인해 PEAP 구현보다 많은 리소스가 필요합니다. 물론 타사의 공급자를 통해 모든 무선 클라이언트 및 인증 서버에 필요한 인증서를 발급 받을 수도 있지만 이러한 방법은 무선 클라이언트의 수가 소수의 사용자에게만 엄격하게 제한된 경우가 아니면 인증서 인프라를 구현하는 것보다 더 큰 비용이 발생할 수 있습니다.

종합해 볼 때 간단한 EAP-TLS 구현에는 최소 4개의 서버가 필요하며 기업의 규모가 크거나 네트워크가 지리적으로 분산되어 있는 경우에는 그보다 많은 서버가 필요합니다. 4개의 서버 중 2개는 여분의 IAS RADIUS 서버의 역할을 하며 다른 2개의 서버는 인증서 인프라로서 작동합니다. 두 개의 인증서 서버 중에서 하나(루트 인증서 서버)는 네트워크로부터 분리하여 구축하고 연결이 끊긴 상태로 유지하는 것이 좋습니다. 이렇게 하면 특정 환경에서 서버의 수를 하나 줄일 수 있습니다.

###### WEP 또는 WPA 사용

무선 보안과 관련하여 해결되어야 할 다른 문제는 무선 암호화를 사용할 것인지의 여부이며 사용하는 경우 어떤 표준을 사용할 것인지를 결정해야 합니다. 중소 기업 환경의 경우, 무선 암호화의 부족을 고려해야 하는 이유(공용 액세스 무선 인터넷 연결을 제공하는 기업과 연관된 이유)는 매우 적습니다. 다른 상황에서는, 무선 네트워크의 보안을 위해 802.1X 기반 인증과 함께 무선 암호화의 일부 형식에 대한 구현이 필수적입니다.

무선 암호화는 추가적인 하나의 변형과 함께 다음과 같은 두 가지 기본 형식으로 이루어집니다. 그 형식은 다음과 같습니다.

-   **WEP** . WEP(Wired Equivalent Privacy) 표준은 원래 무선 통신 보안을 위해 64비트 또는 128비트 RC4 암호화를 사용하는 IEEE 802.11 표준의 일부였습니다. 이후 이 암호화 방법을 수동 수신 공격(passive listening attack)에 극도로 취약하게 만드는 심각한 결함이 발견되었습니다. 비교적 짧은 시간 안에(종종 몇 분 안에) WEP 전송을 디코딩할 수 있는 여러 도구들을 사용할 수 있습니다. 일반적으로 기업 환경에서 WEP를 사용하는 것은 권장되지 않지만 802.1X 인증을 포함한 다양한 방법을 사용하여 어느 정도 보호할 수 있습니다.

-   **WPA** . WEP 표준의 약점을 보완하기 위해 Microsoft 및 Wi-Fi Institute를 포함한 업계 지도자들로 구성된 컨소시엄에서 당시 아직 개발 단계에 있었던 802.11i 표준의 부분적 구현으로 WPA(Wi-Fi Protected Access)를 만들었습니다. 이 표준은 데이터 암호화에 TKIP(임시 키 통합 프로토콜)를 사용하여 보다 강력한 암호화를 제공하기 때문에 WEP 표준보다 훨씬 월등합니다. 현재 버전의 Microsoft Windows 운영 체제에서와 마찬가지로 오늘날 시장의 대부분의 무선 액세스 지점(WAP)에서는 WPA 표준을 지원합니다.

-   **WPA2** . WPA2(Wireless Protected Access 2) 표준은 2004년 9월 Wi-Fi Alliance에 의해 확립되었습니다. IEEE 802.11i 규격의 완전한 구현으로 공인된 WPA2는 2004년 6월 승인을 받았습니다. 이 표준은 802.1X 기반 EAP 인증 방법 또는 PSK(종종 개인용 모드 WPA라고 함) 기술을 지원하지만 AES(Advanced Encryption Standard)라고 하는 CCMP(Counter-Mode/CBC-MAC Protocol)를 사용하는 고급 암호화 메커니즘을 도입했습니다. 이 무선 암호화의 구현은 보안성이 매우 뛰어납니다. 현재 버전의 Microsoft Windows 운영 체제를 포함하여 대부분의 공급업체에서는 특정 형식으로 WPA2를 지원합니다.

따라서 가능한 경우 무선 데이터 보안을 위해서는 WPA2 또는 WPA를 사용해야 합니다. 그러나 이 표준은 최근에 발표된 것이기 때문에 이 표준을 지원하지 않는 상당한 규모의 무선 투자가 이미 진행되었다면 이 표준을 사용하기가 쉽지 않습니다. 앞에서 설명한 것과 같이 802.1X 인증을 구성하고 키 쌍을 자주 변경하면 WEB 표준이 제공하는 보안 수준을 높일 수 있습니다. 그렇다 하더라도, WPA 또는 WPA2 표준으로 전환되는 상태에 있는 무선 네트워크에 대해서는 WEP의 사용을 유보해야 합니다.

##### SMS를 사용하여 관리되지 않는 시스템 탐지

Microsoft SMS(Systems Management Server) 2003은 다양한 기능을 가지고 있는 Microsoft 네트워크의 관리 도구입니다. SMS를 사용하면 소프트웨어 전달, 보안 업데이트 배포 및 시스템 감사를 포함한 여러 관리 기능을 중앙 집중화할 수 있습니다. 이러한 기능의 핵심은 이 유용한 도구를 배포하는 자동화되고 중앙 집중화된 시스템 인벤토리를 갖는 것입니다. 바로 여기서 관리되지 않는 시스템에 대한 탐지가 이루어집니다.

SMS 2003은 네트워크의 모든 컴퓨터에 대한 정보를 가지고 있는 컴퓨터 컬렉션 데이터베이스 구축에 관리자가 사용할 수 있는 서로 다른 검색 방법을 제공합니다. 이러한 검색 방법은 Active Directory 기반 검색 방법(Active Directory 컴퓨터 계정 목록에서 제공하는 세부 정보로 컬렉션을 업데이트)에서 네트워크 검색 방법(네트워크에서 연결된 장치를 탐색)에 이르기까지 다양합니다. 이러한 검색 방법은 미리 지정한 간격에 자동으로 발생하여 완료되면 컬렉션 데이터베이스를 업데이트하도록 구성할 수 있습니다.

관리되지 않는 시스템이 네트워크에 연결되었을 때 이를 탐지하기 위한 요구를 충족할 수 있도록 네트워크 검색 발생 빈도를 높이고 정기적으로 검색한 내용을 검토하여 새로운 시스템이 네트워크에 연결된 시간을 판별하도록 구성할 수 있습니다. 그러한 시스템 연결이 발생하면 이를 기존의 새 컴퓨터 빌드 목록이나 네트워크 연결 요청과 비교 검사하여 네트워크를 사용하도록 허가된 새 시스템인지를 확인할 수 있습니다.

###### 네트워크 검색 프로세스

관리되지 않는 시스템을 검색하는 이 접근 방법의 단점 중 하나는 SMS에서 Microsoft Windows 이외의 운영 체제를 사용하는 컴퓨터의 세부 정보를 검색하는 데 문제가 있을 수 있다는 점입니다. 실제로 SMS 2003 검색 방법으로는 Microsoft Windows 98 SE 이전의 Windows 버전도 탐지하지 못할 수 있습니다. 그 이유는 해당 버전에서 WMI(Windows Management Interface) 구현을 지원하지 않기 때문입니다. 따라서 새로운 장치가 네트워크에 연결되었을 때 이를 탐지하도록 이 솔루션 프로세스에 스크립트를 추가해야 합니다. 다음 그림은 해당 프로세스의 작동 방법을 보여 줍니다.

![](images/Cc875843.PNFUC10(ko-kr,TechNet.10).gif)

**그림 10. 관리되지 않는 컴퓨터에 대한 SMS 검색 프로세스**

이 그림은 서로 다른 종류의 컴퓨터를 SMS 컬렉션 데이터베이스에 추가하는 데 사용할 수 있는 검색 방법을 보여 줍니다. SMS에서 처리해야 할 컴퓨터 종류에는 다음과 같은 세 가지가 있습니다.

-   **SMS에서 액세스할 수 있는 관리되는 시스템** . SMS에서 관리할 수 있는 컴퓨터이며 이미 SMS에 의해 관리되고 있습니다. 이러한 컴퓨터는 이미 SMS 컬렉션 데이터베이스에 존재하며 자동 관리가 구성됩니다. 또한 신뢰할 수 있는 네트워크의 일부로 간주될 수 있으며 추가적인 주의가 필요하지 않습니다.

-   **SMS에서 액세스할 수 있는 관리되지 않는 시스템** . SMS에서 관리할 수 있지만 SMS에 의해 관리되고 있지 않은 컴퓨터입니다. 네트워크 배치(예: 방화벽 뒤에 위치했는지 여부)에 따라 SMS에서 탐지할 수도 탐지하지 못할 수도 있으며 다른 방법으로 관리되는 컴퓨터를 포함하고 있을 수 있습니다. 이러한 컴퓨터는 관리 세부 정보와 함께 예외 목록에 있어야 합니다. 그렇지 않은 경우 신뢰할 수 없는 컴퓨터로 간주되어 추가적인 검사를 수행해야 할 수 있습니다. 이러한 컴퓨터는 SMS에서 검색되고 네트워크 장치를 통해 활동이 차단될 수 있습니다.

-   **SMS에서 액세스할 수 없는 관리되지 않는 시스템** . SMS에서 관리할 수 없으며 SMS에 의해 관리되고 있지 않은 컴퓨터입니다. 이 시스템에는 다른 방법으로 관리되고 있는 알려진 시스템이 포함될 수도 포함되지 않을 수도 있습니다. 이러한 컴퓨터는 관리 세부 정보와 함께 예외 목록에 있어야 합니다. 그렇지 않은 경우 알 수 없고 신뢰할 수 없는 컴퓨터로 간주되어 추가적인 검사를 받게 됩니다. 이러한 컴퓨터는 사용자 지정된 검색 스크립트를 포함하여 SMS 검색 이외의 프로세스를 통해서만 탐지가 가능합니다.

이제 네트워크의 관리되지 않는 시스템을 검색하는 프로세스는 네트워크에서 허가된 컴퓨터 연결의 세부 정보를 문서화하는 프로세스 설정에 좌우된다는 것을 명확하게 알 수 있습니다. 이 문서에는 컴퓨터가 SMS와 같은 자동화된 방법에 의해 관리되는지 여부와 관계없이 컴퓨터에 대한 세부 정보가 포함되어야 합니다. 이러한 내용이 없는 경우 설정된 보안 정책을 컴퓨터에 적용하는 데 사용되는 프로세스가 있다면 이 프로세스를 포함시켜야 합니다. 물론 네트워크에 있지만 보안 표준을 충족할 필요가 없는 허가된 컴퓨터가 있을 수 있습니다. 그러나 그러한 컴퓨터는 신뢰할 수 있는 네트워크에서 격리된 신뢰할 수 없는 네트워크 세그먼트에 배치되어야 합니다.

허가된 방식으로 네트워크에 있는 것으로 알려진 모든 컴퓨터를 문서화해 놓은 "컴퓨터 추가" 프로세스가 있는 경우에는 이 정보를 사용하여 허가된 컴퓨터와 허가되지 않은 컴퓨터를 판별할 수 있습니다. 네트워크에서 검색된 컴퓨터 중 이 목록에 없는 컴퓨터는 의심스러운 컴퓨터이므로 즉시 검사를 받아야 합니다.

#### 배포 및 관리

"개발" 섹션에서는 배포 계획을 만드는 데 필요한 세부 사항에 관한 정보를 설명했습니다. 이 섹션에서는 기술 구현 담담자가 솔루션을 구현하는 데 도움이 될 수 있고 의사 결정권자가 솔루션에 따른 결과를 보다 정확히 이해하여 해당 환경에 적절한 솔루션인지에 대한 현명한 의사 결정을 내리는 데 도움이 될 수 있는 일반적인 배포 문제 및 프로세스에 대한 자세한 내용을 설명합니다.

##### IPsec을 사용하여 도메인과 서버 격리

IPsec 기반 네트워크 격리는 복잡한 프로세스이기 때문에 구현 담당자가 이 솔루션을 생산 네트워크에 배포할 때에는 단계별 접근 방법을 취하는 것이 좋습니다. 단계별 배포는 IPsec 정책의 배포 방법, 즉 그룹별 배포인지 또는 정책별 배포인지에 따라 몇 가지 방법으로 수행할 수 있습니다.

어떤 방법을 사용하든, 배포의 초기 단계에는 각 그룹의 파일럿 샘플을 사용하고 가능한 경우 테스트 환경에서 이 솔루션의 영향을 테스트하는 것이 중요합니다. IPsec 배포는 정보에 입각한 기술 구매 및 영향을 받는 비즈니스 프로세스 소유자에 대한 정보와 함께 상세한 롤백 계획이 들어 있는 공식적인 변경 제어 요청 프로세스를 따라야 합니다.

###### 그룹별 IPsec 배포

그룹별 IPsec 네트워크 격리 배포 방법은 완전하게 정의된 IPsec 정책을 사용하지만 정책을 전달하는 GPO의 ACL을 사용하여 구현을 관리합니다. 모든 IPsec 정책에는 배포 전에 사용 가능한 모든 필터 동작으로 완전하게 정의된 전체 예외 및 보안 서브넷을 갖게 됩니다.

구성이 완료되면 관리자는 각 IPsec 정책에 대한 GPO를 만들고 해당 GPO를 관리하는 컴퓨터 그룹을 만듭니다. GPO가 만들어지면, 적절한 IPsec 정책이 해당하는 GPO에 할당되고 GPO는 Active Directory의 알맞은 개체에 연결됩니다. 프로세스의 이 시점에서는 GPO 할당을 관리하는 ACL이 비어 있기 때문에 어떤 정책도 전달해서는 안 됩니다.

파일럿 컴퓨터가 확인되면 해당 컴퓨터 계정이 적절한 컴퓨터 그룹에 배정되고 다음 GPO 폴링 간격이 경과하면 IPsec 정책이 적용됩니다. 해당 단계의 배포 목록에 다른 컴퓨터들이 추가되면 정책 전달을 위해 해당 계정들이 적절한 그룹에 배정됩니다.

이 방법을 사용할 때에는 통신이 두절되지 않도록 세심한 계획이 필요합니다. 예를 들어, 모든 호스트에서 사용하는 응용 프로그램을 호스팅하는 서버가 IPsec 암호화 통신이 필요한 보안 그룹에 배치되면 해당 그룹에 아직 추가되지 않은 컴퓨터 및 IPsec 암호화를 사용할 수 없는 모든 호스트의 통신이 두절됩니다.

###### 정책별 IPsec 배포

이 방법은 실질적인 배포 이전이 아닌 배포 중에 처음부터 IPsec 정책을 구성하여 배포하는 접근 방법을 취합니다. 이 방법을 사용하는 경우 초기 IPsec 정책에는 보안을 협상하는 컴퓨터에 대한 규칙 설정이 없는 예외 목록만 포함됩니다. 초기 정책이 전달되면 관리자는 단일 서브넷에만 영향을 미치는 필터를 사용하여 보안 규칙을 만들 수 있습니다. 배포가 진행되는 동안 정책이 배포 종료 상태에 도달할 때까지 추가 서브넷을 보안 규칙에 추가할 수 있습니다.

이 단계의 배포 방법을 사용하는 이점은 IPsec이 그룹별 접근 방식에서와 같이 모든 서브넷이 아닌 총 TCP/IP 트래픽의 작은 부분에 대해서만 협상한다는 점입니다. 또한 이 방법을 사용하면 단일 서브넷의 모든 네트워크 경로를 테스트하여 문제가 발생했을 때 영향을 받는 클라이언트의 수를 줄일 수 있습니다. 그러나 이 접근 방법은 그룹별 접근 방식과는 달리 특정 컴퓨터가 아닌 격리 도메인 또는 그룹에 있는 모든 컴퓨터에 적용된다는 문제점이 있습니다. 또한 모든 컴퓨터가 특정 서브넷과 연결을 시작할 때 특정 지점에서 폴백이 지워지려면 3초의 지연이 발생합니다.

이 접근 방법은 서브넷이 여러 개인 복잡한 네트워크에는 적합하지만 비교적 서브넷의 수가 적은 소규모 네트워크에는 큰 이점이 없습니다.

###### 예외 목록

아무리 훌륭하게 설계된 네트워크 격리 모델이라도 생산 환경에서 구현할 때에는 몇 가지 제약에 부딪히게 됩니다. 대표적으로, DNS 서버 및 도메인 컨트롤러와 같은 네트워크 환경의 핵심 구성 요소는 해결해야 할 몇 가지 문제점을 제시합니다. 그러한 시스템은 보안이 필요한 동시에 네트워크의 모든 시스템이 사용할 수 있어야 합니다. 따라서 인바운드 연결 요청에 열려 있어야 합니다. 계획을 생산으로 전환시킬 때 다른 문제점도 가시화될 수 있습니다. 이러한 문제를 해결할 수 있는 방법이 바로 예외 목록입니다.

예외 목록은 IPsec으로 보호될 수 없는 컴퓨터의 목록으로, 설계된 각 IPsec 정책에서 구현되어야 합니다. IPsec은 정적 필터링만 지원하기 때문에 예외 목록에 추가된 모든 호스트는 신뢰 여부에 관계없이 네트워크의 모든 부분에서 아웃바운드 및 인바운드 트래픽을 허용합니다. 따라서 예외 목록은 가능한 한 작게 유지해야 합니다. 왜냐하면 이러한 호스트는 관리되지 않는 장치로 인한 위험을 줄이기 위해 서버 강화 및 호스트 기반 상태 저장 방화벽 필터링을 통한 추가 보호가 필요하기 때문입니다. 예외 목록 호스트를 단일 서브넷에 배치하거나 쉽게 관리할 수 있도록 VLAN에 배치하거나 또는 예외 호스트의 수를 줄일 수 있도록 서버 기능을 통합하는 것도 고려해 볼 수 있습니다.

예외 목록에 포함해야 할 호스트는 다음과 같습니다.

-   도메인 컨트롤러. 도메인 컨트롤러는 IPsec 정책을 도메인 구성원에게 제공하고 네트워크 격리를 기반으로 하는 Kerberos 인증을 수행하지만 도메인 구성원과의 IPsec 통신을 지원하지 않습니다.

-   허용치 이상으로 성능에 영향을 받는 호스트. 이러한 문제는 수천 개의 클라이언트를 동시에 관리해야 하는 호스트 및 DHCP 서버와 같이 폴백을 지우기 위한 3초의 지연에 영향을 받는 호스트에게 발생할 수 있습니다.

-   호환 가능한 IPsec 구현이 없는 호스트 또는 신뢰할 수 있거나 신뢰할 수 없는 컴퓨터에 서비스를 제공하지만 IPsec을 사용하지 않는 호스트.

경계 그룹과 마찬가지로, 예외 목록에 호스트를 추가하려면 공식적인 승인 프로세스가 필요합니다.

**참고** Microsoft Windows XP 및 Windows Server 2003에 대해 예외 목록이 필요하지 않도록 설정하는 "간단한 정책" 수정이 있습니다. 자세한 내용은 기술 자료 문서 [914841](http://support.microsoft.com/?kbid=914841) (http://support.microsoft.com/?kbid=914841) 및 [914842](http://support.microsoft.com/?kbid=914842) (http://support.microsoft.com/?kbid=914842)를 참조하십시오.

###### IPsec 관리 고려 사항

IPsec 정책은 일단 구현되면 네트워크에 있는 여러 호스트의 통신에 영향을 미칩니다. 따라서 배포 후에 발생한 변경 내용은 많은 사용자에게 중대한 영향을 미칠 수 있습니다. 이러한 이유로, IPsec 기반 격리 네트워크에 적용된 모든 변경 내용은 다음을 포함하는 표준화된 MOF 변경 관리 프로세스를 따라야 합니다.

-   변경 요청(RFC)

-   변경 분류

-   변경 허가

-   변경 개발

-   변경 릴리스

-   변경 검토

Microsoft에서는 Windows Server 2003을 IPsec 관리 플랫폼으로 사용하도록 권장합니다. 관리 작업을 용이하게 하기 위해 관리자가 Windows Server 2003 콘솔에서 Netsh 명령줄 도구 또는 IP 보안 정책 MMC 스냅인을 사용할 수 있습니다. IPsec 정책은 그룹 정책을 통해 전달되기 이러한 방법을 사용하지 않으면 관리하기가 쉽지 않습니다. 따라서 설정된 "컴퓨터 추가" 프로세스를 사용하면 컴퓨터를 신뢰할 수 있는 네트워크에 자동으로 추가할 수 있습니다.

그러나 변경을 고려 중인 경우에는 다음과 같은 몇 가지 내용을 염두에 두어야 합니다.

-   IPsec SA에 사용되던 필터 동작을 변경하면 해당 정책 설정 아래에서 설정되었던 SA가 삭제됩니다. 이 기능은 트래픽이 전송 중인 경우 새로운 빠른 모드 시도를 작성하는데 이로 인해 네트워크 트래픽이 중단될 수 있습니다.

-   인증 방법 또는 기본 모드 보안 방법을 변경하면 IKE가 기존의 기본 모드를 삭제합니다. 특정 환경에서는 이 기능으로 클라이언트와의 서버측 IKE 기본 모드 협상이 실패할 수 있습니다.

-   GPO의 IPsec 정책이 변경되면 환경의 크기 및 복잡성에 따라 몇 분에서 몇 시간까지의 특정 지연(Active Directory 복제 지연 및 GPO 폴링 지연 포함)이 발생합니다.

다른 관리 고려 사항으로는 감염이 발생했을 때 의심스러운 컴퓨터를 격리하는 방법에 대한 것입니다. 악의적인 활동을 처리하는 데에는 다음을 포함하는 여러 방법이 있습니다.

-   **격리 도메인 격리** . 신뢰할 수 없는 장치가 플랫폼에 악의적인 활동을 수행 중이라고 의심되는 경우 IPsec 보안 요청 모드 필터를 수정하여 보안되지 않는 통신을 비활성화하면 격리된 네트워크가 신뢰할 수 없는 네트워크에서 완전히 격리됩니다.

-   **의심스러운 포트 차단** . 두 개의 단방향 필터가 있는 필터 목록을 만들면 포트별로 트래픽을 차단할 수 있습니다. 이 접근 방법은 DNS와 같은 필요한 트래픽을 차단시켜 추후 IPsec 변경이나 롤백을 어렵게 만들 수 있기 때문에 주의해서 사용해야 합니다.

-   **자식 도메인에 격리** . IPsec 인증에 Kerberos 프로토콜이 아닌 사전 공유된 키가 사용되도록 도메인의 정책을 변경하면 도메인을 포리스트의 다른 도메인으로부터 격리할 수 있습니다.

-   **사전 정의된 그룹에 격리** . IPsec 인증에 Kerberos 프로토콜 대신 사전 공유 키 또는 인증서를 사용하면 다른 키 또는 인증서를 사용하는 격리 그룹을 만들어 동일한 격리 유형의 기능을 수행하도록 할 수 있습니다.

##### VPN 격리 서비스를 사용하여 관리되지 않는 원격 컴퓨터로부터 보호

VPN 격리 제어의 실제 배포에는 기본적으로 다른 변경 관리 요청 프로세스 및 특정 기업에 존재할 수 있는 사전 배포 테스트 프로세스 외에 6가지 단계가 포함됩니다. 이 6가지 단계는 다음과 같습니다.

1.  격리 리소스 작성

2.  클라이언트 구성을 검증하기 위한 스크립트 작성

3.  원격 액세스 서버에 수신기 구성 요소(Rqs.exe) 설치

4.  Windows Server 2003 CMAK를 사용하여 격리 연결 마법사(CM) 프로필 작성

5.  CM 프로필을 원격 액세스 클라이언트 컴퓨터에 분배

6.  격리 원격 액세스 정책 구성

###### 1. 격리 리소스 작성

격리된 클라이언트가 설정된 보안 정책을 준수하는 상태가 되기 위해 내부 리소스를 사용하려는 경우에는 필요한 업데이트 및 자체 보안에 필요한 기타 소프트웨어를 설치하는 데 사용할 수 있는 액세스 가능한 리소스가 있어야 합니다. 이전 섹션에서 자세히 설명한 것과 같이 이러한 리소스에는 보통 이름 서버, 파일 서버 및 종종 웹 서버가 포함됩니다. 이러한 격리 리소스를 지정하는 데에는 몇 가지 접근 방법을 사용할 수 있는데, 내부 네트워크에 있는 기존 서버를 지정하거나 필요한 리소스를 분리된 자체 서브넷에 배치하는 방법이 포함됩니다.

개별 서버를 지정하는 첫 번째 방법은 기존 서버를 사용하면 되므로 업데이트 전달을 위한 별도의 서버 추가와 관련된 비용을 줄일 수 있습니다. 그러나 이 접근 방법은 각 리소스의 격리 원격 액세스 정책에서 MS-Quarantine-IPFilter 속성에 고유의 필터 세트가 필요하기 때문에 복잡한 패킷 필터가 필요합니다.

모든 격리 리소스를 하나의 격리 서비스 전용 서브넷에 배치하는 방법은 네트워크 환경에 별도로 서버를 추가해야 하는 단점이 있지만 모든 격리 리소스에 대해 하나의 입/출력 패킷만 있으면 됩니다.

###### 2. 검증 스크립트 작성

격리 스크립트는 원격 액세스 컴퓨터가 보안 정책을 준수하는지 확인하기 위해 일련의 테스트를 수행합니다. 이러한 테스트가 완료되면 스크립트는 RQC.exe 클라이언트 구성 요소(성공한 경우)를 실행하거나 그렇지 않으면 규정을 준수할 수 있도록 클라이언트 컴퓨터를 적절한 리소스에 안내합니다. 물론 이 스크립트는 네트워크 정책에 명시된 경우 실패 메시지와 함께 네트워크 시간 초과를 적용할 수도 있습니다. 이 스크립트는 명령줄 배치 파일처럼 간단하거나 실행 파일처럼 복잡할 수 있습니다.

Microsoft 다운로드 센터의 **[VPN 격리 샘플 스크립트 (영문)](http://www.microsoft.com/downloads/details.aspx?familyid=a290f2ee-0b55-491e-bc4c-8161671b2462&displaylang=en) 페이지(www.microsoft.com/downloads/details.aspx?FamilyID=a290f2ee-0b55-491e-bc4c-8161671b2462&displaylang=en)에서 샘플 스크립트를 검토하고 다운로드할 수 있습니다.

###### 3. 원격 액세스 서버에 RQS.exe 설치

Microsoft Windows Server 2003 컴퓨터에 원격 액세스 격리 에이전트 서비스(Rqs.exe)를 설치하는 프로세스는 서비스 팩 1(SP1)이 설치된 Windows Server 2003 서버의 경우 다릅니다. 앞에서 모든 시스템에 최신 서비스 팩과 보안 업데이트가 설치되어 있다고 가정했으므로 간결하게 설명하기 위해 이 섹션에서는 SP1이 설치된 Windows Server 2003에 설치하는 경우에 대해서만 설명합니다.

**SP1이 설치된 Windows Server 2003 서버에 Rqs.exe를 설치하려면**

1.  **시작** 을 클릭한 다음 **제어판** 을 클릭합니다.

2.  **프로그램 추가/제거** 를 클릭합니다.

3.  **Windows 구성 요소 추가/제거** 를 클릭합니다.

4.  **구성 요소** 를 선택하고 **네트워킹 서비스** 를 클릭합니다.

5.  **자세히** 를 클릭합니다.

6.  **네트워킹 서비스의 하위 구성 요소** 를 선택하고 **원격 액세스 임시 차단 서비스** 를 클릭한 다음 **확인** 을 클릭합니다.

이 프로세스는 격리 서비스를 설치하지만 시작하지는 않습니다. 격리 서비스 시작은 솔루션이 완전히 구성되고 환경이 구현에 맞게 준비된 이후에 관리자가 수동으로 수행해야 합니다.

설치 프로세스에서 수행해야 할 추가적인 단계로서, 격리 스크립트의 Rqc.exe에 대해 구성된 버전 문자열과 일치하도록 스크립트의 버전 문자열을 수정해야 합니다. Rqs.exe는 여러 스크립트 버전 문자열을 허용하도록 구성할 수 있으며 이 내용은 **HKEY\_LOCAL\_MACHINE\\SYSTEM\\CurrentControlSet\\Services\\rqs\\AllowedSet** 아래에 있는 원격 액세스 서버의 레지스트리에 기록됩니다. 이곳이 바로 이러한 설정이 REG\_MULTI\_SZ 값 유형을 통해 적용되어야 하는 위치입니다. 일반적으로 **Allowed Set** 값은 **RASQuarantineConfigPassed** 에 설정되지만 다른 문자열 값을 추가할 수 있습니다.

###### 4. 격리 CM 프로필 작성

격리 CM 프로필은 다음과 같은 내용이 추가되어 있는 전형적인 원격 액세스 CM 프로필입니다.

-   네트워크 정책 준수 여부 및 실제 스크립트 자체 검사를 위해 작성된 스크립트를 실행하는 사후 연결 작업. 이 작업은 CMAK 마법사의 사용자 지정 동작 페이지에서 수행됩니다.

-   알림 구성 요소. CMAK 마법사의 **추가 파일** 화면에서 알림 구성 요소도 프로필에 추가해야 합니다.

###### 5. CM 프로필 분배

새로 작성된 격리 CM 프로필은 모든 원격 액세스 클라이언트 컴퓨터에 분배 및 설치되어야 합니다. 프로필은 각 원격 액세스 클라이언트 컴퓨터에서 설치되어야 할 실행 파일의 형태로 제공됩니다. 이 실행 파일은 프로필을 설치하고 격리 네트워크 연결을 구성합니다.

이러한 프로필은 수동 프로세스를 통해 분배될 수 있는데, 예를 들어 사용자에게 첨부 파일 형태로 지침과 함께 전송할 수 있습니다. 또는 SMS 2003 소프트웨어 분배와 같은 도구를 사용하여 자동화된 방법으로 분배할 수도 있습니다. 사용할 수 있는 방법에는 여러 가지가 있으며 최적의 접근 방법은 각 환경에 따라 다릅니다.

###### 6. 격리 원격 액세스 정책 구성

격리 원격 액세스 정책을 구성하는 절차는 해당 정책이 IAS 서버에서 구성되는지 아니면 다른 인증 공급자에서 구성되는지에 따라 다릅니다. 다음을 참조하십시오.

-   IAS RADIUS 서버에서 구성되는 경우에는 IAS(인터넷 인증 서비스) 스냅인을 사용합니다.

-   Windows 인증 공급자에서 구성되는 경우에는 라우팅 및 원격 액세스 스냅인을 사용합니다.

정책을 작성할 때에는 표준 모드 원격 액세스 정책을 먼저 작성해야 합니다. 그런 다음 원격 액세스 정책 프로필 속성의 **고급** 탭에서 MS-Quarantine-Session-Timeout 및 MS-Quarantine-IPFilter 속성을 추가해야 합니다.

RADIUS가 사용되는 경우에는 구성을 복사하거나 각 서버에서 수동으로 작성하는 방법으로 격리 원격 액세스 정책을 다른 RADIUS 서버에 복제해야 합니다.

##### 802.1X 인증을 사용하여 관리되지 않는 무선 클라이언트로부터 보호

이전 섹션에서 설명한 것과 같이 중소 기업의 무선 네트워크 보안을 위해 Microsoft에서 권장하는 옵션을 가장 안전한 것부터 나열하면 다음과 같습니다.

-   WPA2/AES 및 EAP-TLS

-   WPA2/AES 및 PEAP-MS-CHAP v2

-   WPA/TKIP 및 EAP-TLS

-   WPA/TKIP 및 PEAP-MS-CHAP v2

EAP-TLS 또는 PEAP-MS-CHAP v2가 WEP의 안전성을 높여줄 수 있지만 WEP는 보다 안전한 WPA 또는 WPA2 표준으로 전환하는 동안 다른 솔루션의 일부로 사용하는 것이 좋습니다.

EAP-TLS 및 PEAP-MS-CHAP v2 구현 프로세스는 일부 유사한 점을 가지고 있습니다. 이 두 가지는 모두 솔루션의 일부로 Microsoft IAS RADIUS 서버를 사용하며 특정 형식의 인증서를 필요로 합니다. 그러나 EAP-TLS는 클라이언트 컴퓨터와 서버 컴퓨터 양쪽에 대해 인증서를 요청하지만 PEAP-MS-CHAP v2에서는 인증 서버의 인증서만 요청합니다. 그렇기 때문에 EAP-TLS를 구현할 때에는 인증서 인프라를 구축하는 것이 좋습니다. 왜냐하면 모든 클라이언트에 대한 인증서를 타사 공급자로부터 구매하는 비용이 엄청나기 때문입니다.

###### EAP-TLS 및 PEAP-MS-CHAP v2를 사용하여 무선 인증

EAP-TLS 및 PEAP-MS-CHAP v2의 구현 프로세스에는 이 문서에서 설명하지 않은 여러 세부 사항이 포함됩니다. 하지만 무선 네트워크 보안을 위한 솔루션의 설계 및 구현을 돕는 몇 가지 훌륭한 리소스를 사용할 수 있습니다. 아래에서 그 내용을 참조할 수 있습니다.

-   Microsoft TechNet의 [Deployment of Secure 802.11 Networks Using Microsoft Windows (영문)](http://www.microsoft.com/technet/prodtechnol/winxppro/deploy/ed80211.mspx) 페이지(www.microsoft.com/technet/prodtechnol/winxppro/deploy/ed80211.mspx)에서는 두 가지 IEEE 802.1X 인증 접근 방법에 대한 구현 정보를 제공합니다.

-   [Securing Wireless LANs with Certificate Services (영문)](http://go.microsoft.com/fwlink/?linkid=14844) 다운로드 페이지 (http://go.Microsoft.com/fwlink/?LinkId=14844)에서는 Microsoft 네트워크에서의 EAP-TLS 구현에 관련한 리소스 및 자세한 정보를 제공합니다.

-   [Securing Wireless LANs with PEAP and Passwords (영문)](http://go.microsoft.com/fwlink/?linkid=23481) 다운로드 페이지(http://go.Microsoft.com/fwlink/?LinkId=23481)에서는 Microsoft 네트워크에서의 PEAP-MS-CHAP v2 구현에 관련한 자세한 정보를 제공합니다.

-   [The Wi-Fi Protected Access 2 (WPA2)/Wireless Provisioning Services Information Element (WPS IE) update for Windows XP with Service Pack 2 is available](http://support.microsoft.com/kb/893357/ko) 페이지(http://support.microsoft.com/kb/893357/ko)에서는 SP2가 설치된 Microsoft Windows XP에서 WPA2 표준을 지원하는 데 필요한 정보를 설명합니다.

##### SMS를 사용하여 관리되지 않는 시스템 탐지 및 수정

"개발" 섹션에서 설명한 것과 같이 SMS 검색 프로세스는 SMS에서 관리할 수 있는 컴퓨터인 경우 네트워크에 새로 연결된 컴퓨터를 찾는 데 매우 유용합니다. 그러나 일부 관리할 수 없는 시스템에 대해서는 검색 프로세스 동안 SMS가 해당 시스템을 검색하지 못하기 때문에 다른 메커니즘을 통해 이 단점을 보완해야 한다는 점에 대해서도 설명했습니다.

SMS가 네트워크에 연결된 컴퓨터를 검색하지 못하는 이유로는 다음과 같은 것들이 있을 수 있습니다.

-   컴퓨터가 연결되었지만 검색 시 실행되지 않고 해당 도메인에 컴퓨터 계정이 없는 경우

-   컴퓨터가 특정 서브넷에 연결되었지만 방화벽 또는 다른 네트워크 장치가 SMS 서버와 해당 서브넷 간에 통신하지 못하도록 방지하는 경우

-   컴퓨터가 액세스 가능한 네트워크에 연결되었지만 SMS가 검색하지 못하는 운영 체제를 사용하는 경우

그러한 가능성에 대처하려면 SMS의 유용성과 SMS가 관리할 수 있는 항목에 대한 예외 사항이 포함된 스크립트를 결합하는 사용자 지정 솔루션이 필요합니다. 사용자 지정 스크립트는 스케줄러 프로세스를 통해 정기적으로 네트워크를 검색하는 데 사용할 수 있습니다. 이렇게 하면 짧은 시간 동안만 연결되는 장치를 검색할 수 있습니다. 또한 이 스크립트는 다른 방법으로 격리된 서브넷에 위치한 워크스테이션 또는 서버에서 실행될 수도 있기 때문에 관리되지 않는 시스템이 다른 방법으로 모니터링되지 않는 이러한 네트워크 세그먼트에 연결할 때 이를 탐지할 수 있습니다. 이러한 스크립트는 WMI 기반 검색 프로세스를 시도하지 않기 때문에 관리되지 않는 클라이언트에서 사용 중인 운영 체제에 영향을 받지 않습니다.

SMS 스크립팅 솔루션 리소스에 대한 링크를 포함하여 네트워크에서 장치 검색을 위해 SMS를 사용하는 방법에 관한 자세한 내용은 [Patch Management Using Systems Management Server 2003 (영문)](http://www.microsoft.com/technet/itsolutions/cits/mo/swdist/pmsms/2003/pmsms031.mspx) Solution Accelerator(www.microsoft.com/technet/itsolutions/cits/mo/swdist/pmsms/2003/pmsms031.mspx) 또는 [Microsoft Systems Management Server](http://www.microsoft.com/korea/smserver/) 홈 페이지(www.microsoft.com/korea/smserver)를 참조하십시오.

[](#mainsection)[페이지 위쪽](#mainsection)

### 요약

이 문서에서는 관리되지 않는 시스템과 관련한 문제점을 관리하는 데 포괄적인 접근 방법을 사용할 수 있음에 대해 설명했습니다. IPsec 네트워크 격리는 관리되지 않는 시스템이 신뢰할 수 있는 네트워크 리소스에 액세스할 수 없도록 방지하고 규정을 준수하지 않는 컴퓨터에 대한 서비스 거부를 통해 규정을 적용하도록 유도하는 데 사용할 수 있습니다. VPN 격리 서비스는 원격 액세스 솔루션을 사용하지만 거의 로컬 네트워크에 연결하지 않는 모바일 컴퓨터에 대해 규정을 적용하는 데 사용할 수 있습니다. IEEE 802.1X 및 WPA/WPA2는 무선 LAN의 악의적인 장치에 대한 보호를 제공하는 데 사용할 수 있습니다. 마지막으로 SMS 및 탐지 스크립트는 관리되지 않는 시스템을 탐지하거나 관리되는 컴퓨터에 대해 모든 패치 및 보안 업데이트를 최신으로 유지하도록 하는 데 사용할 수 있습니다.

이러한 기술적인 솔루션은 관리되지 않는 악의적인 장치와 연관된 많은 문제를 해결하는 데 도움을 주지만 건전한 보안 정책이 만들어지고 엄격한 변경 관리 프로세스가 구축된다면 이러한 솔루션을 더욱 향상시킬 수 있습니다. 이러한 솔루션, 정책 및 프로세스를 모두 결합하면 관리 비용을 줄이고 보안 위험을 허용 가능한 수준까지 낮출 수 있는 관리 가능한 중소 기업 인프라를 구축할 수 있습니다.

[](#mainsection)[페이지 위쪽](#mainsection)

### 부록 A: 네트워크 액세스 보호

네트워크 액세스 보호(NAP)는 컴퓨터 관련 정책을 준수하도록 지정하는 차세대 Windows(Microsoft Windows Server Longhorn 및 Windows Vista™)의 일부가 되는 새 기능입니다. NAP를 사용하여 관리자는 상태 요건을 충족하지 않는 컴퓨터가 네트워크에 연결될 때 해당 컴퓨터에 대한 네트워크 액세스를 제한하는 API(Application Programming Interface)를 통해 상태 검증 정책 임계값을 설정할 수 있습니다.

NAP의 유연성은 관리자가 해당 환경 요건에 대한 사용자 지정 솔루션을 구성하여 네트워크에 연결하는 컴퓨터의 상태를 로깅하거나 자동으로 소프트웨어 업데이트를 배포하거나 상태 요건을 충족하지 않는 시스템의 연결을 제한할 수 있도록 합니다. 또한 타사 응용 프로그램 및 사용자 지정 프로그램 솔루션을 통합하여 포괄적으로 컴퓨터 상태 정책을 적용할 수도 있습니다. NAP는 포괄적이기 때문에 관리자는 NAP의 구성 요소를 사용하여 DHCP, VPN 및 802.1X 무선 네트워크를 통해 상태 정책을 적용할 수 있습니다. 또한 NAP는 IPsec과도 호환됩니다.

NAP에 대한 자세한 내용은 [Network Access Protection (영문)](http://www.microsoft.com/technet/itsolutions/network/nap/default.mspx) 홈 페이지(www.microsoft.com/technet/itsolutions/network/nap/default.mspx)를 참조하십시오.

**다운로드**

['관리되지 않는 클라이언트로부터 네트워크 보호' 문서 보기 (영문)](http://go.microsoft.com/fwlink/?linkid=29503)

[](#mainsection)[페이지 위쪽](#mainsection)
