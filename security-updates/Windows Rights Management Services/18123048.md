---
TOCTitle: 메시지 큐 모니터링
Title: 메시지 큐 모니터링
ms:assetid: 'a7109399-3a84-4681-874b-f6ea1646b0a0'
ms:contentKeyID: 18123048
ms:mtpsurl: 'https://technet.microsoft.com/ko-kr/library/Cc747716(v=WS.10)'
---

메시지 큐 모니터링
==================

RMS 로깅은 메시지 큐(MSMQ)를 사용하여 이벤트를 로깅 데이터베이스로 보냅니다. 각 RMS 프런트 엔드 서버는 메시지 큐 서비스에 메시지를 전송하고 각 프런트 엔드 서버의 로깅 수신 서비스는 메시지 큐의 대기열에서 로깅 메시지를 검색하여 로깅 데이터베이스에 씁니다. 로깅 데이터베이스 또는 데이터베이스 서버가 사용할 수 없게 되거나 로깅 수신 서비스가 중지되면 메시지 큐의 대기열에 메시지를 저장합니다. 로깅 데이터베이스 또는 데이터베이스 서버를 종료하려면 먼저 모든 프런트 엔드 서버의 로깅 수신 서비스를 종료한 다음, 데이터베이스 또는 데이터베이스 서버를 다시 시작하고 모든 프런트 엔드 서버의 로깅 수신 서비스를 다시 시작하는 것이 좋습니다.

데이터베이스가 실패하고 로깅 수신 서비스가 계속 실행되고 있으면 로깅 수신 서비스가 데이터베이스에 로깅 메시지를 쓸 수 없게 됩니다. 로깅 수신 서비스에서 메시지를 "배달 못한 편지" 메시지 큐의 대기열로 이동하다가 데이터베이스를 사용할 수 있게 되면 데이터베이스에 새 로깅 메시지를 쓰게 됩니다. 배달 못한 편지 대기열에 있는 메시지를 로깅 데이터베이스에 자동으로 쓰지 않습니다. 배달 못한 편지 대기열에 있는 메시지를 보고 삭제하려면 다음 단계를 수행합니다.

1.  MMC(Microsoft Management Console) 컴퓨터 관리 스냅인을 엽니다. 컴퓨터 관리 스냅인을 열려면 **시작**을 클릭하고 **모든 프로그램**, **관리 도구**를 차례로 가리킨 다음 **컴퓨터 관리**를 클릭합니다.
2.  콘솔 트리의 서비스 및 응용 프로그램 아래에 있는 메시지 큐, 개인 큐를 차례로 클릭합니다.
3.  두 개의 대기열을 볼 수 있게 됩니다. 두 대기열의 이름은 모두 "**drms\_logging**"으로 시작하고 그 뒤에 클러스터 이름이 옵니다. 두 대기열 중 하나가 "**drms\_logging***\_&lt;클러스터 이름&gt;*\_**deadletter**"로 명명됩니다. 이것이 배달 못한 편지 대기열입니다. 대기열 이름, 대기열 메시지 대기열을 차례로 클릭합니다.
4.  각 메시지를 두 번 클릭하여 해당 속성을 봅니다.
5.  대기열을 삭제하려면 **대기열 메시지** 대기열을 마우스 오른쪽 단추로 클릭하고 **모든 작업**을 선택한 다음, **제거**를 클릭합니다.

기본 구성으로 메시지 큐는 모든 대기열 메시지를 서버의 사용 가능한 저장 공간 한도까지 저장합니다. 메시지 큐가 사용 가능한 하드 디스크 공간을 모두 사용하면 RMS 서버에서 클라이언트 요청을 처리할 수 없습니다. 이를 방지하려면 다음 단계를 수행하여 메시지 큐가 대기열에 사용할 수 있는 디스크 공간의 양을 제한합니다.

1.  MMC(Microsoft Management Console) 컴퓨터 관리 스냅인을 엽니다. 컴퓨터 관리 스냅인을 열려면 시작을 클릭하고 모든 프로그램, 관리 도구를 차례로 가리킨 다음 컴퓨터 관리를 클릭합니다.
2.  콘솔 트리의 서비스 및 응용 프로그램 아래에 있는 메시지 큐, 개인 큐를 차례로 클릭합니다.
3.  두 개의 대기열을 볼 수 있게 됩니다. 두 대기열의 이름은 모두 "drms\_logging"으로 시작합니다. 각 대기열에 대해 다음 단계를 수행합니다.
    -   속성을 클릭합니다.
    -   메시지 저장소 제한(KB) 확인란을 선택한 다음 대기열에 저장할 수 있는 모든 대기열 메시지의 전체 크기(KB)를 입력합니다.

대기열이 가득찬 경우 RMS에서 보낸 메시지 도착 시 삭제되고 이벤트 ID 48에 연결되어 있는 다음 이벤트 메시지가 시스템 이벤트 로그로 보내집니다.

"속성 모음을 메시지 큐로 보내지 못했습니다."

이 이벤트가 발생하면 로깅 데이터베이스에 문제가 있는 것이므로 이 이벤트가 발생할 때 경고하도록 시스템 모니터링 도구를 구성하는 것이 좋습니다.
